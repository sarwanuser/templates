window.console||(window.console={log:function(){}});var _error_msg=0,_decimalplaces,_display_decimalplaces,_isBookingAllowed=!0,_noGaps=!0,_totalBookingAmount=0,_bookingError="",_noset=!1,_row_total=[],_row_strike_total=[],_first_load=0,_quick_load=0,default_var=0,resize_done=-1,realpersonloaded=!1,lfolder="";!function($){$.ajax({url:window.location.protocol+"//"+window.location.hostname+"/booking/sevicedata.php",type:"POST",dataType:"JSON",data:{action:"book_rooms"},error:function(e,a,t){console.log("AJAX - token error() >> "+t)},success:function(e){console.log("result"),console.log(e)}}),$.fn.eZBookingPlugin=function(e){var a=$.extend({},defaultOptions,e);_decimalplaces=a.decimalplaces,_display_decimalplaces=a.display_decimalplaces,methods._init(a),1==a.loadgrid&&methods._loadGrid(a),1==a.modifysearch&&methods._initModifyGrid(a)};var methods={test:"123",_init:function(i){if(i.init){if(1==i.siteroot&&(methods._loadHeader(i),methods._loadExternalCssJs(i),methods._loadJsDefault(i)),1==i.siteroot){var e="action=getDefaultDays&HotelId="+i.HotelId+"&DefaultDays="+i.CalMinDate,a=i.CalMinDate;jQuery.ajax({type:"POST",url:i.serverurl+"service.php",async:!1,data:e,success:function(e){a=e.trim()}}),""!=a&&null!=a&&0<=a&&(i.CalMinDate=a)}var t,r,l,o,s,d;console.log("init cal ..................."),getUrl=i.serverurl+"bx-"+i.HotelId,"null"!=i.chkindate&&(t=i.chkindate),null!=i.chkoutdate_modify&&""!=i.chkoutdate_modify?r=i.chkoutdate_modify:"null"!=i.chkoutdate&&1==i.ShowDepart&&(r=i.chkoutdate),null!=i.nights_billing&&""!=i.nights_billing?o=i.nights_billing:1==i.ShowNights&&0!=i.SelectedNights&&null!=i.chkoutdate_modify&&(o=i.SelectedNights),null==i.SelectedPromo||""==i.SelectedPromo||null!=$("input[id$='promotioncode']").val()&&""!=$("input[id$='promotioncode']").val()||(l=i.SelectedPromo),""!=i.CalLanguage&&(_setCalLanguage=i.CalLanguage),0!=i.SelectedAdults&&""!=i.SelectedAdults?s=i.SelectedAdults:0!=i.defaultselectedadult&&""!=i.defaultselectedadult&&(s=i.defaultselectedadult),0==i.RunOnMaximumOccupanySettings?""!=i.SelectedChild?d=i.SelectedChild:""!=i.defaultselectedchild&&(d=i.defaultselectedchild):d=0,$.ajax({url:getUrl,type:"POST",dataType:"html",data:{calendarDateFormat:i.CalDtFormat,calendarDefaultDays:i.CalMinDate,HotelId:i.HotelId,isLogin:i.isLogin,eZ_chkin:t,eZ_chkout:r,eZ_Nights:o,eZ_adult:s,eZ_child:d,promotionalcode:l,selectedLang:i.selectedLang,CalLanguage:_setCalLanguage,LayoutTheme:i.LayoutTheme},error:function(e){console.log("AJAX - error() _init "+e)},beforeSend:function(){try{parent.document.domain==i.serverhost||parent.editframe||(methods._iescriptload(i),console.log("AJAX - _iescriptload() load - if"))}catch(e){methods._iescriptload(i),console.log("AJAX - _iescriptload() load - else "+e)}},complete:function(){1==i.siteroot&&(methods._setThemes(i),methods._loadbbevents()),1!=i.siteroot&&methods._loadOtherJs(i),methods._getImages(i),methods._initDatePicker(i),methods._loadLoadingBar(),methods._loadAcr(i),90<i.SelectedNights?jQuery(".confirm").click(function(){methods._loadGrid(i)}):methods._loadGrid(i),methods._loadPromotion(i),methods._loadFilterBar(i),0==i.ShowCurrencyCountryWise&&(console.log("get country name"),methods._getCountryName(i)),$("#book").click(function(){if(0==i.ShowNights&&1==i.ShowDepart){var a=$("#eZ_chkin").val(),e=$("#eZ_chkout").val();a=$.datepicker.parseDate(i.CalDtFormat,a);var t=((e=$.datepicker.parseDate(i.CalDtFormat,e))-a)/864e5;if(90<t){var r=js_stripslashes(langjs[0].SWAL_morenightsnotallowed),l=js_stripslashes(langjs[0].lblAccessRestricted);return swal({title:l,text:r,type:"warning",animation:!1},function(){var e=a;e.setDate(e.getDate()+90),jQuery("#eZ_chkout").datepicker("setDate",e),jQuery("#eZ_Nights").val(90)}),hideCheckavalabilityLoadingBar(),!1}if(t<0){r=js_stripslashes(langjs[0].L_ChkGreater),l=js_stripslashes(langjs[0].lblErrordate);return swal({title:l,text:r,type:"error",animation:!1}),hideCheckavalabilityLoadingBar(),!1}}else if(90<parseInt(jQuery("Select[id$='eZ_Nights']").val())){r=js_stripslashes(langjs[0].SWAL_morenightsnotallowed),l=js_stripslashes(langjs[0].lblAccessRestricted);return swal({title:l,text:r,type:"warning",animation:!1},function(){jQuery('#eZ_Nights option[value="90"]').prop("selected",!0).change()}),hideCheckavalabilityLoadingBar(),!1}methods._checksession(i,"book")}),$("#promotioncode").keyup(function(e){13==e.keyCode&&(jQuery("#trackbtnclicked").val(1),methods._loadGrid(i))}),$("#promotioncode3").keyup(function(e){13==e.keyCode&&(jQuery("#trackbtnclicked").val(1),methods._loadGrid(i))})},success:function(e){$("<div id='temp' style='display:block;'></div>").appendTo("div#eZee_BookingHeader"),$("#temp").html(e),$("#eZee_BookingHeader").html($("#box").html()),$("#temp").remove()}}),i.init=!1}i.init},_checksession_test:function(a,e){try{getUrl=a.serverurl+"service.php?HotelId="+a.HotelId+"&chksession=1";var t=js_stripslashes(langjs[0].lblHangon),r=js_stripslashes(langjs[0].lblSessionExpired),l=js_stripslashes(langjs[0].L_Pleaserefreshpage);return $.ajax({url:getUrl,type:"POST",dataType:"html",data:{HotelId:a.HotelId,selectedLang:a.selectedLang,LayoutTheme:a.LayoutTheme},error:function(e){console.log("AJAX - error() _init "+e)},complete:function(){},success:function(e){if(""!=jQuery.trim(e))return swal({title:t,text:r,type:"warning",confirmButtonText:l,showCancelButton:!1,confirmButtonColor:"#DD6B55",animation:!1},function(){""!=a.LocalFolderSessionChk?window.location.href=a.serverurl+"book-rooms-"+a.LocalFolderSessionChk:lfolder=1}),hideLoadingBar(),!1}}),""==lfolder}catch(e){hideLoadingBar(),hideCheckavalabilityLoadingBar(),console.log("Error - _checksession_test - "+e.message)}},_checksession:function(a,t){try{getUrl=a.serverurl+"service.php?HotelId="+a.HotelId+"&chksession=1";var r=js_stripslashes(langjs[0].lblHangon),l=js_stripslashes(langjs[0].lblSessionExpired),i=js_stripslashes(langjs[0].L_Pleaserefreshpage);if("-zh-CN-Chinese"!=a.selectedLang&&"-zh-TW-ChineseTraditional"!=a.selectedLang)var e=a.selectedLang.split("-");else{var o=a.selectedLang.split("-");(e=Array())[2]=o[3],e[1]=o[1]+"-"+o[2]}$.ajax({url:getUrl,type:"POST",dataType:"html",data:{HotelId:a.HotelId,selectedLang:a.selectedLang,LayoutTheme:a.LayoutTheme,lang_code:e[1],langtext:e[2]},error:function(e){console.log("AJAX - error() _init "+e)},complete:function(){},success:function(e){if(""!=jQuery.trim(e))return swal({title:r,text:l,type:"warning",confirmButtonText:i,showCancelButton:!1,confirmButtonColor:"#DD6B55",animation:!1},function(){""!=a.LocalFolderSessionChk?window.location.href=a.serverurl+"book-rooms-"+a.LocalFolderSessionChk:window.location.href=a.serverurl+"book-rooms-"+a.lfolder}),hideLoadingBar(),!1;"book"==t&&(methods._loadGrid(a),methods._InsertCheckAvail(a)),"promo"==t&&methods._loadGrid(a)}})}catch(e){hideLoadingBar(),hideCheckavalabilityLoadingBar(),console.log("Error - _checksession - "+e.message)}},_setOtherThemes:function(e){try{$(".vres_bhk_pos .full-bar-wrapper .input-daterange label p").css("color","#ffffff"),$(".vres_promo-btn").css("color","#ffffff")}catch(e){hideLoadingBar(),hideCheckavalabilityLoadingBar(),console.log("Error - _setOtherThemes - "+err.message)}},_initModifyGrid:function(e){},_loadExternalCssJs:function(e){try{$("<link/>",{rel:"stylesheet",type:"text/css",href:"https://fonts.googleapis.com/css?family=Source+Sans+Pro"}).appendTo("head")}catch(e){hideLoadingBar(),hideCheckavalabilityLoadingBar(),console.log("Error - _loadExternalCssJs - "+e.message)}},_loadHeader:function(a){try{console.log("load header"),getUrl=a.serverurl+"resheader-"+a.HotelId,$.ajax({url:getUrl,type:"POST",dataType:"html",data:{HotelId:a.HotelId,isLogin:a.isLogin,selectedLang:a.selectedLang,LayoutTheme:a.LayoutTheme},error:function(e){console.log("AJAX - error() _init "+e)},beforeSend:function(){try{parent.document.domain==a.serverhost||parent.editframe||(methods._iescriptload(a),console.log("AJAX - _iescriptload() load - if"))}catch(e){methods._iescriptload(a),console.log("AJAX - _iescriptload() load - else "+e)}},complete:function(){1==a.siteroot&&(methods._setThemes(a),methods._loadheaderevents(a),$.getScript(a.serverurl+"/templates/resui/js/main.min.js"))},success:function(e){$("<div id='tempheader' style='display:block;'></div>").appendTo("div#eZee_BookingTop"),$("#tempheader").html(e),$("#eZee_BookingTop").html($("#resheader").html()),$("#tempheader").remove()}})}catch(e){hideLoadingBar(),hideCheckavalabilityLoadingBar(),console.log("Error - _loadOtherJs - "+e.message)}},_loadOtherJs:function(e){try{methods._loadheaderevents(e),$(".vres-lang-btn").on("click",function(e){$(this).toggleClass("vres-bgli"),$(".vres-lang-btn").find(".vres-dropdown").toggle()}),methods._loadbbevents(),jQuery("ul#lang_cmb > li").on("click",function(e){var a=jQuery(this);if(!a.hasClass("langselected")){classlang=a.attr("id");var t=classlang.split("_");caption_lang=a.find("span").attr("id");var r=caption_lang.split("|");if("ru"==t[1])var l="Russian";else l=r[1];change_lang(t[1],l)}})}catch(e){hideLoadingBar(),hideCheckavalabilityLoadingBar(),console.log("Error - _loadOtherJs - "+e.message)}},_loadFilterBar:function(r){try{if(getUrl=r.serverurl+"showfilter-"+r.HotelId,"-zh-CN-Chinese"!=r.selectedLang&&"-zh-TW-ChineseTraditional"!=r.selectedLang)var e=r.selectedLang.split("-");else{var a=r.selectedLang.split("-");(e=Array())[2]=a[3],e[1]=a[1]+"-"+a[2]}$.ajax({url:getUrl,type:"POST",dataType:"html",data:{HotelId:r.HotelId,lang_code:e[1],langtext:e[2],LayoutTheme:r.LayoutTheme,ResUIshowfilter:r.ResUIshowfilter,ResUIshowfilterPreference:r.ResUIshowfilterPreference,ResUIFilterRoomType:r.ResUIFilterRoomType,ResUIFilterSearchMore:r.ResUIFilterSearchMore},error:function(e){console.log("AJAX - error() _init "+e)},beforeSend:function(){},complete:function(){if(methods._loadFilterOptions(r),$(".showhide_filter_pnl").text(""),$(".showhide_filter_pnl").on("click",function(){$(this).toggleClass("opn-tab")}),r.WebShowRatesAvgNightORWholeStay){var e=0,a=0;0<r.ResUIMinimumPrice&&(e=parseInt(r.ResUIMinimumPrice)),0<r.ResUIMaximumPrice&&(a=parseInt(r.ResUIMaximumPrice)),$("#slider-range").slider({range:!0,min:e,max:a,values:[e,a],slide:function(e,a){if("undefined"!=typeof resgrid){var t=curr_lbl_post="";1==resgrid[0][0].curr_prefix?t=resgrid[0][0].currency+" ":curr_lbl_post=resgrid[0][0].currency+" "}$("#price_slider").val(t+a.values[0]+curr_lbl_post+" - "+t+a.values[1]+curr_lbl_post),$("input#price_slider_val").val(a.values[0]+"|"+a.values[1])}})}1==r.ResUIFilterNonRefundableValue&&jQuery("#nonrefundable").prop("checked",!0),jQuery("#process_filter").on("click",function(){if(startDate=$.datepicker.parseDate(r.CalDtFormat,$("#eZ_chkin").val()),endDate=$.datepicker.parseDate(r.CalDtFormat,$("#eZ_chkout").val()),selectednights=jQuery("Select[id$='eZ_Nights']").val(),0==r.ShowNights&&1==r.ShowDepart)var e=(endDate-startDate)/864e5;else e=selectednights;if(90<e)return jQuery("#book").trigger("click"),!1;if(void 0===(a=jQuery("input#restoken").val()))var a="";jQuery.ajax({type:"POST",url:serverurl+"service.php",data:"action=checktoken&HotelId="+r.HotelId+"&config_token="+a,success:function(e){},complete:function(e){1==jQuery.trim(e.responseText)||""==a?methods._checksession(r,"promo"):swal({title:"Invalid Request",text:"Invalid Request",type:"warning",showCancelButton:!1,confirmButtonColor:"#DD6B55",animation:!1},function(){})}})}),jQuery(".gr-cnt").on("click",function(){jQuery(this).toggleClass("selected")}),jQuery("#reset_filter,#reset_filter_all").on("click",function(){jQuery("input[name='room_amenity[]']").each(function(){this.checked=!1}),jQuery("input[name='room_highlight_text[]']").each(function(){this.checked=!1}),jQuery("input#nonrefundable").removeAttr("checked",""),jQuery("input#nonrefundable").prop("checked",!1),jQuery("input#excludenotavailable").removeAttr("checked",""),jQuery("input#excludenotavailable").prop("checked",!1),jQuery("input#all_room").filter("[value=1]").removeAttr("checked",""),jQuery("input#all_pack").filter("[value=2]").removeAttr("checked",""),jQuery("input#all_default").filter("[value=0]").prop("checked",!0),jQuery("select#roomtypeunkid").val(""),r.opt_roomrateunkid="";var e=0,a=0;jQuery("#ResUIMinimumPrice").text(r.ResUIMinimumPrice),jQuery("#ResUIMaximumPrice").text(r.ResUIMaximumPrice),0<r.ResUIMinimumPrice&&(e=parseInt(r.ResUIMinimumPrice)),0<r.ResUIMaximumPrice&&(a=parseInt(r.ResUIMaximumPrice));$("#slider-range").slider({range:!0,values:[e,a],min:e,max:a});var t=curr_lbl_post="";1==resgrid[0][0].curr_prefix?t=resgrid[0][0].currency+" ":curr_lbl_post=resgrid[0][0].currency+" ",$("#price_slider").val(t+e+curr_lbl_post+" - "+t+a+curr_lbl_post),jQuery("input#price_slider_val").val(e+"|"+a),jQuery(".gr-cnt").each(function(){1==jQuery(this).hasClass("selected")&&jQuery(this).removeClass("selected")}),methods._checksession(r,"promo")}),jQuery(".showhide_filter_pnl").on("click",function(){jQuery(this).parent().next().toggle()}),jQuery(".reset_room_row").on("click",function(){jQuery("select#roomtypeunkid").val("")}),jQuery(".reset_display_row").on("click",function(){jQuery("input#all_room").filter("[value=1]").removeAttr("checked",""),jQuery("input#all_pack").filter("[value=2]").removeAttr("checked",""),jQuery("input#all_default").filter("[value=0]").prop("checked",!0)}),jQuery(".reset_ameniti_row").on("click",function(){jQuery("input[name='room_amenity[]']").each(function(){this.checked=!1})}),jQuery(".reset_searchmore_row").on("click",function(){jQuery("input[name='room_highlight_text[]']").each(function(){this.checked=!1})}),jQuery(".reset_price_row").on("click",function(){var e=0,a=0;jQuery("#ResUIMinimumPrice").text(r.ResUIMinimumPrice),jQuery("#ResUIMaximumPrice").text(r.ResUIMaximumPrice),0<r.ResUIMinimumPrice&&(e=parseInt(r.ResUIMinimumPrice)),0<r.ResUIMaximumPrice&&(a=parseInt(r.ResUIMaximumPrice));$("#slider-range").slider({range:!0,values:[e,a],min:e,max:a});var t=curr_lbl_post="";1==resgrid[0][0].curr_prefix?t=resgrid[0][0].currency+" ":curr_lbl_post=resgrid[0][0].currency+" ",$("#price_slider").val(t+e+curr_lbl_post+" - "+t+a+curr_lbl_post),jQuery("input#price_slider_val").val(e+"|"+a)}),jQuery(".reset_guestrating_row").on("click",function(){jQuery(".gr-cnt").each(function(){1==jQuery(this).hasClass("selected")&&jQuery(this).removeClass("selected")})}),jQuery(".reset_nonrefundable_row").on("click",function(){jQuery("input#nonrefundable").removeAttr("checked",""),jQuery("input#nonrefundable").prop("checked",!1),jQuery("input#excludenotavailable").removeAttr("checked",""),jQuery("input#excludenotavailable").prop("checked",!1)}),0==r.siteroot&&992<$(window).width()&&($(".filter-div").css("top",$(".filter-btn1").offset().top+45),$(".filter-div").css("left",$(".filter-btn1").offset().left),$(".filter-div").hide())},success:function(e){$("<div id='temp2' style='display:block;'></div>").appendTo("div#eZee_BookingFilter"),$("#temp2").html(e),$("#eZee_BookingFilter").html($("#filter_data").html()),$("#temp2").remove()}})}catch(e){hideLoadingBar(),hideCheckavalabilityLoadingBar(),console.log("Error - _loadFilterBar - "+e.message)}},_loadFilterOptions:function(e){try{if(1==e.ResUIshowfilter){jQuery("#filter_bar").show(),jQuery("#smallscreenfilter_bar").show();for(var a="res_FilterOption_"+e.HotelId+"=",t=document.cookie.split(";"),r=0;r<t.length;r++){for(var l=t[r];" "==l.charAt(0);)l=l.substring(1);0==l.indexOf(a)&&l.substring(a.length,l.length)}}else jQuery("#filter_bar").hide(),jQuery("#smallscreenfilter_bar").hide();if(1==e.ResUIshowfilter){if(1==e.ResUIshowfilterPlan?(jQuery("#filter_option").show(),0==e.selectedviewoptions&&jQuery("input[id$='all_default']").filter("[value='"+e.selectedviewoptions+"']").attr("checked","checked"),1==e.selectedviewoptions&&jQuery("input[id$='all_room']").filter("[value='"+e.selectedviewoptions+"']").attr("checked","checked"),2==e.selectedviewoptions&&jQuery("input[id$='all_pack']").filter("[value='"+e.selectedviewoptions+"']").attr("checked","checked")):(jQuery("input[id$='all_default']").filter("[value='0']").removeAttr("checked"),jQuery("input[id$='all_room']").filter("[value='1']").removeAttr("checked"),jQuery("input[id$='all_pack']").filter("[value='2']").removeAttr("checked"),jQuery("input[id$='all_default']").filter("[value=0]").attr("checked","checked"),jQuery("#filter_option").hide()),1==e.ResUIshowfilterPrice&&""!=e.ResUIMinimumPrice&&""!=e.ResUIMaximumPrice){if("undefined"!=typeof resgrid&&""!=resgrid[0][0].currency){var i=curr_lbl_post="";1==resgrid[0][0].curr_prefix?i=resgrid[0][0].currency+" ":curr_lbl_post=resgrid[0][0].currency+" ",0<$("#slider-range").length&&($("#price_slider").val(i+$("#slider-range").slider("values",0)+curr_lbl_post+" - "+i+$("#slider-range").slider("values",1)+curr_lbl_post),$("input#price_slider_val").val($("#slider-range").slider("values",0)+"|"+$("#slider-range").slider("values",1)))}}else jQuery("#filter_price").hide();1==e.ResUIshowfilterPreference?jQuery("#filter_amenities").show():jQuery("#filter_amenities").hide(),1==e.ResUIFilterSearchMore?jQuery("#filter_highlight").show():jQuery("#filter_highlight").hide(),1!=e.ResUIshowfilter||1!=e.ResUIshowfilterPlan&&1!=e.ResUIshowfilterPrice&&1!=e.ResUIshowfilterPreference?(jQuery("#filter_apply").hide(),jQuery("#filter_bar").hide(),jQuery("#smallscreenfilter_bar").hide()):jQuery("#filter_apply").show(),1==e.ResUIshowGuestRating?jQuery("#filter_gr").show():jQuery("#filter_gr").hide(),1==e.ResUIFilterNonRefundable||1==e.ResUIFilterExcludeNotAvailable?jQuery("#filter_nonrefundable").show():jQuery("#filter_nonrefundable").hide(),1==e.ResUIFilterNonRefundable?jQuery("#filter_nonrefundable_div").show():jQuery("#filter_nonrefundable_div").hide(),1==e.ResUIFilterExcludeNotAvailable?jQuery("#filter_excludenotavailable_div").show():jQuery("#filter_excludenotavailable_div").hide(),1==e.ResUIFilterRoomType?jQuery("#filter_roomspecific").show():jQuery("#filter_roomspecific").hide()}}catch(e){hideLoadingBar(),hideCheckavalabilityLoadingBar(),console.log("Error - _loadFilterOptions - "+e.message)}},_iescriptload:function(e){window.XDomainRequest&&jQuery.ajaxTransport(function(t){var i;if(t.crossDomain&&t.async)return t.timeout&&(t.xdrTimeout=t.timeout,delete t.timeout),{send:function(e,l){function a(e,a,t,r){i.onload=i.onerror=i.ontimeout=jQuery.noop,i=void 0,l(e,a,t,r)}(i=new window.XDomainRequest).onload=function(){a(200,"OK",{text:i.responseText},"Content-Type: "+i.contentType)},i.onerror=function(){a(404,"Not Found")},i.onprogress=function(){},t.xdrTimeout&&(i.ontimeout=function(){a(0,"timeout")},i.timeout=t.xdrTimeout),i.open(t.type,t.url,!0),i.send(t.hasContent&&t.data||null)},abort:function(){i&&(i.onerror=jQuery.noop(),i.abort())}}})},_loadJsDefault:function(e){try{var a=e.serverurl+"templates/js/";$.getScript(a+"datepicker_lang/jquery.ui.datepicker-"+e.CalLanguage+".js")}catch(e){hideLoadingBar(),hideCheckavalabilityLoadingBar(),console.log("Error - _loadJsDefault - "+e.message)}},_loadAcr:function(a){try{1==a.ShowNights?($("#nightblock").show(),methods._fillStaticCombo(1,a.Nonights,"eZ_Nights"),null!=a.nights_billing&&""!=a.nights_billing?($("select#eZ_Nights option").prop("selected",!1).filter('[value="'+a.nights_billing+'"]').prop("selected",!0),$("input#eZ_Nights2").val(a.nights_billing)):0!=a.SelectedNights&&""!=a.SelectedNights?($("select#eZ_Nights option").prop("selected",!1).filter('[value="'+a.SelectedNights+'"]').prop("selected",!0),$("input#eZ_Nights2").val(a.SelectedNights)):0==a.SelectedNights&&""!=a.SelectedNights?(a.SelectedNights=1,$("select#eZ_Nights option").prop("selected",!1).filter('[value="'+a.SelectedNights+'"]').prop("selected",!0),$("input#eZ_Nights2").val(a.SelectedNights)):1==a.ShowSelectedNights&&0!=a.DefaultSelectedNights&&""!=a.DefaultSelectedNights?($("select#eZ_Nights option").prop("selected",!1).filter('[value="'+a.DefaultSelectedNights+'"]').prop("selected",!0),$("input#eZ_Nights2").val(a.DefaultSelectedNights)):1==a.ShowSelectedNights&&0==a.DefaultSelectedNights&&""!=a.DefaultSelectedNights?(a.DefaultSelectedNights=1,$("select#eZ_Nights option").prop("selected",!1).filter('[value="'+a.DefaultSelectedNights+'"]').prop("selected",!0),$("input#eZ_Nights2").val(a.DefaultSelectedNights)):($("select#eZ_Nights option").prop("selected",!1).filter('[value="1"]').prop("selected",!0),$("input#eZ_Nights2").val(1))):$("#nightblock").hide(),0==a.ShowNights&&1==a.ShowDepart?($("#nightblock").hide(),$("#checkout_blk").show(),$("#gridcolumn").val($("input[id$='eZ_Nights']").val())):($("#checkout_blk").hide(),$("#gridcolumn").val($("input#eZ_Nights2").val())),$("select#eZ_Nights").change(function(){var e=1;if(""==$("select[id$='eZ_Nights']").val()||0==$("select[id$='eZ_Nights']").val()){if(0!=a.SelectedNights)e=a.SelectedNights;else if(1==a.ShowSelectedNights&&0!=a.DefaultSelectedNights)e=a.DefaultSelectedNights}else e=$("select[id$='eZ_Nights']").val();$("input#eZ_Nights2").val(e),$("select#eZ_Nights option").prop("selected",!1).filter('[value="'+e+'"]').prop("selected",!0),$("select[id$='eZ_Nights']").val(e),jQuery("#trackbtnclicked").val(1),jQuery("#trackbook_btnclicked").val(0)}),$("[id^=eZ_Nights2]").focus(function(){jQuery(this).select()}),$("[id^=eZ_Nights]").focus(function(){jQuery(this).select()}),$("[id^=eZ_Nights2]").change(function(){var e=1;if(""==$(this).val()||0==$(this).val()){if(0!=a.SelectedNights)e=a.SelectedNights;else if(1==a.ShowSelectedNights&&0!=a.DefaultSelectedNights)e=a.DefaultSelectedNights}else e=$(this).val();$("input#eZ_Nights2").val(e),0==$("select[id$='eZ_Nights']").find("option[value="+e+"]").length&&$("select[id$='eZ_Nights']").append("<option value="+e+">"+e+"</option>"),$("select#eZ_Nights option").prop("selected",!1).filter('[value="'+e+'"]').prop("selected",!0),jQuery("#trackbtnclicked").val(1),jQuery("#trackbook_btnclicked").val(0)}),$("select[id$='eZ_adult']").change(function(){jQuery("#trackbtnclicked").val(1),jQuery("#trackbook_btnclicked").val(0)}),$("select[id$='eZ_child']").change(function(){jQuery("#trackbtnclicked").val(1),jQuery("#trackbook_btnclicked").val(0)}),1==a.acr?($("#acr").removeClass("reshide"),$("#acr_hidden").addClass("reshide"),methods._fillStaticCombo(1,a.defaultadult,"eZ_adult"),0!=a.SelectedAdults&&""!=a.SelectedAdults?($("select[id$='eZ_adult'] option[value="+a.SelectedAdults+"]").attr("selected","selected"),$("select[id$='eZ_adult']").val(a.SelectedAdults)):0!=a.defaultselectedadult&&""!=a.defaultselectedadult&&($("select[id$='eZ_adult'] option[value="+a.defaultselectedadult+"]").attr("selected","selected"),$("select[id$='eZ_adult']").val(a.defaultselectedadult))):($("#acr").addClass("reshide"),$("#acr_hidden").removeClass("reshide"),0!=a.SelectedAdults&&""!=a.SelectedAdults&&$("input[id$='eZ_adult']").val(a.SelectedAdults)),0==a.RunOnMaximumOccupanySettings?"-1"==a.showchild_bb&&1==a.showchild||1==a.showchild_bb?($("#showchild_hidden").addClass("reshide"),$("#showchildblk").removeClass("reshide"),methods._fillStaticCombo(0,a.defaultchild,"eZ_child"),""!=a.SelectedChild&&0!=a.SelectedChild?($("select[id$='eZ_child'] option[value="+a.SelectedChild+"]").attr("selected","selected"),$("select[id$='eZ_child']").val(a.SelectedChild)):""!=a.defaultselectedchild&&0!=a.defaultselectedchild?($("select[id$='eZ_child'] option[value="+a.defaultselectedchild+"]").attr("selected","selected"),$("select[id$='eZ_child']").val(a.defaultselectedchild)):($("select[id$='eZ_child']").val(0),$("select[id$='eZ_child'] option[value=0]").attr("selected","selected"))):("-1"==a.showchild_bb&&0==a.showchild||0==a.showchild_bb)&&($("#showchildblk").addClass("reshide"),$("#showchild_hidden").removeClass("reshide")):($("#showchild_hidden").removeClass("reshide"),$("#showchildblk").addClass("reshide"))}catch(e){hideLoadingBar(),hideCheckavalabilityLoadingBar(),console.log("Error - _loadAcr - "+e.message)}},_loadPromotion:function(e){1==e.ShowPromotion?$("#promotion,#smallscreenpromotion").show():$("#promotion,#smallscreenpromotion").hide(),$(".vres_promo-btn").on("click",function(e){e.stopPropagation(),$(".promo-popUp").css("top",$(this).offset().top+45),$(".promo-popUp").css("left",$(this).offset().left-160),$(".promo-popUp").toggle(),$(".filt_wrap_bg").addClass("filt_wrap_bg_open"),$(".promo-popUp").css("left",$(".vres_promo-btn").offset().left-100)}),$(".vres-probtn").on("click",function(e){e.stopPropagation(),$(".vres-apply").toggle()});var a=$(window).width();$(window).on("resize",function(){$(window).width()!==a&&($(".promo-popUp").hide(),$(".filt_wrap_bg").removeClass("filt_wrap_bg_open"))})},_fillStaticCombo:function(e,a,t,r){console.log("_fillStaticCombo : "+e);var l=[];for(ilmt=e;ilmt<=a;ilmt++)l.push('<option value="'+ilmt+'">'+ilmt+"</option>");jQuery("select[id$='"+t+"']").html(l.join("")),""!=r&&jQuery("select[id$='"+t+"']").val(r)},_storeAuthDetails:function(e){try{$.get(e.serverurl+"service.php?HotelId="+e.HotelId+"&_xrty=true",function(e){})}catch(e){console.log("Error in _storeAuthDetails"+e)}},_setFrenchNotation:function(e){try{if("sessionStorage"in window){var a="res_FrenchHotel_"+e.HotelId;if(sessionStorage.setItem("res_HotelCode",e.HotelId),null!=sessionStorage.getItem(a))sessionStorage.getItem(a)!=e.selectedLang&&sessionStorage.setItem(a,e.selectedLang);else sessionStorage.setItem(a,e.selectedLang)}}catch(e){console.log("Error in _setFrenchNotation"+e)}},_loadGrid:function(opt){try{if(console.log("loadgrid....."),methods._setFrenchNotation(opt),jQuery("#trackbtnclicked").val(0),jQuery("#promo_apply_pnl").hide(),jQuery("#applypromo_text").text(""),jQuery(".vres_promo-btn").removeClass("promo_applied"),jQuery("body").removeClass("adjfooter"),getUrl=opt.serverurl+"rmdetails",0==opt.ShowNights&&1==opt.ShowDepart)var no_nights=$("input[id$='eZ_Nights']").val();else var no_nights=1;1==opt.ShowNights&&($("select[id$='eZ_Nights'] option[value="+$("select#eZ_Nights").val()+"]").attr("selected","selected"),no_nights=$("select[id$='eZ_Nights']").val());var layoutView=2;if(1==opt.acr)var adult=$("select[id$='eZ_adult']").val();else var adult=$("input[id$='eZ_adult']").val();if(0==opt.RunOnMaximumOccupanySettings)if("-1"==opt.showchild_bb&&1==opt.showchild||1==opt.showchild_bb)var child=$("select[id$='eZ_child']").val();else var child=$("input[id$='eZ_child']").val();else var child=0;var _selPromo="";null==opt.SelectedPromo||""==opt.SelectedPromo||null!=$("input[id$='promotioncode']").val()&&""!=$("input[id$='promotioncode']").val()||(_selPromo=opt.SelectedPromo),""==_selPromo&&(_selPromo=$("input[id$='promotioncode']").val());var showmoreless_opt="";1!=opt.siteroot&&void 0===top.frames.editframe||(showmoreless_opt=0);var norooms=1;$("input[id$='promotioncode2']").val($("input[id$='promotioncode']").val()),$.ajax({url:getUrl,type:"POST",data:{checkin:$("input[id$='eZ_chkin']").val(),gridcolumn:$("input[id$='gridcolumn']").val(),adults:adult,child:child,nonights:no_nights,ShowSelectedNights:opt.ShowSelectedNights,DefaultSelectedNights:opt.DefaultSelectedNights,calendarDateFormat:$("input[id$='CalDtFormat']").val(),rooms:norooms,promotion:_selPromo,ArrvalDt:$("input[id$='ArrvalDt']").val(),HotelId:opt.HotelId,isLogin:opt.isLogin,selectedLang:opt.selectedLang,modifysearch:opt.modifysearch,promotioncode:_selPromo,layoutView:layoutView,ShowMinNightsMatchedRatePlan:opt.ShowMinNightsMatchedRatePlan,LayoutTheme:opt.LayoutTheme,w_showadult:opt.acr,w_showchild_bb:opt.showchild_bb,ShowMoreLessOpt:showmoreless_opt,w_showchild:opt.showchild},dataType:"html",error:function(e,a,t){console.log("AJAX - error() >> "+t)},beforeSend:function(){if(showCheckavalabilityLoadingBar(),void 0!==_row_total)for(var e in _row_total)_row_total.splice(e);if(void 0!==_row_strike_total)for(var a in _row_strike_total)_row_strike_total.splice(a)},complete:function(){for(var keyname="cookieconsent_"+opt.HotelId,name=keyname+"=",ca=document.cookie.split(";"),cookie_value="",i=0;i<ca.length;i++){for(var c=ca[i];" "==c.charAt(0);)c=c.substring(1);0==c.indexOf(name)&&(cookie_value=c.substring(name.length,c.length))}console.log("cookie_value : "+cookie_value),"true"!=cookie_value&&jQuery("#cookieconsentmsg").show(),jQuery("#cookieconsent").on("click",function(){jQuery("#cookieconsentmsg").hide();var e=new Date;e.setDate(e.getDate()+365),document.cookie="cookieconsent_"+opt.HotelId+"=true;expires="+e.toUTCString()}),jQuery("[id$='main_otarow']").each(function(){jQuery(this).show(),jQuery(this).find(".vres-cnt-card").find(".card-list").each(function(){jQuery(this).show()})}),1==opt.siteroot&&methods._setThemes(opt),1==opt.ResUIshowfilter&&jQuery("#filter-wrapper_div").is(":hidden"),jQuery("#summary_head").show(),jQuery("#filter-wrapper_div").show(),methods._loadDefaultJsInit(opt),methods._loadFilterOptions(opt),$(".tipso-tooltip").tipso(),$(".tipso-tooltip-roomlist").tipso({width:"",maxWidth:300,TextAlign:"left",tooltipHover:!0}),$(".tipso-tooltip-icon").tipso({width:"",maxWidth:100,useTitle:!1}),$(".tipso-tooltip-help").tipso();try{1040<$(window).width()&&setTimeout(function(){var r=$(".vres-bookdiv").offset().top;$(window).on("scroll",function(){var e=$(".vres-bookdiv").height(),a=e+r-$(".booking-section").height(),t=e-$(".booking-section").height();$(window).scrollTop()>r?$(".booking-section").addClass("book-fixed"):$(".booking-section").removeClass("book-fixed"),$(window).scrollTop()>a?($(".booking-section").addClass("book-abso"),$(".booking-section").css({top:t})):($(".booking-section").removeClass("book-abso"),$(".booking-section").css({top:"0px"}))})},4e3)}catch(e){console.log("Error in loadbooking summary"+e)}if(methods._showdefaultCurrency(opt),void 0!==resgrid[0]&&null!=resgrid[0]){jQuery("#pnl_avg_blk").on("click",function(){if($("[id*=average_per_night_blk]").show(),$("[id*=price_for_whole_stay_blk]").hide(),jQuery(this).removeClass("active").addClass("active"),""!=opt.TripteasehotelKey&&""!=opt.TripteasehotelAPIkey&&$("#pnl_tot_blk").is(":visible")){if(1==opt.ShowNights)var e=$("select#eZ_Nights").val();else e=$("input#eZ_Nights").val();jQuery(".price-fighter-widget").attr("data-pf-direct-price",parseFloat(jQuery(".price-fighter-widget").attr("data-pf-direct-price"))/e),Paperboy.PriceCheck.reset()}}),jQuery("#pnl_tot_blk").on("click",function(){if(console.log("==========whole stay price calll========"),$("[id*=average_per_night_blk]").hide(),$("[id*=price_for_whole_stay_blk]").show(),jQuery(this).removeClass("active").addClass("active"),""!=opt.TripteasehotelKey&&""!=opt.TripteasehotelAPIkey&&$("#pnl_avg_blk").is(":visible")){if(1==opt.ShowNights)var e=$("select#eZ_Nights").val();else e=$("input#eZ_Nights").val();jQuery(".price-fighter-widget").attr("data-pf-direct-price",parseFloat(jQuery(".price-fighter-widget").attr("data-pf-direct-price"))*e),Paperboy.PriceCheck.reset()}}),jQuery("#reset_filter_all2").on("click",function(){jQuery("#reset_filter_all").click()}),3==opt.WebShowRatesAvgNightORWholeStay?1==opt.WebDefaultRatesAvgNightORWholeStay?(jQuery("#pnl_avg_blk").removeClass("active").addClass("active"),jQuery("#pnl_tot_blk").removeClass("active")):2==opt.WebDefaultRatesAvgNightORWholeStay?(jQuery("#pnl_tot_blk").removeClass("active").addClass("active"),jQuery("#pnl_avg_blk").removeClass("active")):(jQuery("#pnl_avg_blk").removeClass("active").addClass("active"),jQuery("#pnl_tot_blk").removeClass("active")):1==opt.WebShowRatesAvgNightORWholeStay?(jQuery("#pnl_avg_blk").removeClass("active").addClass("active"),jQuery("#pnl_tot_blk").removeClass("active")):2==opt.WebShowRatesAvgNightORWholeStay&&(jQuery("#pnl_tot_blk").removeClass("active").addClass("active"),jQuery("#pnl_avg_blk").removeClass("active")),$(".filter-div").hide(),$(".filt_wrap_bg").removeClass("filt_wrap_bg_open");var amenity_id=[],amenity_id_list="";jQuery("input[name='room_amenity[]']").each(function(){1==this.checked&&amenity_id.push($(this).val())}),0!=amenity_id.length&&(amenity_id_list=amenity_id);var searchmore_id=[],searchmore_list="";jQuery("input[name='room_highlight_text[]']").each(function(){if(1==this.checked){var e=$(this).val();searchmore_id.push(e)}}),0!=searchmore_id.length&&(searchmore_list=searchmore_id);var guest_rating=new Array;1==opt.ResUIshowGuestRating&&jQuery(".gr-cnt.selected").each(function(){""!=jQuery(this).text()&&guest_rating.push(parseFloat(jQuery(this).text()))});var display_view=$("input[name=pack]:checked").val();if(null==display_view&&(display_view=0),0==display_view||1==display_view||2==display_view){var row_cnt=0,total_div_len=jQuery("[id$='main_otarow']").length,main_div_hide=0,filterapply_roomtype=0,filterapply_price=0,filterapply_display=0,main_otarow_cnt=0;window.savebtnarr=[],window.allbtnarr=[],jQuery("[id$='main_otarow']").each(function(){row_cnt=jQuery(this).find(".vres-cnt-card").find(".card-list").length;var O=0,N=0,e=jQuery(this),M=-1;(1==opt.ResUILimitRatePlanPackage&&1<=opt.ResUINoOfRatePlanPackage&&(M=1),jQuery(this).find(".vres-cnt-card").find(".card-list").each(function(){var a=jQuery(this).attr("id").split("_"),e=jQuery(this);methods._ShowMoreLessMobileViewOnload(e,opt);var t=0;1==jQuery(this).find(".vrmprice > p#not_available").hasClass("rm_sold")&&1==jQuery("#excludenotavailable").is(":checked")&&t++;var r=0;1==jQuery("#nonrefundable").is(":checked")&&1==resgrid[0][a[1]].is_prepaid_noncancel_nonrefundabel&&r++;var l=0;if(0<guest_rating.length){var i="";""!=jQuery(this).find(".guestrating > span.grrate").text()&&(i=parseFloat(jQuery(this).find(".guestrating > span.grrate").text()));var o="";if(""!=i)o=parseFloat(i.toFixed(0));-1!=jQuery.inArray(o,guest_rating)&&""!=o&&l++}if(""!=searchmore_list&&void 0!==resgrid[0][a[1]].specialhighlightinclusion){var s=resgrid[0][a[1]].specialhighlightinclusion,d=new RegExp(" , ","g"),n=0;if(""!=s&&null!=s&&void 0!==s){room_highlight_list=s.replace(d,",");var c=room_highlight_list.split(",");for(gb=0;gb<searchmore_list.length;gb++)-1!=jQuery.inArray(searchmore_list[gb],c)&&n++}}if(""!=amenity_id_list&&void 0!==resgrid[0][a[1]].amenities){var _=resgrid[0][a[1]].amenities.split(","),u=0;for(gb=0;gb<amenity_id_list.length;gb++)-1!=jQuery.inArray(amenity_id_list[gb],_)&&u++}var p=0;if(1==opt.ResUIFilterRoomType&&""!=jQuery("select#roomtypeunkid").val()&&void 0!==jQuery("select#roomtypeunkid").val()&&void 0!==resgrid[0][a[1]].roomtypeunkid&&resgrid[0][a[1]].roomtypeunkid!=jQuery("select#roomtypeunkid").val()?p++:""!=opt.roomtypeunkid&&void 0!==resgrid[0][a[1]].roomtypeunkid&&resgrid[0][a[1]].roomtypeunkid!=opt.roomtypeunkid?p++:""!=opt.specialunkid&&null!=opt.specialunkid&&(void 0===resgrid[0][a[1]].specialunkid||void 0!==resgrid[0][a[1]].specialunkid&&resgrid[0][a[1]].specialunkid!=opt.specialunkid)?p++:""!=opt.opt_roomrateunkid&&null!=opt.opt_roomrateunkid&&(void 0===resgrid[0][a[1]].roomrateunkid||void 0!==resgrid[0][a[1]].roomrateunkid&&resgrid[0][a[1]].roomrateunkid!=opt.opt_roomrateunkid)&&p++,""!=opt.sflroomrateunkid&&void 0!==opt.sflroomrateunkid&&null!=opt.sflroomrateunkid||""!=opt.sflspecialunkid&&void 0!==opt.sflspecialunkid&&null!=opt.sflspecialunkid)for(var h=opt.sflroomrateunkid.split(","),m=opt.sflspecialunkid.split(","),v=h.length,g=0,y=0,f=new Array,b=new Array,k=0;k<v;k++){if(0==k)var w=!1,x=!1;if(void 0!==resgrid[0][a[1]].roomrateunkid&&h[k]!=resgrid[0][a[1]].roomrateunkid&&"-1"==m[k]&&1!=w)"-1"==jQuery.inArray(resgrid[0][a[1]].roomrateunkid,f)&&(g++,f.push(resgrid[0][a[1]].roomrateunkid));else if(void 0!==resgrid[0][a[1]].specialunkid&&h[k]==resgrid[0][a[1]].roomrateunkid&&"-1"!=m[k]&&1!=x)g++,f.push(resgrid[0][a[1]].roomrateunkid);else if(void 0===resgrid[0][a[1]].specialunkid&&h[k]==resgrid[0][a[1]].roomrateunkid&&"-1"!=m[k]&&1!=x)g++,f.push(resgrid[0][a[1]].roomrateunkid);else if(h[k]==resgrid[0][a[1]].roomrateunkid&&1<v&&(w=!0),void 0!==resgrid[0][a[1]].roomrateunkid&&h[k]==resgrid[0][a[1]].roomrateunkid&&"-1"!=jQuery.inArray(resgrid[0][a[1]].roomrateunkid,f)&&-1==m[k])f=jQuery.grep(f,function(e){return e!=resgrid[0][a[1]].roomrateunkid});if(void 0!==resgrid[0][a[1]].specialunkid&&m[k]!=resgrid[0][a[1]].specialunkid&&h[k]!=resgrid[0][a[1]].roomrateunkid&&1!=x)"-1"==jQuery.inArray(resgrid[0][a[1]].specialunkid,b)&&(y++,b.push(resgrid[0][a[1]].specialunkid));else if(void 0!==resgrid[0][a[1]].specialunkid&&m[k]!=resgrid[0][a[1]].specialunkid&&h[k]==resgrid[0][a[1]].roomrateunkid&&1!=x)"-1"==jQuery.inArray(resgrid[0][a[1]].specialunkid,b)&&(y++,b.push(resgrid[0][a[1]].specialunkid));else if(m[k]==resgrid[0][a[1]].specialunkid&&(x=!0),"-1"==jQuery.inArray(resgrid[0][a[1]].roomrateunkid,f)&&h[k]!=resgrid[0][a[1]].roomrateunkid&&"-1"!=m[k]&&1!=w&&(g++,f.push(resgrid[0][a[1]].roomrateunkid)),void 0!==resgrid[0][a[1]].specialunkid&&m[k]==resgrid[0][a[1]].specialunkid&&"-1"!=jQuery.inArray(resgrid[0][a[1]].specialunkid,b))b=jQuery.grep(b,function(e){return e!=resgrid[0][a[1]].specialunkid})}allbtnarr.push(a[1]),void 0!==resgrid[0][a[1]].roomrateunkid&&0<g&&0!=f.length&&"-1"!=jQuery.inArray(resgrid[0][a[1]].roomrateunkid,f)&&void 0===resgrid[0][a[1]].specialunkid&&savebtnarr.push(a[1]),void 0!==resgrid[0][a[1]].specialunkid&&0<y&&0!=b.length&&"-1"!=jQuery.inArray(resgrid[0][a[1]].specialunkid,b)&&savebtnarr.push(a[1]);var j="",C="",Q="";if(""!=resgrid[0][0].MultiplyCurrCode1&&(opt.ResUIshowfilterPrice=!1,jQuery("#filter_price").hide()),""!=$.trim($("input#price_slider_val").val())&&1==opt.ResUIshowfilterPrice&&""!=opt.ResUIMinimumPrice&&""!=opt.ResUIMaximumPrice){var I=$("input#price_slider_val").val();console.log(S);var S=I.split("|");if(""!=S[0]&&""!=S[1]&&opt.ResUIMaximumPrice!=S[1])if(C=S[0],Q=S[1],1==jQuery("#pnl_tot_blk").hasClass("active")){var R=jQuery(this).find("#rmamt").text(),D="res_HotelCode";if(null!=sessionStorage.getItem(D)){var A=sessionStorage.getItem("res_HotelCode");R=null!=(F=sessionStorage.getItem("res_FrenchHotel_"+A))&&"-fr-French"==F?(R=R.replace(/ /g,"")).replace(/,/g,"."):R.replace(/,/g,"")}else R=R.replace(/,/g,"");if(1==opt.ShowNights)var L=parseInt($("select#eZ_Nights").val());else L=parseInt($("input#eZ_Nights").val());0<parseFloat(R)&&(j=parseFloat(R)/parseInt(L))}else if(1==jQuery("#pnl_avg_blk").hasClass("active")){var T=jQuery(this).find("#rmamt_avg_night").text();D="res_HotelCode";if(null!=sessionStorage.getItem(D)){var F;A=sessionStorage.getItem("res_HotelCode");T=null!=(F=sessionStorage.getItem("res_FrenchHotel_"+A))&&"-fr-French"==F?(T=T.replace(/ /g,"")).replace(/,/g,"."):T.replace(/,/g,"")}else T=T.replace(/,/g,"");j=parseFloat(T)}}0<p&&(filterapply_roomtype=1),0==u||0<n||1==filterapply_roomtype||0<r||0<t||0==l&&0!=guest_rating.length?0==opt.HideResetFilter&&jQuery("#appliedfilter_msg").show():jQuery("#appliedfilter_msg").hide(),1==display_view&&(jQuery(this).removeClass("hidereadmore"),void 0!==resgrid[0][a[1]].deals||0==u||0==n||0<p||0<r||0<t||0==l&&0!=guest_rating.length||void 0!==resgrid[0][a[1]].roomrateunkid&&0<g&&0!=f.length&&"-1"!=jQuery.inArray(resgrid[0][a[1]].roomrateunkid,f)&&void 0===resgrid[0][a[1]].specialunkid||void 0!==resgrid[0][a[1]].specialunkid&&0<y&&0!=b.length&&"-1"!=jQuery.inArray(resgrid[0][a[1]].specialunkid,b)||""!=C&&""!=Q&&1==opt.ResUIshowfilterPrice&&""!=j&&(j<parseFloat(C)||j>=parseFloat(Q))||void 0!==resgrid[0][a[1]].hiderateplan&&"1"==resgrid[0][a[1]].hiderateplan?(jQuery(this).hide(),O++):parseInt(N)<parseInt(opt.ResUINoOfRatePlanPackage)&&1==M&&(jQuery(this).removeClass("read-more-content"),N++),1==M&&($(".read-more-content").addClass("hidereadmore"),"display: none;"==jQuery(this).attr("style")&&0),methods._ShowMoreLessMobileViewOnload(e,opt)),2==display_view&&(jQuery(this).removeClass("hidereadmore"),void 0===resgrid[0][a[1]].deals||0==u||0==n||0<p||0<r||0<t||0==l&&0!=guest_rating.length||void 0!==resgrid[0][a[1]].roomrateunkid&&0<g&&0!=f.length&&"-1"!=jQuery.inArray(resgrid[0][a[1]].roomrateunkid,f)&&void 0===resgrid[0][a[1]].specialunkid||void 0!==resgrid[0][a[1]].specialunkid&&0<y&&0!=b.length&&"-1"!=jQuery.inArray(resgrid[0][a[1]].specialunkid,b)||""!=C&&""!=Q&&1==opt.ResUIshowfilterPrice&&""!=j&&(j<parseFloat(C)||j>=parseFloat(Q))||void 0!==resgrid[0][a[1]].hiderateplan&&"1"==resgrid[0][a[1]].hiderateplan?(jQuery(this).hide(),O++):parseInt(N)<parseInt(opt.ResUINoOfRatePlanPackage)&&1==M&&(jQuery(this).removeClass("read-more-content"),N++),1==M&&($(".read-more-content").addClass("hidereadmore"),"display: none;"==jQuery(this).attr("style")&&0),methods._ShowMoreLessMobileViewOnload(e,opt)),0==display_view&&(jQuery(this).removeClass("hidereadmore"),0==u||0==n||0<p||0<r||0<t||void 0!==resgrid[0][a[1]].roomrateunkid&&0<g&&0!=f.length&&"-1"!=jQuery.inArray(resgrid[0][a[1]].roomrateunkid,f)&&void 0===resgrid[0][a[1]].specialunkid||void 0!==resgrid[0][a[1]].specialunkid&&0<y&&0!=b.length&&"-1"!=jQuery.inArray(resgrid[0][a[1]].specialunkid,b)||0==l&&0!=guest_rating.length||""!=C&&""!=Q&&1==opt.ResUIshowfilterPrice&&""!=j&&(j<parseFloat(C)||j>=parseFloat(Q))||void 0!==resgrid[0][a[1]].hiderateplan&&"1"==resgrid[0][a[1]].hiderateplan?(jQuery(this).hide(),O++):N<parseInt(opt.ResUINoOfRatePlanPackage)&&1==M&&(jQuery(this).removeClass("read-more-content"),N++),1==M&&($(".read-more-content").addClass("hidereadmore"),"display: none;"==jQuery(this).attr("style")&&0),methods._ShowMoreLessMobileViewOnload(e,opt))}),1==M)&&(parseInt(row_cnt)-parseInt(O)>parseInt(opt.ResUINoOfRatePlanPackage)?($(this).find("a.readmore_rtplan").html(js_stripslashes(langjs[0].L_ReadMore)),$(this).find("a.moreless_a").html('<i class="fa fa-angle-down"></i>'),$(this).find("a.readmore_rtplan").addClass("read-more-toggle"),$(this).find("a.readmore_rtplan").addClass("tmp_read-more-toggle"),$(this).find(".moreless_div").show()):($(this).find("a.readmore_rtplan").text(""),$(this).find("a.moreless_a").html(""),$(this).find("a.readmore_rtplan").removeClass("read-more-toggle"),$(this).find("a.readmore_rtplan").removeClass("tmp_read-more-toggle"),$(this).find(".moreless_div").hide()));methods._ShowMoreLessMobileView(e,opt),O==row_cnt?(jQuery(this).hide(),main_div_hide++,jQuery(this).removeClass("rml-first")):(jQuery(this).show(),0==main_otarow_cnt&&(jQuery(this).removeClass("rml-first").addClass("rml-first"),main_otarow_cnt++))});var windowWidth=$(window).width();$(window).on("resize",function(){$(window).width()!==windowWidth&&(resize_done=0,768<=$(window).width()&&0==resize_done&&(resize_done=1))}),$(".read-more-toggle,.moreless_a").on("click",function(e){e.preventDefault(),1==$(this).parent().parent().find(".read-more-content").hasClass("hidereadmore")?$(this).parent().parent().find(".read-more-content").removeClass("hidereadmore"):$(this).parent().parent().find(".read-more-content").addClass("hidereadmore");var a=$(this).parent().parent().find(".readmore_rtplan").text();$(this).parent().parent().find(".readmore_rtplan").text(a==js_stripslashes(langjs[0].L_ReadMore)?js_stripslashes(langjs[0].L_ReadLess):js_stripslashes(langjs[0].L_ReadMore)),a==js_stripslashes(langjs[0].L_ReadMore)?$(this).parent().parent().find("a.moreless_a").html('<i class="fa fa-angle-up"></i>'):$(this).parent().parent().find("a.moreless_a").html('<i class="fa fa-angle-down"></i>'),$(this).parent().parent().find("a.readmore_rtplan").addClass("read-more-toggle")}),main_div_hide==total_div_len&&(void 0!==resgrid[0]&&null!=resgrid[0]&&0<resgrid[0].length?(jQuery("#no_filterrecord").addClass("showthis"),jQuery("#no_filterrecord").show(),jQuery("#no_filterrecord").prev().hide(),jQuery("#no_record").hide(),jQuery("#norecord_main_blk").hide(),jQuery("#availcalmain").hide(),jQuery("#enquirenotavail").hide()):(jQuery("#no_record").show(),jQuery("#norecord_main_blk").show(),jQuery("#availcalmain").show(),jQuery("#enquirenotavail").show(),methods._ShowClosestAvailability(opt),""!=opt.TripteasehotelKey&&""!=opt.TripteasehotelAPIkey&&Paperboy.PriceCheck&&Paperboy.PriceCheck.destroy()),jQuery("#filter-wrapper_div").hide(),jQuery("#booking_summery_blk").hide(),jQuery("#summary_head").hide(),jQuery("#room_container").hide())}if(methods._showfullyavailablerateplan(opt),0==opt.HideResetFilter&&(""!=opt.roomtypeunkid&&(opt.roomtypeunkid=""),""!=opt.specialunkid&&(opt.specialunkid="")),""!=opt.sflroomrateunkid&&void 0!==opt.sflroomrateunkid&&null!=opt.sflroomrateunkid&&(opt.sflroomrateunkid="",opt.SelectedPromo=""),""!=opt.sflspecialunkid&&void 0!==opt.sflspecialunkid&&null!=opt.sflspecialunkid&&(opt.sflspecialunkid="",opt.SelectedPromo=""),$(window).width()<991){winHeight=$(window).height();var h=winHeight-(parseInt(jQuery("#filter_header").height())+parseInt(jQuery("#filter_apply").height())),content_height=jQuery("#main_filter_div").height();jQuery("#main_filter_div").addClass("main_filter_div"),jQuery(".main_filter_div").css("height",h+"px")}if($(window).width()<1035){var bb_block_height=jQuery("#booking_summery_blk").height()+20;"none"==$("#footer_main").css("display")&&jQuery("#room_container").css("margin-bottom",bb_block_height+"px")}$(window).on("resize",function(){if($(window).width()!==windowWidth)if($(window).width()<991){winHeight=$(window).height();var e=parseInt(winHeight)-(parseInt(jQuery("#filter_header").height())+parseInt(jQuery("#filter_apply").height()));jQuery("#main_filter_div").addClass("main_filter_div"),jQuery(".main_filter_div").css("height",e+"px")}else jQuery("#main_filter_div").css("height",""),jQuery("#main_filter_div").removeClass("main_filter_div")})}else jQuery("#no_record").show(),jQuery("#norecord_main_blk").show(),jQuery("#availcalmain").show(),jQuery("#enquirenotavail").show(),jQuery("#filter-wrapper_div").hide(),jQuery("#booking_summery_blk").hide(),jQuery("#summary_head").hide(),jQuery("#room_container").hide(),methods._ShowClosestAvailability(opt);hideCheckavalabilityLoadingBar();try{""==opt.WebDefaultCurrency&&methods._pricewidgetreload(opt)}catch(e){console.log("Price Widget Exception "+e)}jQuery(".add_field_button").on("click",function(e){if(0==methods._check_availability_clicked(opt))return!1;var a=jQuery(this).closest(".otatablview").attr("id").split("_"),t=jQuery(this).attr("id").split("_"),r=parseInt(resgrid[0][t[1]].MulRoomInventory),l=jQuery("#room_init_cnt_"+a[1]).text(),i=jQuery("#each_room_cnt_"+t[1]).text();if(l<r){l++,jQuery("#room_init_cnt_"+a[1]).text(l);var o=jQuery("#room_clone_cnt_"+t[1]).text();if(l<=r){if(""!=$("#roombooklimit").val()&&parseInt($("#roombooklimitcal").val())+1>parseInt($("#roombooklimit").val())){var s=js_stripslashes(langjs[0].L_roombooklimit).replace("{nobook_rms_limit}",$("#roombooklimit").val());return swal({title:"",text:s,type:"error",showCancelButton:!1,animation:!1}),!1}$Obj_Room=$("#room_row_"+t[1]+"_0").clone(!0).attr("id","room_row_"+t[1]+"_"+o).insertAfter("[id^=room_row_"+t[1]+"_]:last"),$Obj_Room.find(".adult").attr("name","rm_adult_"+t[1]+"_"+o),$Obj_Room.find(".adult").attr("id","rm_adult_"+t[1]+"_"+o);var d=$Obj_Room.find(".base_adult").text();1==opt.acr&&(d=$("select[id$='eZ_adult']").val()),$Obj_Room.find(".adult").val(d),$Obj_Room.find(".child").attr("name","rm_child_"+t[1]+"_"+o),$Obj_Room.find(".child").attr("id","rm_child_"+t[1]+"_"+o);var n=$Obj_Room.find(".base_child").text();0==opt.RunOnMaximumOccupanySettings&&("-1"==opt.showchild_bb&&1==opt.showchild||1==opt.showchild_bb)&&(n=$("select[id$='eZ_child']").val()),$Obj_Room.find(".child").val(n),$Obj_Room.find(".childagediv").attr("id","childage_div_"+t[1]+"_"+o),$Obj_Room.find(".remove_field").attr("id","delete_room_"+t[1]+"_"+o),$Obj_Room.find(".remove_field").css({display:"block",float:"right"}),$Obj_Room.find(".lblrm").attr("id","rm_cnt_lbl_"+t[1]+"_"+o),$Obj_Room.find(".row_index").attr("id","row_index_"+t[1]+"_"+o),$Obj_Room.find(".row_index").text(o),methods._childagecombo(n,t[1],o)}methods._calculateLongtayPrice(opt,t[1],o,"add_room"),o++,jQuery("#room_clone_cnt_"+t[1]).text(o),i++,jQuery("#rooms_"+t[1]).val(i),jQuery("#each_room_cnt_"+t[1]).text(i),jQuery("#rm_cnt_lbl_"+t[1]+"_"+(o-1)).text(o),methods._setRoomLeftLbl(a[1],r),methods._showBookingSummary($(this),opt)}}),jQuery(".remove_field_button").on("click",function(e){var ava_clicked=methods._check_availability_clicked(opt);if(0==ava_clicked)return!1;e.preventDefault();var set_id=jQuery(this).attr("id"),setidarr=set_id.split("_"),otatablview_id=jQuery(this).closest(".otatablview").attr("id"),set_init_param=otatablview_id.split("_"),room_init_cnt=jQuery("#room_init_cnt_"+set_init_param[1]).text(),room_clone_cnt=jQuery("#room_clone_cnt_"+setidarr[1]).text(),each_room_cnt=jQuery("#each_room_cnt_"+setidarr[1]).text(),max_rooms_allowed=parseInt(resgrid[0][setidarr[1]].MulRoomInventory);if(rateplan2=resgrid[0][setidarr[1]],"undefined"!=typeof rateplan2){var baseadult=eval("rateplan2.base_adult");1==opt.acr&&(baseadult=$("select[id$='eZ_adult']").val());var basechild=eval("rateplan2.base_child");0==opt.RunOnMaximumOccupanySettings&&("-1"==opt.showchild_bb&&1==opt.showchild||1==opt.showchild_bb)&&(basechild=$("select[id$='eZ_child']").val()),1==opt.RunOnMaximumOccupanySettings&&1==opt.showchild&&(basechild=$("#rm_child_"+setidarr[1]+"_"+(room_clone_cnt-1)).val()),jQuery("#rm_adult_"+setidarr[1]+"_"+(room_clone_cnt-1)).val(baseadult),jQuery("#rm_child_"+setidarr[1]+"_"+(room_clone_cnt-1)).val(basechild),methods._childagecombo(basechild,setidarr[1],room_clone_cnt-1)}1==jQuery("[id^=room_row_"+setidarr[1]+"_]").length?($(this).parents(".card-list").find(".ad-rm").show().next(".vres_num").hide(),jQuery("[id^=room_row_"+setidarr[1]+"_0]").hide()):(jQuery("[id^=room_row_"+setidarr[1]+"_]:last").remove(),each_room_cnt--,jQuery("#rooms_"+setidarr[1]).val(each_room_cnt),jQuery("#each_room_cnt_"+setidarr[1]).text(each_room_cnt)),methods._calculateLongtayPrice(opt,setidarr[1],room_clone_cnt,"rm_room"),room_init_cnt--,room_clone_cnt--,jQuery("#rm_cnt_lbl_"+setidarr[1]+"_"+room_clone_cnt).text(room_clone_cnt),jQuery("#room_init_cnt_"+set_init_param[1]).text(room_init_cnt),jQuery("#room_clone_cnt_"+setidarr[1]).text(room_clone_cnt),methods._setRoomLeftLbl(set_init_param[1],max_rooms_allowed),methods._showBookingSummary($(this),opt)}),$(".ad-rm").on("click",function(){if(1==$(this).hasClass("adrm-wrap2")||1==$(this).hasClass("adrm-wrap-close"))return!1;methods._showBookingSummary($(this),opt)}),$(".adult").on("change",function(){1==jQuery(this).is(":visible")&&(rowid=jQuery(this).attr("id").split("_"),methods._checkMaximumOccupancy(opt,rowid[2],rowid[3]),methods._calculateLongtayPrice(opt,rowid[2],rowid[3],"adult_click"),methods._showBookingSummary($(this).parents(".card-list"),opt))}),$(".child").on("change",function(){1==jQuery(this).is(":visible")&&(rowid=jQuery(this).attr("id").split("_"),methods._checkMaximumOccupancy(opt,rowid[2],rowid[3]),methods._childagecombo(jQuery(this).val(),rowid[2],rowid[3]),methods._calculateLongtayPrice(opt,rowid[2],rowid[3],"child_click"),methods._showBookingSummary($(this).parents(".card-list"),opt))}),$(document.body).on("change",".agecls",function(){1==jQuery(this).is(":visible")&&(rowid=jQuery(this).attr("id").split("_"),methods._calculateLongtayPrice(opt,rowid[1],rowid[2],"child_click"),methods._showBookingSummary($(this).parents(".card-list"),opt),jQuery(this).removeClass("error"),jQuery(this).val())}),0==_quick_load&&(methods._ShowQuickNotes(opt),methods._InsertCheckAvail(opt),_quick_load=1),methods._setExternalIframeHeight(opt),setTimeout(function(){if(0!==savebtnarr.length){var t=savebtnarr.filter(function(e,a,t){return a==t.indexOf(e)});jQuery.each(allbtnarr,function(e,a){"-1"==jQuery.inArray(a,t)&&jQuery("[id=addroombut_"+a+"]").is(":visible")&&jQuery("[id=addroombut_"+a+"]").trigger({type:"click"})}),savebtnarr=[],allbtnarr=[]}},1e3)},success:function(e){console.log("loadgrid success"),jQuery("div#eZ_BookingRooms").html(e),void 0!==resgrid[0]&&null!=resgrid[0]&&methods._calculateLongtayPrice(opt,"","",""),0==_first_load&&(methods._ShowOtherDetails(opt),methods._CountryCurrency(opt),_first_load=1)}})}catch(e){hideLoadingBar(),hideCheckavalabilityLoadingBar(),console.log("Error - _loadGrid - "+e.message)}},_ShowMoreLessMobileViewOnload:function(e,a){try{$(window).width()<=768&&(show_on_limit=-1,$(e).removeClass("read-more-content"),$(e).removeClass("hidereadmore"),jQuery(".readmore_rtplan").hide(),jQuery(".moreless_a").hide(),jQuery(".moreless_div").hide());var t=$(window).width();$(window).on("resize",function(){$(window).width()!==t&&($(window).width()<=768&&(show_on_limit=-1,$(e).removeClass("read-more-content"),$(e).removeClass("hidereadmore"),jQuery(".readmore_rtplan").hide(),jQuery(".moreless_a").hide(),jQuery(".moreless_div").hide()),768<=$(window).width()&&1==a.ResUILimitRatePlanPackage&&1<=a.ResUINoOfRatePlanPackage&&((show_on_limit=1)==$(e).hasClass("tmp_read-more-content")?($(e).addClass("read-more-content"),jQuery(".read-more-content").addClass("hidereadmore"),$(e).find(".moreless_div").show(),$(e).find(".moreless_a").show(),$(e).find(".readmore_rtplan").show()):($(e).find(".moreless_div").hide(),$(e).find("a.moreless_a").hide(),$(e).find("a.readmore_rtplan").hide())))})}catch(e){hideLoadingBar(),hideCheckavalabilityLoadingBar(),console.log("Error - _ShowMoreLessMobileViewOnload - "+e.message)}},_readmoretoggle_event:function(t){try{$(".read-more-toggle,.moreless_a").on("click",function(e){e.preventDefault(),$(this).parent().parent().find(".read-more-content").toggleClass("hidereadmore");var a=$(this).parent().parent().find(".readmore_rtplan").text();$(this).parent().parent().find(".readmore_rtplan").text(a==js_stripslashes(langjs[0].L_ReadMore)?js_stripslashes(langjs[0].L_ReadLess):js_stripslashes(langjs[0].L_ReadMore)),a==js_stripslashes(langjs[0].L_ReadMore)?$(this).parent().parent().find("a.moreless_a").html('<i class="fa fa-angle-up"></i>'):$(this).parent().parent().find("a.moreless_a").html('<i class="fa fa-angle-down"></i>'),$(this).parent().parent().find("a.readmore_rtplan").addClass("read-more-toggle"),methods._setExternalIframeHeight(t)})}catch(e){hideLoadingBar(),hideCheckavalabilityLoadingBar(),console.log("Error - _readmoretoggle_event - "+e.message)}},_ShowMoreLessMobileView:function(a,t){try{$(window).width()<=768&&(show_on_limit=-1,$(a).find("a.readmore_rtplan").text(""),$(a).find("a.readmore_rtplan").removeClass("read-more-toggle"),$(a).find("a.moreless_a").html(""),$(a).find(".moreless_div").hide());var r=$(window).width();$(window).on("resize",function(){if($(window).width()!==r&&($(window).width()<=768&&(show_on_limit=-1,$(a).find("a.readmore_rtplan").text(""),$(a).find("a.moreless_a").html(""),$(a).find("a.readmore_rtplan").removeClass("read-more-toggle"),$(a).find(".moreless_div").hide()),768<=$(window).width()&&1==t.ResUILimitRatePlanPackage&&1<=t.ResUINoOfRatePlanPackage))if((show_on_limit=1)==$(a).find("a.readmore_rtplan").hasClass("tmp_read-more-toggle")){var e=js_stripslashes(langjs[0].L_ReadMore);e==js_stripslashes(langjs[0].L_ReadMore)?$(a).find("a.moreless_a").html('<i class="fa fa-angle-down"></i>'):$(a).find("a.moreless_a").html('<i class="fa fa-angle-up"></i>'),$(a).find(".readmore_rtplan").text(e),$(a).find("a.readmore_rtplan").addClass("read-more-toggle"),$(a).find(".moreless_div").show()}else $(a).find(".moreless_div").hide(),$(a).find(".moreless_div").css("style","display:none;"),$(a).find("a.moreless_a").hide(),$(a).find("a.readmore_rtplan").hide()})}catch(e){hideLoadingBar(),hideCheckavalabilityLoadingBar(),console.log("Error - _ShowMoreLessMobileView - "+e.message)}},_ShowClosestAvailability:function(e){try{return!1}catch(e){hideLoadingBar(),hideCheckavalabilityLoadingBar(),console.log("Error - _ShowClosestAvailability - "+e.message)}},_loadLoadingBar:function(){$("#loadingbar").length<=0&&$('<div class="transbg" style="display:none;"></div><div class="loadingbar" id="loadingbar" style="display:none;"><div class="loadspan"><div class="loader size-1"></div></div></div>').appendTo("body")},_ShowOtherDetails:function(r){try{var e="HotelId="+r.HotelId+"&action=getnotifications&rb="+r.isShowRecentBooking+"&gcw="+r.isShowTotalGuestCountryWise+"&beview="+r.isShowBEViewers;$.get(r.serverurl+"service.php?"+e,function(e){var a=JSON.parse(e);if(1==r.isShowRecentBooking&&null!=a.TotRecentBooking&&""!=a.TotRecentBooking&&(console.log("FindRecentbooking"),FindRecentbooking(a.TotRecentBooking)),1==r.isShowTotalGuestCountryWise&&null!=a.GuestCount&&""!=a.GuestCount){console.log("isShowTotalGuestCountryWise");var t=a.GuestCount.split("-");TotalGuestCountryWise(t[0],t[1])}if(""!=a.review){console.log("review");t=a.review.split("|");TotalReviewAlerts(t[0],t[1],t[2])}1==r.isShowBEViewers&&null!=a.ViewersCnt&&""!=a.ViewersCnt&&(console.log("isShowBEViewers"),checkHowManyViewers(a.ViewersCnt))})}catch(e){console.log("Error in _ShowOtherDetails"+e)}},_curr_time:function(){var e=new Date;return e.getHours()+":"+e.getMinutes()+":"+e.getSeconds()},_childagecombo:function(obj,rowid2,rowid3){try{var res_AllowChildAgePolicy=eval("resgrid[0][0].AllowChildAgePolicy"),res_WebMaxChildAge=eval("resgrid[0][0].WebMaxChildAge"),res_WebChildAge=eval("resgrid[0][0].WebChildAge");if(0==res_AllowChildAgePolicy&&""!=res_WebMaxChildAge&&""!=res_WebChildAge){totcmt=parseInt(obj);var childlbl='<div class="vres-chk-box"><span>'+js_stripslashes(langjs[0].L_select_child2)+"</span>",L_age="<span>"+js_stripslashes(langjs[0].L_Age2)+"</span>",childage_html="";for(jQuery("#childage_div_"+rowid2+"_"+rowid3).html(""),child_cnt=0;child_cnt<totcmt;child_cnt++){result_html=childlbl.replace("[childno]",child_cnt+1);var child_html_data=fillChildStaticCombo(0,res_WebMaxChildAge,"age_"+rowid2+"_"+rowid3+"_"+child_cnt,"",L_age,rowid2,child_cnt,result_html,rowid3);childage_html+=child_html_data}$(childage_html).appendTo(jQuery("#childage_div_"+rowid2+"_"+rowid3))}}catch(e){hideLoadingBar(),hideCheckavalabilityLoadingBar(),console.log("Error - _childagecombo - "+e.message)}},_showBookingSummary:function(sel_called,opt){try{iscurrencyprefix=!1;var sel_called_t=sel_called.attr("id"),sel_called_y=sel_called_t.split("_"),mul_inx_layout=sel_called_y[1];"1"==resgrid[0][mul_inx_layout].curr_prefix&&(iscurrencyprefix=!0);var selectedrooms=$("input[id^=rooms_]").filter(function(){if(jQuery(this).is(":visible"))return 0<$(this).val()}),res;grand_total=0,total_rooms=0;var L_adult_lbl="",L_child_lbl="",L_rooms_lbl="",html_content="";if(jQuery("#summ_add").html(""),jQuery("#checkin_summ_blk").hide(),jQuery("#night_summ_blk").hide(),0==jQuery(".ad-rm").is("visible")&&jQuery("#summ_row_"+mul_inx_layout).remove(),0==selectedrooms.length&&$("#roombooklimitcal").val(0),0<selectedrooms.length){jQuery("#room_summary").show(),jQuery("#vres-total").show(),jQuery("#no_room_selected").hide();var tot_rooms=0;jQuery.each(selectedrooms,function(i){bookbtnid=$(this).attr("id");var _rowd=bookbtnid.split("_"),rowid="row_"+_rowd[1],rooms=$(this).val(),istax=0;"1"==eval("resgrid[0]["+_rowd[1]+"].ShowTaxInclusiveExclusiveSettings")&&void 0!==eval("resgrid[0]["+_rowd[1]+"].Tax_1")&&(istax=1),total_rooms+=parseInt(rooms),total_amount=1==istax?methods._applyRoundOff(parseFloat(resgrid[0][_rowd[1]].total_amount)):parseFloat(resgrid[0][_rowd[1]].total_amount),total_amount=parseFloat(parseFloat(total_amount).toFixed(_display_decimalplaces)),grand_total+=total_amount,total_amount=addCommas(parseFloat(total_amount).toFixed(_display_decimalplaces)),id2=jQuery("#row_"+_rowd[1]).find(".room_row").attr("id").split("room_row_"),display_name=eval("resgrid[0]["+_rowd[1]+"].display_name"),no_adults=0,jQuery("select[id^=rm_adult_"+_rowd[1]+"_]").each(function(){no_adults+=parseInt(jQuery(this).val())}),L_adult_lbl=1<no_adults?js_stripslashes(langjs[0].L_Adultlbl5):js_stripslashes(langjs[0].L_Adultlbl4),no_child=0,jQuery("select[id^=rm_child_"+_rowd[1]+"_]").each(function(){no_child+=parseInt(jQuery(this).val())}),L_child_lbl=1<no_child?js_stripslashes(langjs[0].L_Child3):js_stripslashes(langjs[0].L_Child2),no_rooms=jQuery("#rooms_"+_rowd[1]).val(),L_rooms_lbl=1<no_rooms?js_stripslashes(langjs[0].L_Roomcap1):js_stripslashes(langjs[0].L_Roomcap),html_content=$("#summary_row_clone").html(),result_html=html_content.replace("[rtplanname]",display_name),result_html=result_html.replace("[adult_tot_room]",no_adults+" "+L_adult_lbl),1==opt.showchild?result_html=result_html.replace("[child_tot_room]"," "+no_child+" "+L_child_lbl):result_html=result_html.replace("[child_tot_room]",""),result_html=result_html.replace("[room_tot]"," "+no_rooms+" "+L_rooms_lbl),tot_rooms+=parseInt(no_rooms),iscurrencyprefix?(result_html=result_html.replace("[precurreny]",resgrid[0][0].MultiplyCurrSymbl),result_html=result_html.replace("[postcurreny]","")):(result_html=result_html.replace("[precurreny]",""),result_html=result_html.replace("[postcurreny]",resgrid[0][0].MultiplyCurrSymbl)),result_html=result_html.replace("[room_amt]",total_amount),result_html=result_html.replace("[delete_row]","delete_row_"+_rowd[1]),result_html=result_html.replace("[edit_row]","edit_row_"+_rowd[1]),jQuery("#summ_add").html(jQuery("#summ_add").html()+"<li id=summ_row_"+_rowd[1]+' class="highlight_ths_row">'+result_html+"</li>"),jQuery("#checkin_summ_blk").show(),jQuery("#night_summ_blk").show(),iscurrencyprefix?dis_grand_total="<span class='currency'>"+resgrid[0][0].MultiplyCurrSymbl+"</span> "+addCommas(parseFloat(grand_total).toFixed(_display_decimalplaces)):dis_grand_total=addCommas(parseFloat(grand_total).toFixed(_display_decimalplaces))+" <span class='currency'>"+resgrid[0][0].MultiplyCurrSymbl+"</span>",jQuery("#grand_total").html(dis_grand_total)}),jQuery("#totroomcnt").val(tot_rooms),""!=$("#roombooklimit").val()&&$("#roombooklimitcal").val(total_rooms);var checkin=$("#eZ_chkin").datepicker("getDate"),checkout=$("#eZ_chkin").datepicker("getDate");1==opt.ShowNights?checkout.setDate(checkin.getDate()+parseInt($("select#eZ_Nights").val())):checkout.setDate(checkin.getDate()+parseInt($("input#eZ_Nights").val())),$("span#_checkin").html(resgrid[0][0].dis_checkindate),$("span#_checkout").html(resgrid[0][0].dis_checkoutdate),1==opt.ShowNights?($("span#_totalnights").html($("select#eZ_Nights").val()),1<$("select#eZ_Nights").val()?jQuery("span#_nightlbl").text(js_stripslashes(langjs[0].L_Nightlblm)):jQuery("span#_nightlbl").text(js_stripslashes(langjs[0].L_Nightlbls))):($("span#_totalnights").html($("input#eZ_Nights").val()),1<$("input#eZ_Nights").val()?jQuery("span#_nightlbl").text(js_stripslashes(langjs[0].L_Nightlblm)):jQuery("span#_nightlbl").text(js_stripslashes(langjs[0].L_Nightlbls))),$("[id^=delete_row_]").on("click",function(){if(0==methods._check_availability_clicked(opt))return!1;jQuery(this).parent().remove();var e=jQuery(this).attr("id").split("delete_row_");jQuery("[id^=room_row_"+e[1]+"_]").each(function(){jQuery("#rooms_"+e[1]).parent().find(".remove_field_button").click()})}),$(".highlight_ths_row").find("a").on("click",function(){jQuery(".highlight_ths_row").each(function(){jQuery(this).removeClass("edit-row")}),$(this).parents(".highlight_ths_row").addClass("edit-row")}),$("[id^=edit_row_]").on("click",function(){if(0==methods._check_availability_clicked(opt))return!1;var e=jQuery(this).attr("id").split("edit_row_");jQuery("[id^=row_"+e[1]+"]").focus(),jQuery("html, body").animate({scrollTop:jQuery("[id^=row_"+e[1]+"]").offset().top-34},800),window.location.hash="#row_"+e[1],jQuery("[id^=row_"+e[1]+"]").removeClass("h_row_set").addClass("h_row_set");var a=jQuery(this);setTimeout(function(){jQuery("[id^=row_"+e[1]+"]").removeClass("h_row_set"),$(a).parents().find(".edit-row").removeClass("edit-row")},2e3),methods._setIframeEditRecord(jQuery("[id^=row_"+e[1]+"]").offset().top)})}else jQuery("#totroomcnt").val(0),jQuery("#room_summary").hide(),jQuery("#vres-total").hide(),jQuery("#no_room_selected").show()}catch(e){hideLoadingBar(),hideCheckavalabilityLoadingBar(),console.log("Error - _showBookingSummary - "+e.message)}},_setRoomLeftLbl:function(e,a){try{sel_rooms=0,jQuery("[id^=otatablview_"+e+"]").find(".ava_rooms").each(function(){jQuery(this).is(":visible")&&(sel_rooms+=parseInt(jQuery(this).val()))}),ava_rooms=a-sel_rooms,jQuery("[id^=otatablview_"+e+"]").find(".ava_rooms").each(function(){if(0!=ava_rooms?jQuery(this).parent().parent().parent().find(".leftroomcls").text(ava_rooms):jQuery(this).parent().parent().parent().find(".leftroomcls").text(""),1==ava_rooms){var e=js_stripslashes(langjs[0].L_Only2);jQuery(this).parent().parent().parent().find(".leftroomcls_2").text(e),jQuery(this).parent().parent().parent().find(".leftroomcls_3").text("");var a=js_stripslashes(langjs[0].L_RoomLeft1);jQuery(this).parent().parent().parent().find(".leftroomcls2").addClass("redclr"),jQuery(this).parent().parent().parent().find(".leftroomcls").addClass("redclr"),jQuery(this).parent().parent().parent().find(".leftroomcls5").text("")}else if(0==ava_rooms){a=js_stripslashes(langjs[0].Noroomsleftlbl);jQuery(this).parent().parent().parent().find(".leftroomcls2").addClass("redclr"),jQuery(this).parent().parent().parent().find(".leftroomcls").addClass("redclr"),jQuery(this).parent().parent().parent().find(".leftroomcls4").text(""),jQuery(this).parent().parent().parent().find(".leftroomcls5").text(""),jQuery(this).parent().parent().parent().find(".leftroomcls_2").text(""),jQuery(this).parent().parent().parent().find(".leftroomcls_3").text("")}else{if(""!=parseInt(jQuery(this).parent().parent().parent().find(".MaxInvLimitedRoomsAvailablecls").text())&&ava_rooms<=parseInt(jQuery(this).parent().parent().parent().find(".MaxInvLimitedRoomsAvailablecls").text())){e=js_stripslashes(langjs[0].Hurrylbl);jQuery(this).parent().parent().parent().find(".leftroomcls_3").text(e),jQuery(this).parent().parent().parent().find(".leftroomcls5").text(""),jQuery(this).parent().parent().parent().find(".leftroomcls_2").text("")}else jQuery(this).parent().parent().parent().find(".leftroomcls_3").text("");a=js_stripslashes(langjs[0].L_RoomLeft2);jQuery(this).parent().parent().parent().find(".leftroomcls2").removeClass("redclr"),jQuery(this).parent().parent().parent().find(".leftroomcls").removeClass("redclr")}jQuery(this).parent().parent().parent().find(".leftroomcls2").text(a)})}catch(e){hideLoadingBar(),console.log("Error - _setRoomLeftLbl - "+e.message)}},_checkMaximumOccupancy:function(opt,row_id_val,itmcnt_val){try{if(void 0!==resgrid[0]&&null!=resgrid[0]){var maximum_occupancy_val=eval("resgrid[0]["+row_id_val+"].max_occupancy");if(""!=maximum_occupancy_val&&0!=maximum_occupancy_val){var maximum_occupancy=parseInt(maximum_occupancy_val),maximum_adult=eval("resgrid[0]["+row_id_val+"].max_adult"),maximum_child=eval("resgrid[0]["+row_id_val+"].max_child"),m_base_adult=eval("resgrid[0]["+row_id_val+"].base_adult"),m_base_child=eval("resgrid[0]["+row_id_val+"].base_child"),selected_adult_val=parseInt(jQuery("#rm_adult_"+row_id_val+"_"+itmcnt_val).val()),selected_child_val=parseInt(jQuery("#rm_child_"+row_id_val+"_"+itmcnt_val).val()),selected_val=parseInt(selected_adult_val)+parseInt(selected_child_val),PaxOnMaximumOccupancy=eval("resgrid[0][0].ResUIPaxOnMaximumOccupancy");if(parseInt(selected_val)>parseInt(maximum_occupancy)){var message=js_stripslashes(langjs[0].L_MaxOccNote).replace("{number}",maximum_occupancy),title_message=js_stripslashes(langjs[0].lblErrordate);if(swal({title:"",text:message,type:"warning",showCancelButton:!1,animation:!1}),hideLoadingBar(),"1"==PaxOnMaximumOccupancy)if(maximum_adult<maximum_occupancy?jQuery("#rm_adult_"+row_id_val+"_"+itmcnt_val).val(maximum_adult):jQuery("#rm_adult_"+row_id_val+"_"+itmcnt_val).val(maximum_occupancy),maximum_adult<=maximum_occupancy){var selected_child_1=maximum_occupancy-maximum_adult;maximum_child<selected_child_1?jQuery("#rm_child_"+row_id_val+"_"+itmcnt_val).val(maximum_child):jQuery("#rm_child_"+row_id_val+"_"+itmcnt_val).val(selected_child_1)}else jQuery("#rm_child_"+row_id_val+"_"+itmcnt_val).val(0);else jQuery("#rm_adult_"+row_id_val+"_"+itmcnt_val).val(m_base_adult),jQuery("#rm_child_"+row_id_val+"_"+itmcnt_val).val(m_base_child);var selected_adult_val=parseInt(jQuery("#rm_adult_"+row_id_val+"_"+itmcnt_val).val()),selected_child_val=parseInt(jQuery("#rm_child_"+row_id_val+"_"+itmcnt_val).val());methods._childagecombo(selected_child_val,row_id_val,itmcnt_val)}if(maximum_adult<selected_adult_val){if("1"==PaxOnMaximumOccupancy)if(maximum_adult<maximum_occupancy?jQuery("#rm_adult_"+row_id_val+"_"+itmcnt_val).val(maximum_adult):jQuery("#rm_adult_"+row_id_val+"_"+itmcnt_val).val(maximum_occupancy),maximum_adult<=maximum_occupancy){var selected_child_1=maximum_occupancy-maximum_adult;maximum_child<selected_child_1?jQuery("#rm_child_"+row_id_val+"_"+itmcnt_val).val(maximum_child):jQuery("#rm_child_"+row_id_val+"_"+itmcnt_val).val(selected_child_1)}else jQuery("#rm_child_"+row_id_val+"_"+itmcnt_val).val(0);else jQuery("#rm_adult_"+row_id_val+"_"+itmcnt_val).val(m_base_adult),jQuery("#rm_child_"+row_id_val+"_"+itmcnt_val).val(m_base_child);methods._childagecombo(jQuery("#rm_child_"+row_id_val+"_"+itmcnt_val).val(),row_id_val,itmcnt_val);var message=js_stripslashes(langjs[0].L_MaxAdultAllowed).replace("{number}",maximum_adult),title_message=js_stripslashes(langjs[0].lblErrordate);swal({title:"",text:message,type:"warning",showCancelButton:!1,animation:!1}),hideLoadingBar()}if(selected_child_val>parseInt(maximum_child)){if("1"==PaxOnMaximumOccupancy)if(maximum_adult<maximum_occupancy?jQuery("#rm_adult_"+row_id_val+"_"+itmcnt_val).val(maximum_adult):jQuery("#rm_adult_"+row_id_val+"_"+itmcnt_val).val(maximum_occupancy),maximum_adult<=maximum_occupancy){var selected_child_1=maximum_occupancy-maximum_adult;maximum_child<selected_child_1?jQuery("#rm_child_"+row_id_val+"_"+itmcnt_val).val(maximum_child):jQuery("#rm_child_"+row_id_val+"_"+itmcnt_val).val(selected_child_1)}else jQuery("#rm_child_"+row_id_val+"_"+itmcnt_val).val(0);else jQuery("#rm_child_"+row_id_val+"_"+itmcnt_val).val(m_base_child),jQuery("#rm_adult_"+row_id_val+"_"+itmcnt_val).val(m_base_adult);methods._childagecombo(jQuery("#rm_child_"+row_id_val+"_"+itmcnt_val).val(),row_id_val,itmcnt_val);var message=js_stripslashes(langjs[0].L_MaxChildAllowed).replace("{number}",maximum_child),title_message=js_stripslashes(langjs[0].lblErrordate);swal({title:"",text:message,type:"warning",showCancelButton:!1,animation:!1}),hideLoadingBar()}}}}catch(e){hideLoadingBar(),hideCheckavalabilityLoadingBar(),console.log("Error - _checkMaximumOccupancy - "+e.message)}},_calculateLongtayPrice:function(opt,row_id_val,itmcnt_val,call_flag){try{var ret_default_val,retstrike_default_val,rateplan;console.log("call _calculateLongtayPrice..."),methods._setExternalIframeHeight(opt),_is_special=!0,_is_promos=!0,_total=0,_final_total=0,_final_strike_total=0,_striketotal=0,_currency_symbol="",execute_block=!0,init_cnt=0,""!=row_id_val&&(execute_block=!1,init_cnt=1);var row_count_val="";if(""!=opt.TripteasehotelKey&&""!=opt.TripteasehotelAPIkey&&""==call_flag)var directarray=[],ratenamearray=[];var promosarray=[];if(jQuery.each(resgrid[0],function(ind){0==execute_block&&1==init_cnt&&(ind=row_id_val),row_count_val=ind;for(var dealsarray=[],i_promo=1;i_promo<=eval("resgrid[0]["+ind+"].DayCnt");i_promo++)promoval=eval("resgrid[0]["+ind+"].nightrule_"+i_promo),null!=promoval&&null!=promoval&&""!=promoval&&promosarray.push(promoval),dealval=eval("resgrid[0]["+ind+"].deals_"+i_promo),null!=dealval&&null!=dealval&&""!=dealval&&dealsarray.push(dealval);if(spfm=eval("resgrid[0]["+ind+"].deals"),SortPriceWise=eval("resgrid[0]["+ind+"].SortPriceWise"),1!=$("#row_"+ind).hasClass("otartrow")&&1!=SortPriceWise||(_is_special=!0,_is_promos=!0),"undefined"!=typeof spfm&&""!=spfm&&null!=spfm||(_is_special=!1),null==dealsarray[ind]&&""==dealsarray[ind]&&(_is_special=!1),null==promosarray[ind]&&""==promosarray[ind]&&(_is_promos=!1),0==dealsarray.length&&(_is_special=!1),0==promosarray.length&&(_is_promos=!1),rateplan=eval("resgrid[0]["+ind+"]"),parseInt(rateplan.NotAvailable)<=0){if(0==_is_special&&0==_is_promos?(ret_default_val="NONLINEAR"==$("#ratemode").val()?methods._defaultLongStayRateCalculation_NL(opt,rateplan,row_id_val,itmcnt_val,ind,row_count_val,opt.showchild).split("|"):methods._defaultLongStayRateCalculation(rateplan,row_id_val,itmcnt_val,ind,row_count_val,opt.showchild).split("|"),_total=parseFloat(parseFloat(ret_default_val[0]).toFixed(_display_decimalplaces)),retstrike_default_val="NONLINEAR"==$("#ratemode").val()?methods._defaultLongStayRateCalculation_NL(opt,rateplan,row_id_val,itmcnt_val,ind,row_count_val,opt.showchild).split("|"):methods._defaultLongStayRateCalculation(rateplan,row_id_val,itmcnt_val,ind,row_count_val,opt.showchild).split("|")):(ret_default_val="NONLINEAR"==$("#ratemode").val()?methods._specialLongStayRateCalculation_NL(opt,rateplan,dealsarray,promosarray,row_id_val,itmcnt_val,row_count_val,opt.showchild).split("|"):methods._specialLongStayRateCalculation(rateplan,dealsarray,promosarray,row_id_val,itmcnt_val,row_count_val,opt.showchild).split("|"),_total=parseFloat(parseFloat(ret_default_val[0]).toFixed(_display_decimalplaces)),retstrike_default_val="NONLINEAR"==$("#ratemode").val()?methods._specialStrikeLongStayRateCalculation_NL(opt,rateplan,dealsarray,promosarray,row_id_val,itmcnt_val,row_count_val,opt.showchild).split("|"):methods._specialStrikeLongStayRateCalculation(rateplan,dealsarray,promosarray,row_id_val,itmcnt_val,row_count_val,opt.showchild).split("|")),_striketotal=retstrike_default_val[0],"add_room"!=call_flag&&"adult_click"!=call_flag&&"rm_room"!=call_flag&&"child_click"!=call_flag&&(_row_total.push({key:ind,row:0,Total:_total}),_row_strike_total.push({key:ind,row:0,Total:_striketotal}),_final_total=_total,_final_strike_total=_striketotal),0==execute_block&&1==init_cnt){for(var key2 in add_val=0,_row_total)_row_total[key2].key==ind&&_row_total[key2].row==parseInt(itmcnt_val)+1&&"rm_room"!=call_flag&&(_row_total[key2].Total=_total,add_val++);if(0==add_val)if("rm_room"==call_flag){for(var result_l,pos_l,len_rm,rm_i=0,len_rm=_row_total.length;rm_i<len_rm;rm_i++)if(_row_total[rm_i].key===ind&&_row_total[rm_i].row===parseInt(itmcnt_val)){result_l=_row_total[rm_i],pos_l=_row_total.indexOf(result_l);break}var removeItemIndex=pos_l;-1!=removeItemIndex&&_row_total.splice(removeItemIndex,1),1==jQuery("[id^=room_row_"+ind+"_]").length&&0==jQuery("[id^=room_row_"+ind+"_]").is(":visible")&&(_final_total=_total)}else _row_total.push({key:ind,row:jQuery("[id^=room_row_"+ind+"_]").length,Total:_total});for(var key2 in add_val=0,_row_strike_total)_row_strike_total[key2].key==ind&&_row_strike_total[key2].row==parseInt(itmcnt_val)+1&&"rm_room"!=call_flag&&(_row_strike_total[key2].Total=_striketotal,add_val++);if(0==add_val)if("rm_room"==call_flag){for(var result_l,pos_l,len_rm,rm_i=0,len_rm=_row_strike_total.length;rm_i<len_rm;rm_i++)if(_row_strike_total[rm_i].key===ind&&_row_strike_total[rm_i].row===parseInt(itmcnt_val)){result_l=_row_strike_total[rm_i],pos_l=_row_strike_total.indexOf(result_l);break}var removeItemIndex=pos_l;-1!=removeItemIndex&&_row_strike_total.splice(removeItemIndex,1),1==jQuery("[id^=room_row_"+ind+"_]").length&&0==jQuery("[id^=room_row_"+ind+"_]").is(":visible")&&(_final_strike_total=_striketotal)}else _row_strike_total.push({key:ind,row:jQuery("[id^=room_row_"+ind+"_]").length,Total:_striketotal})}for(var key in _row_total)_row_total[key].key==ind&&0!=_row_total[key].row&&(1==jQuery("#addroombut_"+ind).is(":visible")?_final_total=parseFloat(_row_total[key].Total):_final_total=parseFloat(_final_total)+parseFloat(_row_total[key].Total));for(var key in _row_strike_total)_row_strike_total[key].key==ind&&0!=_row_strike_total[key].row&&(1==jQuery("#addroombut_"+ind).is(":visible")?_final_strike_total=parseFloat(_row_strike_total[key].Total):_final_strike_total=parseFloat(_final_strike_total)+parseFloat(_row_strike_total[key].Total));if(nrrooms=jQuery("#rooms_"+ind).val(),L_rooms_lbl=js_stripslashes(langjs[0].L_Roomcap),0==jQuery("#addroombut_"+ind).is(":visible")?(1<jQuery("[id^=room_row_"+ind+"_]").length&&(L_rooms_lbl=js_stripslashes(langjs[0].L_Roomcap1)),jQuery("#room_tot_"+ind).text(parseInt(jQuery("[id^=room_row_"+ind+"_]").length)+" "+L_rooms_lbl),1==opt.showchild?jQuery("#avg_room_tot_"+ind).text(parseInt(jQuery("[id^=room_row_"+ind+"_]").length)+" "+L_rooms_lbl):jQuery("#avg_room_tot_"+ind).text(", "+parseInt(jQuery("[id^=room_row_"+ind+"_]").length)+" "+L_rooms_lbl)):(1<nrrooms&&(L_rooms_lbl=js_stripslashes(langjs[0].L_Roomcap1)),jQuery("#room_tot_"+ind).text(parseInt(nrrooms)+" "+L_rooms_lbl),1==opt.showchild?jQuery("#avg_room_tot_"+ind).text(parseInt(nrrooms)+" "+L_rooms_lbl):jQuery("#avg_room_tot_"+ind).text(", "+parseInt(nrrooms)+" "+L_rooms_lbl)),sel_adult=0,jQuery("[id^=room_row_"+ind+"_]").length&&1==jQuery("[id^=room_row_"+ind+"_]").is(":visible")&&jQuery("[id^=rm_adult_"+row_id_val+"_]").each(function(){0==jQuery("#addroombut_"+ind).is(":visible")&&(sel_adult+=parseInt(jQuery(this).val()))}),1==opt.ShowNights)var no_nights_1=$("select#eZ_Nights").val();else var no_nights_1=$("input#eZ_Nights").val();var min_mights=eval("rateplan.Min_MinNight");if(1==opt.RunOnMaximumOccupanySettings)if("1"==opt.ResUIPaxOnMaximumOccupancy){var maximum_occupancy_val=eval("rateplan.max_occupancy");sel_adult_selected=maximum_occupancy_val>eval("rateplan.max_adult")?eval("rateplan.max_adult"):maximum_occupancy_val}else var sel_adult_selected=eval("rateplan.base_adult");else var sel_adult_selected=eval("rateplan.base_adult");1==opt.acr&&(sel_adult_selected=$("select[id$='eZ_adult']").val()),1==jQuery("#addroombut_"+ind).is(":visible")?sel_adult=sel_adult_selected:""!=min_mights&&parseInt(min_mights)>parseInt(no_nights_1)&&(sel_adult=sel_adult_selected),0==sel_adult&&(sel_adult=sel_adult_selected),1<sel_adult?L_adult_lbl=js_stripslashes(langjs[0].L_Adultlbl5):L_adult_lbl=js_stripslashes(langjs[0].L_Adultlbl4),jQuery("#base_adult_occ_"+ind).text(sel_adult+" "+L_adult_lbl),jQuery("#avg_base_adult_occ_"+ind).text(sel_adult+" "+L_adult_lbl),sel_child=0,jQuery("[id^=room_row_"+ind+"_]").length&&1==jQuery("[id^=room_row_"+ind+"_]").is(":visible")&&(sel_child=0,jQuery("[id^=rm_child_"+row_id_val+"_]").each(function(){0==jQuery("#addroombut_"+ind).is(":visible")&&(sel_child+=parseInt(jQuery(this).val()))}));var sel_child_selected=eval("rateplan.base_child");0==opt.RunOnMaximumOccupanySettings&&("-1"==opt.showchild_bb&&1==opt.showchild||1==opt.showchild_bb)&&(sel_child_selected=$("select[id$='eZ_child']").val()),1==opt.RunOnMaximumOccupanySettings&&1==opt.showchild&&(sel_child_selected=$("#rm_child_"+ind+"_0").val());var cncnt=0;if(1==jQuery("#addroombut_"+ind).is(":visible")?(cncnt++,sel_child=sel_child_selected):0==jQuery("#addroombut_"+ind).is(":visible")&&"387"!=opt.HotelId?(cncnt++,sel_child=sel_child):""!=min_mights&&parseInt(min_mights)>parseInt(no_nights_1)&&(sel_child=sel_child_selected,cncnt++),0==cncnt&&(sel_child=sel_child_selected),1<sel_child?L_child_lbl=js_stripslashes(langjs[0].L_Child3):L_child_lbl=js_stripslashes(langjs[0].L_Child2),1==opt.showchild?(jQuery("#base_child_occ_"+ind).text(", "+sel_child+" "+L_child_lbl+", "),jQuery("#avg_base_child_occ_"+ind).text(", "+sel_child+" "+L_child_lbl+", ")):(jQuery("#base_child_occ_"+ind).text(", "),jQuery("#avg_base_child_occ_"+ind).text(", ")),resgrid[0][ind].total_amount=_final_total,_total=_final_total,_striketotal=_final_strike_total,"NONLINEAR"==$("#ratemode").val()){var daycount=resgrid[0][ind].DayCnt,_avg_total=_total/daycount,_avg_striketotal=_striketotal/daycount;_avg_total=addCommas(parseFloat(_avg_total).toFixed(_display_decimalplaces)),_avg_striketotal=addCommas(parseFloat(_avg_striketotal).toFixed(_display_decimalplaces))}_total=methods._applyRoundOff(_total),""!=opt.TripteasehotelKey&&""!=opt.TripteasehotelAPIkey&&""==call_flag&&(ratenamearray.push(rateplan.display_name),1==jQuery("#pnl_avg_blk").hasClass("active")?directarray.push(_total/parseInt(no_nights_1)):directarray.push(_total)),_striketotal=methods._applyRoundOff(_striketotal),_total=addCommas(parseFloat(_total).toFixed(_display_decimalplaces)),_striketotal=addCommas(parseFloat(_striketotal).toFixed(_display_decimalplaces)),_total==_striketotal&&($("#row_"+ind).find("#rmamt_strike").hide(),$("#row_"+ind).find(".up_strike_currency_display_pre_cls").hide(),$("#row_"+ind).find("#rmamt_strike").addClass("hidethis_row"),$("#row_"+ind).find(".strike_strong_cls").hide()),_currency_symbol=resgrid[0][0].MultiplyCurrSymbl,"1"==resgrid[0][ind].curr_prefix?($("#row_"+ind).find("#tot_currency_display_pre").html(_currency_symbol),$("#row_"+ind).find("#tot_currency_display_post").html(""),$("#row_"+ind).find("#up_strike_currency_display_pre").html(_currency_symbol),$("#row_"+ind).find("#up_strike_currency_display_post").html(""),$("#row_"+ind).find("#strike_currency_display_pre").html(_currency_symbol),$("#row_"+ind).find("#strike_currency_display_post").html(""),$("#row_"+ind).find("#upavg_strike_currency_display_pre").html(_currency_symbol),$("#row_"+ind).find("#upavg_strike_currency_display_post").html("")):($("#row_"+ind).find("#tot_currency_display_pre").html(""),$("#row_"+ind).find("#tot_currency_display_post").html(_currency_symbol),$("#row_"+ind).find("#up_strike_currency_display_pre").html(""),$("#row_"+ind).find("#up_strike_currency_display_post").html(_currency_symbol),$("#row_"+ind).find("#strike_currency_display_pre").html(""),$("#row_"+ind).find("#strike_currency_display_post").html(_currency_symbol),$("#row_"+ind).find("#upavg_strike_currency_display_pre").html(""),$("#row_"+ind).find("#upavg_strike_currency_display_post").html(_currency_symbol)),$("#row_"+ind).find("#rmamt_strike").html(_striketotal),$("#row_"+ind).find("#rmamt").html(_total),"NONLINEAR"==$("#ratemode").val()&&($("#row_"+ind).find("#rmamt_avg_night").html(_avg_total),$("#row_"+ind).find("#rmamt_strike_avg_night").html(_avg_striketotal))}else resgrid[0][ind].total_amount=0,$("#row_"+ind).find("#rmamt_strike").html(_striketotal),$("#row_"+ind).find("#rmamt").html("&nbsp;");if(promosarray=[],0==execute_block&&1==init_cnt)return!1}),""!=opt.TripteasehotelKey&&""!=opt.TripteasehotelAPIkey&&""==call_flag){console.log(directarray);var isdirect=0;if(0<directarray.length){console.log("-=-=-=-=Triptease Price Widget Called=-=-=-=-=-=");var directprice=Math.min.apply(null,directarray),indexdirectprice=directarray.indexOf(directprice),currencycode=$("#selected_curr").val();jQuery(".price-fighter-widget").attr("data-pf-currency",currencycode),jQuery(".price-fighter-widget").attr("data-pf-direct-price",directprice),jQuery(".price-fighter-widget").attr("data-pf-room-rate",ratenamearray[indexdirectprice]),isdirect=1}else isdirect=0;setTimeout(function(){console.log("=-=-=-time out-=-=-=-="),1==isdirect?(console.log("IN else if condition RESET"),Paperboy.PriceCheck.reset()):(console.log("IN else if condition DESTROY"),Paperboy.PriceCheck.destroy())},5e3)}}catch(e){hideLoadingBar(),hideCheckavalabilityLoadingBar(),console.log("Error - _calculateLongtayPrice - "+e.message)}},_defaultLongStayRateCalculation:function(rateplan,row_id_val,itmcnt_val,ind,row_count_val,maxchildshow){try{console.log("_defaultLongStayRateCalculation");var maxchildshow=maxchildshow||"",i=0,extra_child_rate=0,extra_adult_rate=0;_totalBookingAmount=0,void 0!==rateplan.dt_1&&rateplan.coa_1,""!=row_id_val&&(rateplan=resgrid[0][row_id_val]);for(var AllowChildAgePolicy=eval("rateplan.AllowChildAgePolicy"),AllowChildAgeOnBaseOccupancy=eval("rateplan.AllowChildAgeOnBaseOccupancy"),WebChildAge=eval("rateplan.WebChildAge"),WebMaxChildAge=eval("rateplan.WebMaxChildAge"),d=0,slabbefore_discount=jQuery("#slab_before_discount").val();void 0!==eval("rateplan.dt_"+eval(++i));){adultrate=parseFloat(eval("rateplan.o_day_extra_adult_"+i)),childrate=parseFloat(eval("rateplan.o_day_extra_child_"+i));var baseadult=eval("rateplan.base_adult"),basechild=eval("rateplan.base_child"),extra_adult=0;if(""==jQuery("#rm_adult_"+row_id_val+"_"+itmcnt_val).val()||null==jQuery("#rm_adult_"+row_id_val+"_"+itmcnt_val).val())if("1"==resgrid[0][0].RunOnMaximumOccupanySettings&&"false"==resgrid[0][0].acr){var maximum_occupancy_val=eval("rateplan.max_occupancy");"1"==resgrid[0][0].ResUIPaxOnMaximumOccupancy?maximum_occupancy_val>eval("rateplan.max_adult")?selected_adult=eval("rateplan.max_adult"):selected_adult=maximum_occupancy_val:selected_adult=eval("rateplan.base_adult")}else selected_adult=jQuery("#rm_adult_"+row_count_val+"_0").val();else selected_adult=jQuery("#rm_adult_"+row_id_val+"_"+itmcnt_val).val();parseInt(selected_adult)>parseInt(baseadult)&&(extra_adult=parseInt(selected_adult)-parseInt(baseadult));var extra_child=0,selected_child=0;if(""!=maxchildshow&&0!=maxchildshow)if(""==jQuery("#rm_child_"+row_id_val+"_"+itmcnt_val).val()||null==jQuery("#rm_child_"+row_id_val+"_"+itmcnt_val).val())if("1"==resgrid[0][0].RunOnMaximumOccupanySettings&&"false"==resgrid[0][0].acr)if("1"==resgrid[0][0].ResUIPaxOnMaximumOccupancy)if(eval("rateplan.max_occupancy")>=eval("rateplan.max_adult")){var selected_child=eval("rateplan.max_occupancy")-eval("rateplan.max_adult");if(selected_child>eval("rateplan.max_child"))var selected_child=eval("rateplan.max_child")}else var selected_child=0;else selected_child=eval("rateplan.base_child");else selected_child=jQuery("#rm_child_"+row_count_val+"_0").val();else selected_child=jQuery("#rm_child_"+row_id_val+"_"+itmcnt_val).val();if(0==AllowChildAgePolicy&&1==AllowChildAgeOnBaseOccupancy){if(selected_child>parseInt(basechild)){var childagelimit=WebChildAge;for(chkchild_cnt=1,childcnt=0;childcnt<selected_child;childcnt++){var childage=jQuery("#age_"+row_id_val+"_"+itmcnt_val+"_"+childcnt).val();parseInt(childage)>parseInt(childagelimit)&&""!=childage&&parseInt(chkchild_cnt)>parseInt(basechild)&&extra_child++,chkchild_cnt++}}}else if(0==AllowChildAgePolicy){var childagelimit=WebChildAge;for(childcnt=0;childcnt<selected_child;childcnt++){var childage=jQuery("#age_"+row_id_val+"_"+itmcnt_val+"_"+childcnt).val();parseInt(childage)>parseInt(childagelimit)&&""!=childage&&extra_child++}}else parseInt(selected_child)>parseInt(basechild)&&(extra_child=parseInt(selected_child)-parseInt(basechild));var apply_extra_adult=0,apply_extra_child=0;0<extra_adult&&(apply_extra_adult=1),0<extra_child&&(apply_extra_child=1),extra_child_rate=extra_child*childrate,extra_adult_rate=extra_adult*adultrate,"1"==eval("rateplan.ShowTaxInclusiveExclusiveSettings")&&"[0]"!=eval("rateplan.Tax_"+i)?(tax_formula=eval("rateplan.Tax_"+i),d=parseFloat(eval("rateplan.before_discount_day_base_"+i)),d=parseFloat(d)+parseFloat(extra_child_rate)+parseFloat(extra_adult_rate),1==slabbefore_discount?(d_amountGST=parseFloat(eval("rateplan.before_discount_day_base_"+i)),d_amountGST=parseFloat(d_amountGST)+parseFloat(extra_child_rate)+parseFloat(extra_adult_rate),total_tax=getTax(d_amountGST,tax_formula,_decimalplaces,0,rateplan.RackRate,rateplan.EARate,rateplan.ECRate,selected_adult,selected_child,"base",extra_adult,extra_child)):total_tax=getTax(d,tax_formula,_decimalplaces,0,rateplan.RackRate,rateplan.EARate,rateplan.ECRate,selected_adult,selected_child,"base",extra_adult,extra_child),"0"==_decimalplaces&&(d=d.toFixed(_decimalplaces)),d=methods._applyRoundOff(parseFloat(d)+parseFloat(total_tax))):d=parseFloat(eval("rateplan.o_day_base_"+i))+parseFloat(extra_child_rate)+parseFloat(extra_adult_rate),d=parseFloat(d.toFixed(_display_decimalplaces)),0<=d||(d=0),0<=parseFloat(_totalBookingAmount)&&("1"==eval("rateplan.ShowTaxInclusiveExclusiveSettings")&&eval("rateplan.Tax_"+i),_totalBookingAmount+=methods._applyRoundOff(d))}return _totalBookingAmount*parseFloat(resgrid[0][0].MultiplyFactor)+"|"+apply_extra_adult+"|"+apply_extra_child}catch(e){hideLoadingBar(),hideCheckavalabilityLoadingBar(),console.log("Error - _defaultLongStayRateCalculation - "+e.message)}},_defaultLongStayRateCalculation_NL:function(opt,rateplan,row_id_val,itmcnt_val,ind,row_count_val,maxchildshow){try{console.log("_defaultLongStayRateCalculation_NL");var maxchildshow=maxchildshow||"",i=0,extra_child_rate=0,extra_adult_rate=0;_totalBookingAmount=0,void 0!==rateplan.dt_1&&rateplan.coa_1,""!=row_id_val&&(rateplan=resgrid[0][row_id_val]);for(var AllowChildAgePolicy=eval("rateplan.AllowChildAgePolicy"),AllowChildAgeOnBaseOccupancy=eval("rateplan.AllowChildAgeOnBaseOccupancy"),WebChildAge=eval("rateplan.WebChildAge"),WebMaxChildAge=eval("rateplan.WebMaxChildAge"),d=0;void 0!==eval("rateplan.dt_"+eval(++i));){adultrate=parseFloat(eval("rateplan.o_day_extra_adult_"+i)),childrate=parseFloat(eval("rateplan.o_day_extra_child_"+i));var baseadult=eval("rateplan.base_adult"),basechild=eval("rateplan.base_child"),base_adult=0,base_child=0,rackratetax_extra_adult=0,rackratetax_extra_child=0,extra_adult=0;if(""==jQuery("#rm_adult_"+row_id_val+"_"+itmcnt_val).val()||null==jQuery("#rm_adult_"+row_id_val+"_"+itmcnt_val).val())if("1"==resgrid[0][0].RunOnMaximumOccupanySettings&&"false"==resgrid[0][0].acr)if("1"==resgrid[0][0].ResUIPaxOnMaximumOccupancy){var maximum_occupancy_val=eval("rateplan.max_occupancy");maximum_occupancy_val>eval("rateplan.max_adult")?selected_adult=eval("rateplan.max_adult"):selected_adult=maximum_occupancy_val}else selected_adult=eval("rateplan.base_adult");else selected_adult=jQuery("#rm_adult_"+row_count_val+"_0").val();else selected_adult=jQuery("#rm_adult_"+row_id_val+"_"+itmcnt_val).val();7<parseInt(selected_adult)?(extra_adult=parseInt(selected_adult)-7,base_adult=7):(extra_adult=0,base_adult=selected_adult);var extra_child=0,selected_child=0;if(""!=maxchildshow&&0!=maxchildshow)if(""==jQuery("#rm_child_"+row_id_val+"_"+itmcnt_val).val()||null==jQuery("#rm_child_"+row_id_val+"_"+itmcnt_val).val())if("1"==resgrid[0][0].RunOnMaximumOccupanySettings&&"false"==resgrid[0][0].acr)if("1"==resgrid[0][0].ResUIPaxOnMaximumOccupancy)if(eval("rateplan.max_occupancy")>=eval("rateplan.max_adult")){var selected_child=eval("rateplan.max_occupancy")-eval("rateplan.max_adult");if(selected_child>eval("rateplan.max_child"))var selected_child=eval("rateplan.max_child")}else var selected_child=0;else selected_child=eval("rateplan.base_child");else selected_child=jQuery("#rm_child_"+row_count_val+"_0").val();else selected_child=jQuery("#rm_child_"+row_id_val+"_"+itmcnt_val).val();if(0==AllowChildAgePolicy){var childagelimit=WebChildAge;for(childcnt=0;childcnt<selected_child;childcnt++){var childage=jQuery("#age_"+row_id_val+"_"+itmcnt_val+"_"+childcnt).val();parseInt(childage)>parseInt(childagelimit)&&""!=childage&&extra_child++}}else extra_child=parseInt(selected_child);var apply_extra_adult=0,apply_extra_child=0;0<extra_adult&&(apply_extra_adult=1),0<extra_child&&(apply_extra_child=1),7<parseInt(selected_adult)?(baserate=parseFloat(eval("rateplan.o_day_adult7_"+i)),extra_adult_rate=(selected_adult-7)*adultrate):baserate=parseFloat(eval("rateplan.o_day_adult"+parseInt(selected_adult)+"_"+i)),7<extra_child?(baserate+=parseFloat(eval("rateplan.o_day_child7_"+i)),extra_child_rate=(extra_child-7)*childrate,base_child=7):0<extra_child&&(baserate+=parseFloat(eval("rateplan.o_day_child"+parseInt(extra_child)+"_"+i)),base_child=extra_child);var roomno=parseInt(itmcnt_val)+1;if("1"==eval("rateplan.ShowTaxInclusiveExclusiveSettings"))if("[0]"!=eval("rateplan.Tax_"+i)){tax_formula=eval("rateplan.Tax_"+i),parseInt(selected_adult)>parseInt(baseadult)&&(rackratetax_extra_adult=parseInt(selected_adult)-parseInt(baseadult)),parseInt(extra_child)>parseInt(basechild)&&(rackratetax_extra_child=parseInt(extra_child)-parseInt(basechild)),d=parseFloat(baserate)+parseFloat(extra_child_rate)+parseFloat(extra_adult_rate),total_tax=getTax(d,tax_formula,_decimalplaces,0,rateplan.RackRate,rateplan.EARate,rateplan.ECRate,selected_adult,selected_child,"base",rackratetax_extra_adult,rackratetax_extra_child),total_base_tax=getTax(d,tax_formula,_decimalplaces,0,rateplan.RackRate,rateplan.EARate,rateplan.ECRate,base_adult,base_child,"base",rackratetax_extra_adult,rackratetax_extra_child),"0"==_decimalplaces&&(d=d.toFixed(_decimalplaces)),d=methods._applyRoundOff(parseFloat(d)+parseFloat(total_tax));var totalbase=parseFloat(baserate)+parseFloat(total_base_tax);""!=row_id_val&&eval("resgrid[0]["+row_id_val+"].o_day_base_"+i+"_"+roomno+"="+methods._applyRoundOff(totalbase))}else d=baserate+parseFloat(extra_child_rate)+parseFloat(extra_adult_rate),""!=row_id_val&&eval("resgrid[0]["+row_id_val+"].o_day_base_"+i+"_"+roomno+"="+methods._applyRoundOff(baserate));else d=baserate+parseFloat(extra_child_rate)+parseFloat(extra_adult_rate),""!=row_id_val&&eval("resgrid[0]["+row_id_val+"].o_day_base_"+i+"_"+roomno+"="+methods._applyRoundOff(baserate));d=parseFloat(d.toFixed(_display_decimalplaces)),0<=d||(d=0),0<=parseFloat(_totalBookingAmount)&&("1"==eval("rateplan.ShowTaxInclusiveExclusiveSettings")&&eval("rateplan.Tax_"+i),_totalBookingAmount+=methods._applyRoundOff(d))}if(""!=row_id_val){if(console.log("Nonlinear Ajax call......baserate"+baserate),1==opt.ShowNights)var n_night=parseInt($("select#eZ_Nights").val());else var n_night=parseInt($("input#eZ_Nights").val());$("#bookingmulbtn").text(langjs[0].L_Loading),$("#nl_loader").val(1);var param="action=getNonlinearRate&HotelId="+opt.HotelId+"&roomrateunkid="+rateplan.roomrateunkid+"&roomtypeunkid="+rateplan.roomtypeunkid+"&ratetypeunkid="+rateplan.ratetypeunkid+"&checkin_date="+$("#eZ_chkin").val()+"&nights="+n_night+"&adult="+selected_adult+"&child="+extra_child+"&row_id_val="+row_id_val+"&itmcnt_val="+itmcnt_val+"&CalDtFormat="+opt.CalDtFormat+"&DayCnt="+rateplan.DayCnt;$.ajax({type:"POST",url:opt.serverurl+"service.php",data:param,success:function(e){$("#bookingmulbtn").text(langjs[0].L_NLBOOK),$("#nl_loader").val(0)}})}return _totalBookingAmount*parseFloat(resgrid[0][0].MultiplyFactor)+"|"+apply_extra_adult+"|"+apply_extra_child}catch(e){hideLoadingBar(),hideCheckavalabilityLoadingBar(),console.log("Error - _defaultLongStayRateCalculation_NL - "+e.message)}},_specialLongStayRateCalculation:function(rateplan,spfm,promosarray,row_id_val,itmcnt_val,row_count_val,maxchildshow){try{console.log("_specialLongStayRateCalculation");var maxchildshow=maxchildshow||"",total=0,b_amount=0,ind=0,i=-1,extra_child_rate=0,extra_adult_rate=0;_totalBookingAmount=0,""!=row_id_val&&(rateplan=resgrid[0][row_id_val]);for(var AllowChildAgePolicy=eval("rateplan.AllowChildAgePolicy"),AllowChildAgeOnBaseOccupancy=eval("rateplan.AllowChildAgeOnBaseOccupancy"),WebChildAge=eval("rateplan.WebChildAge"),WebMaxChildAge=eval("rateplan.WebMaxChildAge"),ApplyPackageOnExtras=resgrid[0][0].ApplyPackageOnExtras,slabbefore_discount=jQuery("#slab_before_discount").val();void 0!==eval("rateplan.dt_"+eval(++ind));){if(i++,b_amount=parseFloat(eval("rateplan.before_discount_day_base_"+ind)),b_amountGST=parseFloat(eval("rateplan.before_discount_day_base_"+ind)),a_tax=!1,adultrate=parseFloat(eval("rateplan.o_day_extra_adult_"+ind)),childrate=parseFloat(eval("rateplan.o_day_extra_child_"+ind)),adultrate_GST=parseFloat(eval("rateplan.o_day_extra_adult_"+ind)),childrate_GST=parseFloat(eval("rateplan.o_day_extra_child_"+ind)),void 0!==spfm[i]&&""!=spfm[i]&&null!=spfm[i]&&(spfm1=spfm[i].split(":"),null!=spfm1[1]&&""!=spfm1[1]))switch(frml=spfm1[1].split("|"),nn=parseFloat(frml[1]),tn=parseFloat(frml[2]),r=frml[3],frml[0]){case"PAYSTAYDEAL":r=frml[3],j=i+1,((j%tn>nn||j%tn==0)&&"Y"==r||j<=tn&&j>nn&&"Y"!=r)&&"N"==eval("rateplan.isdisplayregularrate_"+ind)&&(b_amount=0);break;case"PACKAGEDEAL":(i<nn||"Y"==r)&&"N"==eval("rateplan.isdisplayregularrate_"+ind)&&(srate=tn,b_amount=parseFloat(eval("rateplan.before_discount_day_base_"+ind)),"AMT"==frml[4]?b_amount-=srate:"PER"==frml[4]?(b_amount=b_amount*(100-srate)/100,"1"==ApplyPackageOnExtras&&(adultrate=adultrate*(100-srate)/100,childrate=childrate*(100-srate)/100)):b_amount=srate);break;case"PERCENTDISCOUNT":case"AMOUNTDISCOUNT":srate=parseFloat(frml[1]),b_amount=parseFloat(eval("rateplan.before_discount_day_base_"+ind)),"AMOUNTDISCOUNT"==frml[0]&&"N"==eval("rateplan.isdisplayregularrate_"+ind)?b_amount-=srate:"PERCENTDISCOUNT"==frml[0]&&"N"==eval("rateplan.isdisplayregularrate_"+ind)&&(b_amount=b_amount*(100-srate)/100,"1"==ApplyPackageOnExtras&&(adultrate=adultrate*(100-srate)/100,childrate=childrate*(100-srate)/100))}if(null!=promosarray[i]&&""!=promosarray[i])switch(promos=promosarray[i].split(":"),drate=parseFloat(promos[3]),promos[1]){case"FN":0==i&&0<b_amount&&"N"==eval("rateplan.isdisplayregularrate_"+ind)&&("AMT"==promos[4]?b_amount-=drate:"PER"==promos[4]&&(b_amount=b_amount*(100-drate)/100));break;case"LN":i+1==eval("rateplan.DayCnt")&&0<b_amount&&"N"==eval("rateplan.isdisplayregularrate_"+ind)&&0<b_amount&&("AMT"==promos[4]?b_amount-=drate:"PER"==promos[4]&&(b_amount=b_amount*(100-drate)/100));break;case"AE":ae=parseInt(promos[2])+1,(i+1)%ae==0&&0<b_amount&&"N"==eval("rateplan.isdisplayregularrate_"+ind)&&("AMT"==promos[4]?b_amount-=drate:"PER"==promos[4]&&(b_amount=b_amount*(100-drate)/100));break;case"AN":"AMT"==promos[4]&&"N"==eval("rateplan.isdisplayregularrate_"+ind)?b_amount-=drate:"PER"==promos[4]&&"N"==eval("rateplan.isdisplayregularrate_"+ind)&&(b_amount=b_amount*(100-drate)/100)}if(0<=b_amount){var baseadult=eval("rateplan.base_adult"),basechild=eval("rateplan.base_child"),extra_adult=0,selected_adult=0;if(""==jQuery("#rm_adult_"+row_id_val+"_"+itmcnt_val).val()||null==jQuery("#rm_adult_"+row_id_val+"_"+itmcnt_val).val())if("1"==resgrid[0][0].RunOnMaximumOccupanySettings&&"false"==resgrid[0][0].acr)if("1"==resgrid[0][0].ResUIPaxOnMaximumOccupancy){var maximum_occupancy_val=eval("rateplan.max_occupancy");selected_adult=maximum_occupancy_val>eval("rateplan.max_adult")?eval("rateplan.max_adult"):maximum_occupancy_val}else selected_adult=eval("rateplan.base_adult");else selected_adult=jQuery("#rm_adult_"+row_count_val+"_0").val();else selected_adult=jQuery("#rm_adult_"+row_id_val+"_"+itmcnt_val).val();parseInt(selected_adult)>parseInt(baseadult)&&(extra_adult=parseInt(selected_adult)-parseInt(baseadult));var extra_child=0,selected_child=0;if(""!=maxchildshow&&0!=maxchildshow)if(""==jQuery("#rm_child_"+row_id_val+"_"+itmcnt_val).val()||null==jQuery("#rm_child_"+row_id_val+"_"+itmcnt_val).val())if("1"==resgrid[0][0].RunOnMaximumOccupanySettings&&"false"==resgrid[0][0].acr)if("1"==resgrid[0][0].ResUIPaxOnMaximumOccupancy)if(eval("rateplan.max_occupancy")>=eval("rateplan.max_adult")){var selected_child=eval("rateplan.max_occupancy")-eval("rateplan.max_adult");if(selected_child>eval("rateplan.max_child"))var selected_child=eval("rateplan.max_child")}else var selected_child=0;else selected_child=eval("rateplan.base_child");else selected_child=jQuery("#rm_child_"+row_count_val+"_0").val();else selected_child=jQuery("#rm_child_"+row_id_val+"_"+itmcnt_val).val();if(0==AllowChildAgePolicy&&1==AllowChildAgeOnBaseOccupancy){if(selected_child>parseInt(basechild)){var childagelimit=WebChildAge;for(chkchild_cnt=1,childcnt=0;childcnt<selected_child;childcnt++){var childage=jQuery("#age_"+row_id_val+"_"+itmcnt_val+"_"+childcnt).val();parseInt(childage)>parseInt(childagelimit)&&""!=childage&&parseInt(chkchild_cnt)>parseInt(basechild)&&extra_child++,chkchild_cnt++}}}else if(0==AllowChildAgePolicy){var childagelimit=WebChildAge;for(childcnt=0;childcnt<selected_child;childcnt++){var childage=jQuery("#age_"+row_id_val+"_"+itmcnt_val+"_"+childcnt).val();parseInt(childage)>parseInt(childagelimit)&&""!=childage&&extra_child++}}else parseInt(selected_child)>parseInt(basechild)&&(extra_child=parseInt(selected_child)-parseInt(basechild));var apply_extra_adult=0,apply_extra_child=0;0<extra_adult&&(apply_extra_adult=1),0<extra_child&&(apply_extra_child=1),extra_child_rate=extra_child*childrate,extra_adult_rate=extra_adult*adultrate;var extra_child_rate_GST=extra_child*childrate_GST,extra_adult_rate_GST=extra_adult*adultrate_GST;"1"==eval("rateplan.ShowTaxInclusiveExclusiveSettings")&&"[0]"!=eval("rateplan.Tax_"+(i+1))?(tax_formula=eval("rateplan.Tax_"+(i+1)),b_amount=b_amount+parseFloat(extra_child_rate)+parseFloat(extra_adult_rate),1==slabbefore_discount?(b_amountGST=b_amountGST+parseFloat(extra_child_rate_GST)+parseFloat(extra_adult_rate_GST),total_tax=getTax(b_amountGST,tax_formula,_decimalplaces,0,rateplan.RackRate,rateplan.EARate,rateplan.ECRate,selected_adult,selected_child,"base",extra_adult,extra_child)):total_tax=getTax(b_amount,tax_formula,_decimalplaces,0,rateplan.RackRate,rateplan.EARate,rateplan.ECRate,selected_adult,selected_child,"base",extra_adult,extra_child),"0"==_decimalplaces&&(b_amount=b_amount.toFixed(_decimalplaces)),b_amount=methods._applyRoundOff(parseFloat(b_amount)+parseFloat(total_tax))):b_amount=methods._applyRoundOff(b_amount+parseFloat(extra_child_rate)+parseFloat(extra_adult_rate))}b_amount=parseFloat(b_amount.toFixed(_display_decimalplaces)),0<b_amount&&(total+=b_amount)}return total*parseFloat(resgrid[0][0].MultiplyFactor)+"|"+apply_extra_adult+"|"+apply_extra_child}catch(e){hideLoadingBar(),hideCheckavalabilityLoadingBar(),console.log("Error - _specialLongStayRateCalculation - "+e.message)}},_specialLongStayRateCalculation_NL:function(opt,rateplan,spfm,promosarray,row_id_val,itmcnt_val,row_count_val,maxchildshow){try{console.log("_specialLongStayRateCalculation_NL");var maxchildshow=maxchildshow||"",total=0,b_amount=0,ind=0,i=-1,extra_child_rate=0,extra_adult_rate=0,extra_adult_rate_GST=0,extra_child_rate_GST=0,base_adult=0,base_child=0;_totalBookingAmount=0,""!=row_id_val&&(rateplan=resgrid[0][row_id_val]);for(var rateGST=0,AllowChildAgePolicy=eval("rateplan.AllowChildAgePolicy"),AllowChildAgeOnBaseOccupancy=eval("rateplan.AllowChildAgeOnBaseOccupancy"),WebChildAge=eval("rateplan.WebChildAge"),WebMaxChildAge=eval("rateplan.WebMaxChildAge"),slabbefore_discount=jQuery("#slab_before_discount").val(),ApplyPackageOnExtras=resgrid[0][0].ApplyPackageOnExtras;void 0!==eval("rateplan.dt_"+eval(++ind));){i++,adultrate=parseFloat(eval("rateplan.o_day_extra_adult_"+ind)),childrate=parseFloat(eval("rateplan.o_day_extra_child_"+ind)),adultrate_GST=parseFloat(eval("rateplan.o_day_extra_adult_"+ind)),childrate_GST=parseFloat(eval("rateplan.o_day_extra_child_"+ind));var baseadult=eval("rateplan.base_adult"),basechild=eval("rateplan.base_child"),extra_adult=0,selected_adult=0,rackratetax_extra_adult=0,rackratetax_extra_child=0;if(""==jQuery("#rm_adult_"+row_id_val+"_"+itmcnt_val).val()||null==jQuery("#rm_adult_"+row_id_val+"_"+itmcnt_val).val())if("1"==resgrid[0][0].RunOnMaximumOccupanySettings&&"false"==resgrid[0][0].acr)if("1"==resgrid[0][0].ResUIPaxOnMaximumOccupancy){var maximum_occupancy_val=eval("rateplan.max_occupancy");selected_adult=maximum_occupancy_val>eval("rateplan.max_adult")?eval("rateplan.max_adult"):maximum_occupancy_val}else selected_adult=eval("rateplan.base_adult");else selected_adult=jQuery("#rm_adult_"+row_count_val+"_0").val();else selected_adult=jQuery("#rm_adult_"+row_id_val+"_"+itmcnt_val).val();parseInt(selected_adult)>parseInt(baseadult)&&(extra_adult=parseInt(selected_adult)-parseInt(baseadult));var extra_child=0,selected_child=0;if(""!=maxchildshow&&0!=maxchildshow)if(""==jQuery("#rm_child_"+row_id_val+"_"+itmcnt_val).val()||null==jQuery("#rm_child_"+row_id_val+"_"+itmcnt_val).val())if("1"==resgrid[0][0].RunOnMaximumOccupanySettings&&"false"==resgrid[0][0].acr)if("1"==resgrid[0][0].ResUIPaxOnMaximumOccupancy)if(eval("rateplan.max_occupancy")>=eval("rateplan.max_adult")){var selected_child=eval("rateplan.max_occupancy")-eval("rateplan.max_adult");if(selected_child>eval("rateplan.max_child"))var selected_child=eval("rateplan.max_child")}else var selected_child=0;else selected_child=eval("rateplan.base_child");else selected_child=jQuery("#rm_child_"+row_count_val+"_0").val();else selected_child=jQuery("#rm_child_"+row_id_val+"_"+itmcnt_val).val();if(0==AllowChildAgePolicy){var childagelimit=WebChildAge;for(childcnt=0;childcnt<selected_child;childcnt++){var childage=jQuery("#age_"+row_id_val+"_"+itmcnt_val+"_"+childcnt).val();parseInt(childage)>parseInt(childagelimit)&&""!=childage&&extra_child++}}else extra_child=parseInt(selected_child);var apply_extra_adult=0,apply_extra_child=0;if(7<parseInt(selected_adult)?(baserate=parseFloat(eval("rateplan.o_day_adult7_"+ind)),extra_adult_rate=(selected_adult-7)*adultrate,extra_adult_rate_GST=(selected_adult-7)*adultrate_GST,apply_extra_adult=1,base_adult=7):(baserate=parseFloat(eval("rateplan.o_day_adult"+parseInt(selected_adult)+"_"+ind)),base_adult=selected_adult),7<extra_child?(baserate+=parseFloat(eval("rateplan.o_day_child7_"+ind)),extra_child_rate=(extra_child-7)*childrate,extra_child_rate_GST=(extra_child-7)*childrate_GST,apply_extra_child=1,base_child=7):0<extra_child&&(baserate+=parseFloat(eval("rateplan.o_day_child"+parseInt(extra_child)+"_"+ind)),base_child=extra_child),rateGST=b_amount=baserate,a_tax=!1,void 0!==spfm[i]&&""!=spfm[i]&&null!=spfm[i]&&(console.log(spfm[i]),spfm1=spfm[i].split(":"),null!=spfm1[1]&&""!=spfm1[1]))switch(frml=spfm1[1].split("|"),nn=parseFloat(frml[1]),tn=parseFloat(frml[2]),r=frml[3],frml[0]){case"PAYSTAYDEAL":r=frml[3],j=i+1,((j%tn>nn||j%tn==0)&&"Y"==r||j<=tn&&j>nn&&"Y"!=r)&&"N"==eval("rateplan.isdisplayregularrate_"+ind)&&(b_amount=0);break;case"PACKAGEDEAL":(i<nn||"Y"==r)&&"N"==eval("rateplan.isdisplayregularrate_"+ind)&&(srate=tn,"AMT"==frml[4]?b_amount-=srate:"PER"==frml[4]?(b_amount=b_amount*(100-srate)/100,"1"==ApplyPackageOnExtras&&(extra_adult_rate=extra_adult_rate*(100-srate)/100,extra_child_rate=extra_child_rate*(100-srate)/100)):b_amount=b_amount);break;case"PERCENTDISCOUNT":case"AMOUNTDISCOUNT":srate=parseFloat(frml[1]),"AMOUNTDISCOUNT"==frml[0]&&"N"==eval("rateplan.isdisplayregularrate_"+ind)?b_amount-=srate:"PERCENTDISCOUNT"==frml[0]&&"N"==eval("rateplan.isdisplayregularrate_"+ind)&&(b_amount=b_amount*(100-srate)/100,"1"==ApplyPackageOnExtras&&(extra_adult_rate=extra_adult_rate*(100-srate)/100,extra_child_rate=extra_child_rate*(100-srate)/100))}if(null!=promosarray[i]&&""!=promosarray[i])switch(promos=promosarray[i].split(":"),drate=parseFloat(promos[3]),promos[1]){case"FN":0==i&&0<b_amount&&"N"==eval("rateplan.isdisplayregularrate_"+ind)&&("AMT"==promos[4]?b_amount-=drate:"PER"==promos[4]&&(b_amount=b_amount*(100-drate)/100));break;case"LN":i+1==eval("rateplan.DayCnt")&&0<b_amount&&"N"==eval("rateplan.isdisplayregularrate_"+ind)&&0<b_amount&&("AMT"==promos[4]?b_amount-=drate:"PER"==promos[4]&&(b_amount=b_amount*(100-drate)/100));break;case"AE":ae=parseInt(promos[2])+1,(i+1)%ae==0&&0<b_amount&&"N"==eval("rateplan.isdisplayregularrate_"+ind)&&("AMT"==promos[4]?b_amount-=drate:"PER"==promos[4]&&(b_amount=b_amount*(100-drate)/100));break;case"AN":"AMT"==promos[4]&&"N"==eval("rateplan.isdisplayregularrate_"+ind)?b_amount-=drate:"PER"==promos[4]&&"N"==eval("rateplan.isdisplayregularrate_"+ind)&&(b_amount=b_amount*(100-drate)/100)}if(0<=b_amount)if(roomno=parseInt(itmcnt_val)+1,"1"==eval("rateplan.ShowTaxInclusiveExclusiveSettings"))if("[0]"!=eval("rateplan.Tax_"+(i+1))){parseInt(selected_adult)>parseInt(baseadult)&&(rackratetax_extra_adult=parseInt(selected_adult)-parseInt(baseadult)),parseInt(extra_child)>parseInt(basechild)&&(rackratetax_extra_child=parseInt(extra_child)-parseInt(basechild)),tax_formula=eval("rateplan.Tax_"+(i+1)),totalbase=b_amount,b_amount=b_amount+parseFloat(extra_child_rate)+parseFloat(extra_adult_rate),1==slabbefore_discount?(rateGST=rateGST+parseFloat(extra_child_rate_GST)+parseFloat(extra_adult_rate_GST),total_tax=getTax(rateGST,tax_formula,_decimalplaces,0,rateplan.RackRate,rateplan.EARate,rateplan.ECRate,selected_adult,selected_child,"base",rackratetax_extra_adult,rackratetax_extra_child)):total_tax=getTax(b_amount,tax_formula,_decimalplaces,0,rateplan.RackRate,rateplan.EARate,rateplan.ECRate,selected_adult,selected_child,"base",rackratetax_extra_adult,rackratetax_extra_child);var total_base_tax=getTax(totalbase,tax_formula,_decimalplaces,0,rateplan.RackRate,rateplan.EARate,rateplan.ECRate,base_adult,base_child,"base",rackratetax_extra_adult,rackratetax_extra_child),totalbase=parseFloat(totalbase)+parseFloat(total_base_tax);""!=row_id_val&&eval("resgrid[0]["+row_id_val+"].o_day_base_"+ind+"_"+roomno+"="+methods._applyRoundOff(totalbase)),"0"==_decimalplaces&&(b_amount=b_amount.toFixed(_decimalplaces)),b_amount=methods._applyRoundOff(parseFloat(b_amount)+parseFloat(total_tax))}else""!=row_id_val&&eval("resgrid[0]["+row_id_val+"].o_day_base_"+ind+"_"+roomno+"="+methods._applyRoundOff(b_amount)),b_amount=methods._applyRoundOff(b_amount+parseFloat(extra_child_rate)+parseFloat(extra_adult_rate));else""!=row_id_val&&eval("resgrid[0]["+row_id_val+"].o_day_base_"+ind+"_"+roomno+"="+methods._applyRoundOff(b_amount)),b_amount=methods._applyRoundOff(b_amount+parseFloat(extra_child_rate)+parseFloat(extra_adult_rate));b_amount=parseFloat(b_amount.toFixed(_display_decimalplaces)),0<b_amount&&(total+=b_amount)}if(""!=row_id_val){if(1==opt.ShowNights)var n_night=parseInt($("select#eZ_Nights").val());else var n_night=parseInt($("input#eZ_Nights").val());console.log("Nonlinear Ajax call......baserate "+baserate),$("#bookingmulbtn").text(langjs[0].L_Loading),$("#nl_loader").val(1);var Packagetype="";""!=spfm&&"undefined"!=typeof frml&&""!=frml&&(Packagetype=frml[4]);var param="action=getNonlinearRate&HotelId="+opt.HotelId+"&roomrateunkid="+rateplan.roomrateunkid+"&roomtypeunkid="+rateplan.roomtypeunkid+"&ratetypeunkid="+rateplan.ratetypeunkid+"&checkin_date="+$("#eZ_chkin").val()+"&nights="+n_night+"&adult="+selected_adult+"&child="+extra_child+"&row_id_val="+row_id_val+"&itmcnt_val="+itmcnt_val+"&CalDtFormat="+opt.CalDtFormat+"&DayCnt="+rateplan.DayCnt+"&Nonlinear_package="+resgrid[0][row_count_val].specialunkid+"&PackageType="+Packagetype;$.ajax({type:"POST",url:opt.serverurl+"service.php",data:param,success:function(e){$("#bookingmulbtn").text(langjs[0].L_NLBOOK),$("#nl_loader").val(0)}})}return total*parseFloat(resgrid[0][0].MultiplyFactor)+"|"+apply_extra_adult+"|"+apply_extra_child}catch(e){hideLoadingBar(),hideCheckavalabilityLoadingBar(),console.log("Error - _specialLongStayRateCalculation_NL - "+e.message)}},_specialStrikeLongStayRateCalculation:function(rateplan,spfm,promosarray,row_id_val,itmcnt_val,row_count_val,maxchildshow){try{var maxchildshow=maxchildshow||"",ind=0,i=-1,b_amount=0,total=0,extra_child_rate=0,extra_adult_rate=0;""!=row_id_val&&(rateplan=resgrid[0][row_id_val]);for(var AllowChildAgePolicy=eval("rateplan.AllowChildAgePolicy"),AllowChildAgeOnBaseOccupancy=eval("rateplan.AllowChildAgeOnBaseOccupancy"),WebChildAge=eval("rateplan.WebChildAge"),WebMaxChildAge=eval("rateplan.WebMaxChildAge"),slabbefore_discount=jQuery("#slab_before_discount").val();void 0!==eval("rateplan.dt_"+eval(++ind));){if(i++,b_amount=parseFloat(eval("rateplan.before_discount_day_base_"+ind)),b_amountGST=parseFloat(eval("rateplan.before_discount_day_base_"+ind)),0<b_amount){adultrate=parseFloat(eval("rateplan.o_day_extra_adult_"+ind)),childrate=parseFloat(eval("rateplan.o_day_extra_child_"+ind));var baseadult=eval("rateplan.base_adult"),basechild=eval("rateplan.base_child"),extra_adult=0;if(""==jQuery("#rm_adult_"+row_id_val+"_"+itmcnt_val).val()||null==jQuery("#rm_adult_"+row_id_val+"_"+itmcnt_val).val())if("1"==resgrid[0][0].RunOnMaximumOccupanySettings&&"false"==resgrid[0][0].acr)if("1"==resgrid[0][0].ResUIPaxOnMaximumOccupancy){var maximum_occupancy_val=eval("rateplan.max_occupancy");maximum_occupancy_val>eval("rateplan.max_adult")?selected_adult=eval("rateplan.max_adult"):selected_adult=maximum_occupancy_val}else selected_adult=eval("rateplan.base_adult");else selected_adult=jQuery("#rm_adult_"+row_count_val+"_0").val();else selected_adult=jQuery("#rm_adult_"+row_id_val+"_"+itmcnt_val).val();parseInt(selected_adult)>parseInt(baseadult)&&(extra_adult=parseInt(selected_adult)-parseInt(baseadult));var extra_child=0,selected_child=0;if(""!=maxchildshow&&0!=maxchildshow)if(""==jQuery("#rm_child_"+row_id_val+"_"+itmcnt_val).val()||null==jQuery("#rm_child_"+row_id_val+"_"+itmcnt_val).val())if("1"==resgrid[0][0].RunOnMaximumOccupanySettings&&"false"==resgrid[0][0].acr)if("1"==resgrid[0][0].ResUIPaxOnMaximumOccupancy)if(eval("rateplan.max_occupancy")>=eval("rateplan.max_adult")){var selected_child=eval("rateplan.max_occupancy")-eval("rateplan.max_adult");if(selected_child>eval("rateplan.max_child"))var selected_child=eval("rateplan.max_child")}else var selected_child=0;else selected_child=eval("rateplan.base_child");else selected_child=jQuery("#rm_child_"+row_count_val+"_0").val();else selected_child=jQuery("#rm_child_"+row_id_val+"_"+itmcnt_val).val();if(0==AllowChildAgePolicy&&1==AllowChildAgeOnBaseOccupancy){if(selected_child>parseInt(basechild)){var childagelimit=WebChildAge;for(chkchild_cnt=1,childcnt=0;childcnt<selected_child;childcnt++){var childage=jQuery("#age_"+row_id_val+"_"+itmcnt_val+"_"+childcnt).val();parseInt(childage)>parseInt(childagelimit)&&""!=childage&&parseInt(chkchild_cnt)>parseInt(basechild)&&extra_child++,chkchild_cnt++}}}else if(0==AllowChildAgePolicy){var childagelimit=WebChildAge;for(childcnt=0;childcnt<selected_child;childcnt++){var childage=jQuery("#age_"+row_id_val+"_"+itmcnt_val+"_"+childcnt).val();parseInt(childage)>parseInt(childagelimit)&&""!=childage&&extra_child++}}else parseInt(selected_child)>parseInt(basechild)&&(extra_child=parseInt(selected_child)-parseInt(basechild));var apply_extra_adult=0,apply_extra_child=0;0<extra_adult&&(apply_extra_adult=1),0<extra_child&&(apply_extra_child=1),extra_child_rate=extra_child*childrate,extra_adult_rate=extra_adult*adultrate,"1"==eval("rateplan.ShowTaxInclusiveExclusiveSettings")&&"[0]"!=eval("rateplan.Tax_"+(i+1))?(tax_formula=eval("rateplan.Tax_"+(i+1)),b_amount=b_amount+parseFloat(extra_child_rate)+parseFloat(extra_adult_rate),1==slabbefore_discount?(b_amountGST=b_amountGST+parseFloat(extra_child_rate)+parseFloat(extra_adult_rate),total_tax=getTax(b_amountGST,tax_formula,_decimalplaces,0,rateplan.RackRate,rateplan.EARate,rateplan.ECRate,selected_adult,selected_child,"base",extra_adult,extra_child)):total_tax=getTax(b_amount,tax_formula,_decimalplaces,0,rateplan.RackRate,rateplan.EARate,rateplan.ECRate,selected_adult,selected_child,"base",extra_adult,extra_child),"0"==_decimalplaces&&(b_amount=b_amount.toFixed(_decimalplaces)),b_amount=methods._applyRoundOff(parseFloat(b_amount)+parseFloat(total_tax))):b_amount=methods._applyRoundOff(parseFloat(b_amount)+parseFloat(extra_child_rate)+parseFloat(extra_adult_rate))}b_amount=parseFloat(b_amount.toFixed(_display_decimalplaces)),0<b_amount&&(total+=b_amount)}return total*parseFloat(resgrid[0][0].MultiplyFactor)+"|"+apply_extra_adult+"|"+apply_extra_child}catch(e){hideLoadingBar(),hideCheckavalabilityLoadingBar(),console.log("Error - _specialStrikeLongStayRateCalculation - "+e.message)}},_specialStrikeLongStayRateCalculation_NL:function(opt,rateplan,spfm,promosarray,row_id_val,itmcnt_val,row_count_val,maxchildshow){try{var maxchildshow=maxchildshow||"",ind=0,i=-1,b_amount=0,total=0,extra_child_rate=0,extra_adult_rate=0,rackratetax_extra_child=0,rackratetax_extra_adult=0,base_adult=0,base_child=0;""!=row_id_val&&(rateplan=resgrid[0][row_id_val]);for(var AllowChildAgePolicy=eval("rateplan.AllowChildAgePolicy"),AllowChildAgeOnBaseOccupancy=eval("rateplan.AllowChildAgeOnBaseOccupancy"),WebChildAge=eval("rateplan.WebChildAge"),WebMaxChildAge=eval("rateplan.WebMaxChildAge");void 0!==eval("rateplan.dt_"+eval(++ind));){i++,adultrate=parseFloat(eval("rateplan.o_day_extra_adult_"+ind)),childrate=parseFloat(eval("rateplan.o_day_extra_child_"+ind));var baseadult=eval("rateplan.base_adult"),basechild=eval("rateplan.base_child"),extra_adult=0;if(""==jQuery("#rm_adult_"+row_id_val+"_"+itmcnt_val).val()||null==jQuery("#rm_adult_"+row_id_val+"_"+itmcnt_val).val())if("1"==resgrid[0][0].RunOnMaximumOccupanySettings&&"false"==resgrid[0][0].acr)if("1"==resgrid[0][0].ResUIPaxOnMaximumOccupancy){var maximum_occupancy_val=eval("rateplan.max_occupancy");maximum_occupancy_val>eval("rateplan.max_adult")?selected_adult=eval("rateplan.max_adult"):selected_adult=maximum_occupancy_val}else selected_adult=eval("rateplan.base_adult");else selected_adult=jQuery("#rm_adult_"+row_count_val+"_0").val();else selected_adult=jQuery("#rm_adult_"+row_id_val+"_"+itmcnt_val).val();parseInt(selected_adult)>parseInt(baseadult)&&(extra_adult=parseInt(selected_adult)-parseInt(baseadult));var extra_child=0,selected_child=0;if(""!=maxchildshow&&0!=maxchildshow)if(""==jQuery("#rm_child_"+row_id_val+"_"+itmcnt_val).val()||null==jQuery("#rm_child_"+row_id_val+"_"+itmcnt_val).val())if("1"==resgrid[0][0].RunOnMaximumOccupanySettings&&"false"==resgrid[0][0].acr)if("1"==resgrid[0][0].ResUIPaxOnMaximumOccupancy)if(eval("rateplan.max_occupancy")>=eval("rateplan.max_adult")){var selected_child=eval("rateplan.max_occupancy")-eval("rateplan.max_adult");if(selected_child>eval("rateplan.max_child"))var selected_child=eval("rateplan.max_child")}else var selected_child=0;else selected_child=eval("rateplan.base_child");else selected_child=jQuery("#rm_child_"+row_count_val+"_0").val();else selected_child=jQuery("#rm_child_"+row_id_val+"_"+itmcnt_val).val();if(0==AllowChildAgePolicy){var childagelimit=WebChildAge;for(childcnt=0;childcnt<selected_child;childcnt++){var childage=jQuery("#age_"+row_id_val+"_"+itmcnt_val+"_"+childcnt).val();parseInt(childage)>parseInt(childagelimit)&&""!=childage&&extra_child++}}else extra_child=parseInt(selected_child);var apply_extra_adult=0,apply_extra_child=0;if(7<parseInt(selected_adult)?(baserate=parseFloat(eval("rateplan.o_day_adult7_"+ind)),extra_adult_rate=(selected_adult-7)*adultrate,apply_extra_adult=1,base_adult=7):(baserate=parseFloat(eval("rateplan.o_day_adult"+parseInt(selected_adult)+"_"+ind)),base_adult=selected_adult),7<extra_child?(baserate+=parseFloat(eval("rateplan.o_day_child7_"+ind)),extra_child_rate=(extra_child-7)*childrate,apply_extra_child=1,base_child=7):0<extra_child&&(baserate+=parseFloat(eval("rateplan.o_day_child"+parseInt(extra_child)+"_"+ind)),base_child=extra_child),b_amount=baserate,0<b_amount)if(roomno=parseInt(itmcnt_val)+1,"1"==eval("rateplan.ShowTaxInclusiveExclusiveSettings"))if("[0]"!=eval("rateplan.Tax_"+(i+1))){tax_formula=eval("rateplan.Tax_"+(i+1)),totalbase=b_amount,parseInt(selected_adult)>parseInt(baseadult)&&(rackratetax_extra_adult=parseInt(selected_adult)-parseInt(baseadult)),parseInt(extra_child)>parseInt(basechild)&&(rackratetax_extra_child=parseInt(extra_child)-parseInt(basechild)),b_amount=b_amount+parseFloat(extra_child_rate)+parseFloat(extra_adult_rate),total_tax=getTax(b_amount,tax_formula,_decimalplaces,0,rateplan.RackRate,rateplan.EARate,rateplan.ECRate,selected_adult,selected_child,"base",rackratetax_extra_adult,rackratetax_extra_child);var total_base_tax=getTax(totalbase,tax_formula,_decimalplaces,0,rateplan.RackRate,rateplan.EARate,rateplan.ECRate,base_adult,base_child,"base",rackratetax_extra_adult,rackratetax_extra_child);totalbase+=parseFloat(total_base_tax),""!=row_id_val&&eval("resgrid[0]["+row_id_val+"].d_before_discount_tax_day_base_"+ind+"_"+roomno+"="+methods._applyRoundOff(totalbase)),"0"==_decimalplaces&&(b_amount=b_amount.toFixed(_decimalplaces)),b_amount=methods._applyRoundOff(parseFloat(b_amount)+parseFloat(total_tax))}else""!=row_id_val&&eval("resgrid[0]["+row_id_val+"].d_before_discount_tax_day_base_"+ind+"_"+roomno+"="+methods._applyRoundOff(b_amount)),b_amount=methods._applyRoundOff(parseFloat(b_amount)+parseFloat(extra_child_rate)+parseFloat(extra_adult_rate));else""!=row_id_val&&eval("resgrid[0]["+row_id_val+"].d_before_discount_tax_day_base_"+ind+"_"+roomno+"="+methods._applyRoundOff(b_amount)),b_amount=methods._applyRoundOff(parseFloat(b_amount)+parseFloat(extra_child_rate)+parseFloat(extra_adult_rate));b_amount=parseFloat(b_amount.toFixed(_display_decimalplaces)),0<b_amount&&(total+=b_amount)}return total*parseFloat(resgrid[0][0].MultiplyFactor)+"|"+apply_extra_adult+"|"+apply_extra_child}catch(e){hideLoadingBar(),hideCheckavalabilityLoadingBar(),console.log("Error - _specialStrikeLongStayRateCalculation - "+e.message)}},_applyRoundOff:function(e){if(void 0!==resgrid[0][0]){if("1"==resgrid[0][0].ShowTaxInclusiveExclusiveSettings){if(isNaN(resgrid[0][0].RoundOffType))return e;var a=resgrid[0][0].RoundOffType;if(a<=0)return e;var t=e*a,r=0<e?1:0==e?0:-1,l=t+.5*r;return l=Math.floor(l),t-Math.floor(t)==.5&&l/2!=Math.floor(l/2)&&(l-=r),l/a}return e}return e},_showfullyavailablerateplan:function(r){if(1==r.ShowOnlyAvailableRatePlanOrPackage){jQuery("#summary_head").show(),jQuery("#filter-wrapper_div").show();var l=0,e=jQuery("[id$='main_otarow']").length,i=0,o=0;jQuery("[id$='main_otarow']").each(function(){l=jQuery(this).find(".vres-cnt-card").find(".card-list").length;var e=0,a=0,t=-1;(1==r.ResUILimitRatePlanPackage&&1<=r.ResUINoOfRatePlanPackage&&(t=1),jQuery(this).find(".vres-cnt-card").find(".card-list").each(function(){jQuery(this).attr("id").split("_");jQuery(this).removeClass("hidereadmore"),0==jQuery(this).find("#not_available").index()||1==jQuery(this).is(":hidden")?(jQuery(this).hide(),e++):a<parseInt(r.ResUINoOfRatePlanPackage)&&1==t&&(jQuery(this).removeClass("read-more-content"),a++),1==t&&($(".read-more-content").addClass("hidereadmore"),"display: none;"==jQuery(this).attr("style")&&0)}),1==t)&&(parseInt(l)-parseInt(e)>parseInt(r.ResUINoOfRatePlanPackage)?($(this).find("a.readmore_rtplan").text(js_stripslashes(langjs[0].L_ReadMore)),$(this).find("a.moreless_a").html('<i class="fa fa-angle-down"></i>'),$(this).find("a.readmore_rtplan").addClass("read-more-toggle"),$(this).find(".moreless_div").show()):($(this).find("a.readmore_rtplan").text(""),$(this).find("a.moreless_a").html(""),$(this).find("a.readmore_rtplan").removeClass("read-more-toggle"),$(this).find(".moreless_div").hide()));e==l?(jQuery(this).hide(),i++,jQuery(this).removeClass("rml-first")):0==o&&1==jQuery(this).is(":visible")&&(jQuery(this).removeClass("rml-first").addClass("rml-first"),o++)}),i==e&&(jQuery("#no_filterrecord").hasClass("showthis")||(jQuery("#no_record").show(),jQuery("#norecord_main_blk").show(),jQuery("#availcalmain").show(),jQuery("#enquirenotavail").show(),jQuery("#no_filterrecord").prev().show(),methods._ShowClosestAvailability(r)),jQuery("#filter-wrapper_div").hide(),jQuery("#booking_summery_blk").hide(),jQuery("#summary_head").hide(),jQuery("#room_container").hide())}},_loadDefaultJsInit:function(opt){try{try{parent.document.domain==opt.serverhost||parent.editframe||(document.getElementById("frm").target="_blank")}catch(e){try{parent.editframe||(document.getElementById("frm").target="_blank")}catch(e){document.getElementById("frm").target="_blank"}}if("undefined"!=typeof resgrid&&void 0!==resgrid[0]&&null!=resgrid[0]){jQuery(".txtInteger").keydown(fun_Integer),jQuery(".txtInteger").focusout(fun_Integer_keyup),$(".filter-div").swipe({swipeLeft:function(){$(this).removeClass("filt-open"),$(".filt_wrap_bg").removeClass("filt_wrap_bg_open")}}),$(".filt_wrap_bg").swipe({swipe:function(e){$(".filt_wrap_bg").removeClass("filt_wrap_bg_open"),$(".filter-div").removeClass("filt-open")}}),$(".rate_model").on("click",function(){if("NONLINEAR"==$("#ratemode").val()){var rateplan,curid=this.id.split("_"),ind=curid[1],row_id_val=ind,itmcnt_val=jQuery("#room_clone_cnt_"+ind).text(),row_count_val=ind;rateplan=eval("resgrid[0]["+parseInt(ind)+"]");for(var totalbase=0,i=0,day=i;void 0!==eval("rateplan.dt_"+eval(++i));){for(day=i,totalbase=0,totalbase_strike=0,room=1;room<=itmcnt_val;room++)totalbase+=eval("resgrid[0]["+parseInt(row_id_val)+"].o_day_base_"+day+"_"+room),totalbase_strike+=eval("resgrid[0]["+parseInt(row_id_val)+"].d_before_discount_tax_day_base_"+day+"_"+room);0<totalbase&&(totalbase=parseFloat(totalbase)*parseFloat(resgrid[0][0].MultiplyFactor),totalbase=methods._applyRoundOff(totalbase),$("span#rate2_"+ind+"_"+day).text(totalbase.toFixed(_decimalplaces))),0<totalbase_strike&&(totalbase_strike=parseFloat(totalbase_strike)*parseFloat(resgrid[0][0].MultiplyFactor),totalbase_strike=methods._applyRoundOff(totalbase_strike),$("span#strikethrough_"+ind+"_"+day).text(totalbase_strike.toFixed(_decimalplaces))),console.log("totalbase"+totalbase+"totalbase_strike"+totalbase_strike)}}}),$(".ad-rm").on("click",function(){var ava_clicked=methods._check_availability_clicked(opt);if(0==ava_clicked)return!1;if(1==$(this).hasClass("adrm-wrap2")||1==$(this).hasClass("adrm-wrap-close"))return!1;var otatablview_id=jQuery(this).closest(".otatablview").attr("id"),set_init_param=otatablview_id.split("_"),set_id=jQuery(this).attr("id"),setidarr=set_id.split("_"),room_init_cnt=jQuery("#room_init_cnt_"+set_init_param[1]).text(),room_clone_cnt=jQuery("#room_clone_cnt_"+setidarr[1]).text(),each_room_cnt=jQuery("#each_room_cnt_"+setidarr[1]).text(),set_id=jQuery(this).attr("id"),setidarr=set_id.split("_"),max_rooms_allowed=parseInt(resgrid[0][setidarr[1]].MulRoomInventory);if(0==room_init_cnt||room_init_cnt<max_rooms_allowed){if(""!=$("#roombooklimit").val()&&parseInt($("#roombooklimitcal").val())+1>parseInt($("#roombooklimit").val())){var alertmsglimit=js_stripslashes(langjs[0].L_roombooklimit).replace("{nobook_rms_limit}",$("#roombooklimit").val());return swal({title:"",text:alertmsglimit,type:"error",showCancelButton:!1,animation:!1}),!1}if($(this).parents(".vres_add_wrapper").next(".vres-add-div").show(),$(".no-roomdiv").hide(),$(".vres-roombooked").addClass("vres-booked-dis"),$(this).hide().next(".vres_num").show(),room_init_cnt++,jQuery("#room_init_cnt_"+set_init_param[1]).text(room_init_cnt),1==opt.RunOnMaximumOccupanySettings&&(rateplan2=resgrid[0][setidarr[1]],"undefined"!=typeof rateplan2)){var baseadult=eval("rateplan2.base_adult");1==opt.acr&&(baseadult=$("select[id$='eZ_adult']").val());var basechild=eval("rateplan2.base_child");if(0==opt.RunOnMaximumOccupanySettings)("-1"==opt.showchild_bb&&1==opt.showchild||1==opt.showchild_bb)&&(basechild=$("select[id$='eZ_child']").val());else if(1==opt.RunOnMaximumOccupanySettings){if(0==opt.acr)if("1"==opt.ResUIPaxOnMaximumOccupancy){var maximum_occupancy_val=eval("rateplan2.max_occupancy");baseadult=maximum_occupancy_val>eval("rateplan2.max_adult")?eval("rateplan2.max_adult"):maximum_occupancy_val}else baseadult=eval("rateplan2.base_adult");1==opt.showchild&&(basechild=$("#rm_child_"+setidarr[1]+"_"+room_clone_cnt).val())}jQuery("#rm_adult_"+setidarr[1]+"_"+room_clone_cnt).val(baseadult),jQuery("#rm_child_"+setidarr[1]+"_"+room_clone_cnt).val(basechild),methods._childagecombo(basechild,setidarr[1],room_clone_cnt)}methods._calculateLongtayPrice(opt,setidarr[1],room_clone_cnt,"add_room"),room_clone_cnt++,jQuery("#room_clone_cnt_"+setidarr[1]).text(room_clone_cnt),jQuery("#rm_cnt_lbl_"+setidarr[1]+"_"+(room_clone_cnt-1)).text(jQuery("#room_clone_cnt_"+setidarr[1]).text()),jQuery("#rooms_"+setidarr[1]).val(each_room_cnt),jQuery("#each_room_cnt_"+setidarr[1]).text(each_room_cnt),each_room_cnt++,methods._setRoomLeftLbl(set_init_param[1],max_rooms_allowed)}methods._setIframeBookNowSummary()}),$(".dn-btn").on("click",function(){$(this).parents("div.vres-add-div").prev();$(this).parents("div.vres-add-div").prev().children("span").text(" Added"),$(this).parents("div.vres-add-div").prev().children("i").addClass("fa-check"),$(this).parents("div.vres-add-div").siblings(".ad-rm").addClass("vrmadded"),$(this).parents("div.vres-add-div").hide(),$(".no-roomdiv").show(),$(".vres-roombooked").removeClass("vres-booked-dis"),$(this).parents(".card-list").find(".ad-rm").show().next(".vres_num").hide()}),$(".vres-dtl").on("click",function(){$("#my-vres-modal").fadeIn(),$("body").addClass("vres-open-modal"),$(".vres-mdtab-cnt").hide(),$(".vres-md-tab").find('[data-tab="rmdetail"]').show(),$("ul.vres-in-tab li").removeClass("tab-active")}),$(".cls").on("click",function(){$("#my-vres-modal").fadeOut(),$("body").removeClass("vres-open-modal")}),$(".vres-poptab2").find("ul > li").on("click",function(){var e=$(this).attr("id");$(".vres-p2-tab").find("li").removeClass("tab-active"),$(this).addClass("tab-active"),$(".vres-poptab2").find(".inn-cnt-tab").hide(),$(".vres-poptab2").find("[data-tab="+e+"]").show()}),$(".vres_room_info").on("click",function(e){e.stopPropagation(),$(this).next(".vres_detail_wrap").toggleClass("slideDetail"),$(".vres_room_infoBg").fadeToggle(400)}),$(".nav_li_closed").on("click",function(e){e.stopPropagation(),$(".vres_room_info").next(".vres_detail_wrap").removeClass("slideDetail"),$(".vres_room_infoBg").fadeToggle(400)});var openFilter=function(){};$(".filter-btn1").on("click",function(e){e.stopPropagation(),console.log("clicked"),992<$(window).width()&&($(".filter-div").css("top",$(".filter-btn1").offset().top+45),$(".filter-div").css("left",$(".filter-btn1").offset().left),$(".filter-div").show(),methods._setFilterHeight(opt)),$(".filter-div").toggleClass("filt-open"),$(".filt_wrap_bg").addClass("filt_wrap_bg_open")}),$(".filter-btn2").on("click",function(e){e.stopPropagation(),$(window).width()<992&&($(".filter-div").css("top",$(".filter-btn1").offset().top+45),$(".filter-div").css("left",$(".filter-btn1").offset().left),$(".filter-div").show(),methods._setFilterHeight(opt)),$(".filter-div").toggleClass("filt-open"),$(".filt_wrap_bg").addClass("filt_wrap_bg_open")}),$(window).on("scroll",function(){}),$(".filt-close").on("click",function(){$(".filter-div").removeClass("filt-open"),$(".filt_wrap_bg").removeClass("filt_wrap_bg_open"),$(".filter-div").hide()}),$(".vres-checkin.bg").on("click",function(e){e.stopPropagation(),$(".vres-checkin.bg").children(".vres-drop-down-div").toggle()});var windowWidth=$(window).width();$(window).on("resize",function(){$(window).width()!==windowWidth&&($(".promo-popUp").hide(),$(".filt_wrap_bg").removeClass("filt_wrap_bg_open"))}),$(".shpriceBtn").on("click",function(){$(".shpriceBtn").removeClass("active"),$(this).addClass("active")}),$("#Applypromo").on("click",function(e){if(startDate=$.datepicker.parseDate(opt.CalDtFormat,$("#eZ_chkin").val()),endDate=$.datepicker.parseDate(opt.CalDtFormat,$("#eZ_chkout").val()),selectednights=jQuery("Select[id$='eZ_Nights']").val(),0==opt.ShowNights&&1==opt.ShowDepart)var a=(endDate-startDate)/864e5;else a=selectednights;if(90<a)return jQuery("#book").trigger("click"),!1;if(""==jQuery("#promotioncode").val()){var t=js_stripslashes(langjs[0].L_PromoWrong2);return swal({title:"",text:t,type:"warning",showCancelButton:!1,animation:!1}),hideCheckavalabilityLoadingBar(),!1}var r=jQuery("#promotioncode").val().toString().replace(/"/g,"'");jQuery("#promotioncode").val(r),jQuery("#trackbtnclicked").val(1),methods._checksession(opt,"promo"),methods._InsertCheckAvail(opt)}),$("#Applypromo2").on("click",function(e){if(startDate=$.datepicker.parseDate(opt.CalDtFormat,$("#eZ_chkin").val()),endDate=$.datepicker.parseDate(opt.CalDtFormat,$("#eZ_chkout").val()),selectednights=jQuery("Select[id$='eZ_Nights']").val(),0==opt.ShowNights&&1==opt.ShowDepart)var a=(endDate-startDate)/864e5;else a=selectednights;if(90<a)return jQuery("#book").trigger("click"),!1;if(""==jQuery("#promotioncode3").val()){var t=js_stripslashes(langjs[0].L_PromoWrong2);return swal({title:"",text:t,type:"warning",showCancelButton:!1,animation:!1}),hideCheckavalabilityLoadingBar(),!1}jQuery("#promotioncode").val(jQuery("#promotioncode3").val()),jQuery("#trackbtnclicked").val(1),methods._checksession(opt,"promo"),methods._InsertCheckAvail(opt)}),$("input#promotioncode").keypress(function(e){13==e.keyCode&&(jQuery("#trackbtnclicked").val(1),methods._loadGrid(opt))}),$("input#promotioncode3").keypress(function(e){13==e.keyCode&&(jQuery("#trackbtnclicked").val(1),methods._loadGrid(opt))}),$(".add_to_compare").on("click",function(){jQuery("#compare_room").val("");var e=langjs[0].lblComparerooms_1,a=langjs[0].lblAddtocompare_1,t=jQuery(this).parent().next().text();jQuery(this).parent().next().text(t==langjs[0].lblComparerooms_1?a:e),jQuery(this).parent().next().hasClass("cmpback")?jQuery(this).parent().next().removeClass("cmpback"):jQuery(this).parent().next().addClass("cmpback"),jQuery(".add_to_compare").each(function(){1==jQuery(this).is(":checked")&&jQuery("#compare_room").val(jQuery("#compare_room").val()+"|"+jQuery(this).val())})}),$("#compareroom,span.compareroom").on("click",function(){if(methods._checksession(opt,""),"compareroom"!=jQuery(this).attr("id")){if(1!=jQuery(this).parent().find(".add_to_compare").prop("checked"))return jQuery(this).parent().find(".add_to_compare").click(),!1;jQuery(this).parent().find(".add_to_compare").removeAttr("Checked")}var e=0;if(jQuery(".add_to_compare").each(function(){1==jQuery(this).is(":checked")&&e++}),4<e){var a=langjs[0].lblCompareMessage2;return swal({title:"",text:a,type:"warning",showCancelButton:!1,animation:!1}),hideLoadingBar(),!1}if(1==e){a=langjs[0].lblCompareMessage3;return swal({title:"",text:a,type:"warning",showCancelButton:!1,animation:!1}),hideLoadingBar(),!1}if(!(0<e&&""!=jQuery("#compare_room").val())){a=langjs[0].lblCompareMessage;return swal({title:"",text:a,type:"warning",showCancelButton:!1,animation:!1}),hideLoadingBar(),!1}var t=jQuery("#compare_room").val();t=t.split("|");var r=[];if($.each(t,function(e,a){-1===$.inArray(a,r)&&r.push(a)}),1==(r=r.filter(function(e){return""!==e})).length){var a=langjs[0].lblCompareMessage3;return swal({title:"",text:a,type:"warning",showCancelButton:!1,animation:!1}),hideLoadingBar(),!1}r.push(""),r=r.join("|"),getUrl=opt.serverurl+"compareroom-"+opt.HotelId,$.ajax({url:getUrl,type:"POST",dataType:"html",data:{HotelId:opt.HotelId,roomrateids:r},error:function(){},beforeSend:function(){showLoadingBar(),$("#comparedata").html("")},complete:function(){$("#compare-modal").modal()},success:function(e){$("#comparedata").html(e)}})}),$("[id^=allroomdetails_]").click(function(){var e=$(this).attr("id");roomsrates=e.split("_");jQuery.trim($(this).parent().parent().parent().find(".vres_center > b").html());var a="";void 0!==roomsrates[8]&&$("#otatablview_"+roomsrates[8]).find("div[id^=row_]").each(function(){if(!0===$(this).is(":visible"))return a=$(this).find("a[id^=allroomdetails_]").attr("id"),!1}),console.log(e),console.log(a),""!=a&&(roomsrates=a.split("_"),roomsrates[7]=3);var t="";3==roomsrates[7]&&4!=roomsrates[7]&&$("[id^=span_row_]").each(function(){jQuery(this).attr("id").split("_")[2]==roomsrates[1]&&(t=jQuery(this).text())}),getUrl=opt.serverurl+"rminfo-"+roomsrates[4],$.ajax({url:getUrl,type:"POST",dataType:"html",data:{HotelId:roomsrates[4],roomtypeid:roomsrates[1],ratetypeid:roomsrates[2],showchildflag:roomsrates[3],specialunkid:roomsrates[6],flag:roomsrates[7],roomrateids:t},error:function(){},beforeSend:function(){showLoadingBar(),$("#detail-modal").html("")},complete:function(){hideLoadingBar(),$("#detail-modal").modal(),$("ul.vres-tab li").click(function(){var e=$(this).attr("id"),a=$(this).parents(".vres-tab-div").attr("id");$("#"+a+" ul.vres-tab li").removeClass("tab-active"),$(this).addClass("tab-active"),$("#"+a+" > .vres-tab-cnt").hide(),$(".vres-tab-div").find('[data-tab="'+e+'"]').show(),$("#detail-modal").modal("handleUpdate")}),$(".vres-dtl").click(function(){$(".vres-tab-div#vres-modal2 .vres-tab-cnt").hide(),$(".vres-tab-div#vres-modal2").find('[data-tab="rmdetail"]').show(),$(".vres-tab-div#vres-modal2 ul.vres-tab li").removeClass("tab-active"),$(".vres-tab-div#vres-modal2 ul.vres-tab").find('[id="rmdetail"]').addClass("tab-active")}),$(".enquiretabpop").click(function(){$(".vres-tab-div#vres-modal2 .vres-tab-cnt").hide(),$(".vres-tab-div#vres-modal2").find('[data-tab="enqu"]').show(),$(".vres-tab-div#vres-modal2 ul.vres-tab li").removeClass("tab-active"),$(".vres-tab-div#vres-modal2 ul.vres-tab").find('[id="enqu"]').addClass("tab-active")}),$(".findusonmap").click(function(){$(".vres-tab-div#vres-modal2 .vres-tab-cnt").hide(),$(".vres-tab-div#vres-modal2").find('[data-tab="map"]').show(),$(".vres-tab-div#vres-modal2 ul.vres-tab li").removeClass("tab-active"),$(".vres-tab-div#vres-modal2 ul.vres-tab").find('[id="map"]').addClass("tab-active")}),$(".opengallery").click(function(){$(".vres-tab-div#vres-modal2 .vres-tab-cnt").hide(),$(".vres-tab-div#vres-modal2").find('[data-tab="picgal"]').show(),$(".vres-tab-div#vres-modal2 ul.vres-tab li").removeClass("tab-active"),$(".vres-tab-div#vres-modal2 ul.vres-tab").find('[id="picgal"]').addClass("tab-active")}),methods._setIframePopupPosition(opt,e,$("#detail-modal"))},success:function(e){$("#detail-modal").html(e)}})}),$("[id^=allhoteldetails_]").click(function(){var e=$(this).attr("id");roomsrates=e.split("_");jQuery.trim($(this).parent().parent().parent().find(".vres_center > b").html());getUrl=serverurl+"rminfo-"+roomsrates[1],$.ajax({url:getUrl,type:"POST",dataType:"html",data:{HotelId:roomsrates[1],flag:roomsrates[3],Hotel_valid:"HotelInformation"},error:function(){},beforeSend:function(){showLoadingBar(),$("#detail-modal").html("")},complete:function(){hideLoadingBar(),$("#detail-modal").modal(),$("ul.vres-tab li").click(function(){var e=$(this).attr("id"),a=$(this).parents(".vres-tab-div").attr("id");$("#"+a+" ul.vres-tab li").removeClass("tab-active"),$(this).addClass("tab-active"),$("#"+a+" > .vres-tab-cnt").hide(),$(".vres-tab-div").find('[data-tab="'+e+'"]').show(),$("#detail-modal").modal("handleUpdate")}),$(".vres-dtl").click(function(){$(".vres-tab-div#vres-modal2 .vres-tab-cnt").hide(),$(".vres-tab-div#vres-modal2").find('[data-tab="rmdetail"]').show(),$(".vres-tab-div#vres-modal2 ul.vres-tab li").removeClass("tab-active"),$(".vres-tab-div#vres-modal2 ul.vres-tab").find('[id="rmdetail"]').addClass("tab-active")}),methods._setIframePopupPosition(opt,e,$("#detail-modal"))},success:function(e){$("#detail-modal").html(e)}})}),$("[id^=rateinfo_]").on("click",function(e){var a=$(this).attr("id"),t=a.split("_");methods._setIframePopupPosition(opt,a,$("#detail-modal_"+t[1]))}),$("[id^=bookingmulbtn]").on("click",function(e){if("NONLINEAR"==$("#ratemode").val()&&1==$("#nl_loader").val())return!1;var ava_clicked=methods._check_availability_clicked(opt);if(0==ava_clicked)return!1;showLoadingBar(),$form=jQuery("#frm");var store_roomrateunkid=new Array,store_ratetypeunkid=new Array,store_roomtypeunkid=new Array,rowrecordid=new Array,roomtypecnt=new Array,roomtypemax=new Array,rateplanname=new Array,room_selected_cnt=0,rplanname="",no_rooms="",rt="",valid_sel=0,col_select=1,store_chkDt="",tot_rooms=0,rm_chk=0,adult_concat="",child_concat="",childage_concat="";if(0==opt.ShowNights&&1==opt.ShowDepart)var no_of_nights=parseInt($("input[id$='eZ_Nights']").val());else var no_of_nights=1;1==opt.ShowNights&&($("select[id$='eZ_Nights'] option[value="+$("select#eZ_Nights").val()+"]").attr("selected","selected"),no_of_nights=parseInt($("select[id$='eZ_Nights']").val()));var ObjData="",age_empty=0,foundnegetiverate=0;$("[id^=rooms_]").each(function(){var adult_chk="",child_chk="",childage_chk="",_JsonObjData;if(bookbtnid=$(this).attr("id"),0!=jQuery(this).val()&&""!=jQuery(this).val()&&1==jQuery(this).is(":visible")){var _rowd=bookbtnid.split("_"),_rowd2=_rowd[1].split("-"),rowid="row_"+_rowd2[0],rooms=jQuery(this).val();_JsonObjData=eval(resgrid[0][_rowd2[0]]),roomtypecnt["rmt_"+resgrid[0][_rowd2[0]].roomtypeunkid]?roomtypecnt["rmt_"+resgrid[0][_rowd2[0]].roomtypeunkid]=parseInt(roomtypecnt["rmt_"+resgrid[0][_rowd2[0]].roomtypeunkid])+parseInt($(this).val()):(roomtypecnt["rmt_"+resgrid[0][_rowd2[0]].roomtypeunkid]=parseInt($(this).val()),roomtypemax["rmt_"+resgrid[0][_rowd2[0]].roomtypeunkid]=parseInt(resgrid[0][_rowd2[0]].MulRoomInventory),rateplanname["rmt_"+resgrid[0][_rowd2[0]].roomtypeunkid]=resgrid[0][_rowd2[0]].display_name),store_roomrateunkid.push(resgrid[0][_rowd2[0]].roomrateunkid),store_ratetypeunkid.push(resgrid[0][_rowd2[0]].ratetypeunkid),store_roomtypeunkid.push(resgrid[0][_rowd2[0]].roomtypeunkid),rowrecordid.push(_rowd2[0]),store_chkDt=resgrid[0][_rowd2[0]]["dt_"+no_of_nights],store_chkDt2=resgrid[0][_rowd2[0]].dt_1,col_select++,tot_rooms+=parseInt($(this).val()),rm_chk+=parseInt(rooms),console.log("rooms : "+rooms),res=_bookingProcess_multipleroomtype(rowid,_rowd[1],rooms),0!=res?valid_sel++:foundnegetiverate=1,jQuery("select[id^=rm_adult_"+_rowd2[0]+"_]").each(function(){adult_id=jQuery(this).attr("id"),adult_splt=adult_id.split("_"),adult_chk=adult_chk+adult_splt[3]+":"+parseInt(jQuery(this).val())+","}),adult_chk=adult_chk.substring(0,adult_chk.length-1),adult_concat=adult_concat+adult_chk+"|",1==opt.showchild&&(jQuery("select[id^=rm_child_"+_rowd2[0]+"_]").each(function(){child_id=jQuery(this).attr("id"),child_splt=child_id.split("_"),child_chk=child_chk+child_splt[3]+":"+parseInt(jQuery(this).val())+","}),child_chk=child_chk.substring(0,child_chk.length-1),child_concat=child_concat+child_chk+"|"),jQuery("select[id^=age_"+_rowd2[0]+"_]").each(function(){jQuery(this).is(":visible")&&(""!=jQuery(this).val()?(childage_id=jQuery(this).attr("id"),childage_splt=childage_id.split("_"),childage_chk=childage_chk+childage_splt[3]+":"+parseInt(jQuery(this).val())+","):age_empty++)}),""!=childage_chk&&(childage_chk=childage_chk.substring(0,childage_chk.length-1),childage_concat=childage_concat+childage_chk+"|"),room_selected_cnt++,rplanname=""!=rplanname?rplanname+","+resgrid[0][_rowd2[0]].display_name:resgrid[0][_rowd2[0]].display_name,no_rooms=""!=no_rooms?no_rooms+","+$(this).val():$(this).val(),rt=""!=rt?rt+","+resgrid[0][_rowd2[0]].roomtypeunkid:resgrid[0][_rowd2[0]].roomtypeunkid,ObjData=""!=ObjData?ObjData+"<resgrid_123>"+JSON.stringify(_JsonObjData):JSON.stringify(_JsonObjData)}}),jQuery("#hidData").html(""),""!=opt.BookingFrom&&(jQuery('<div style="display:none"><textarea name="res_grid" id="res_grid">'+ObjData+"</textarea></div>").appendTo("#hidData"),jQuery("<input type='hidden' name='callfrom' id='callfrom' value='FB' />").appendTo("#hidData"));try{parent.document.domain==serverhost||parent.editframe||jQuery('<div style="display:none"><textarea name="res_grid" id="res_grid">'+ObjData+"</textarea></div>").appendTo("#hidData")}catch(e){try{parent.editframe||jQuery('<div style="display:none"><textarea name="res_grid" id="res_grid">'+ObjData+"</textarea></div>").appendTo("#hidData")}catch(e){jQuery('<div style="display:none"><textarea name="res_grid" id="res_grid">'+ObjData+"</textarea></div>").appendTo("#hidData"),jQuery("<input type='hidden' name='callfrom' id='callfrom' value='FB' />").appendTo("#hidData")}}if(adult_concat=adult_concat.substring(0,adult_concat.length-1),child_concat=child_concat.substring(0,child_concat.length-1),childage_concat=childage_concat.substring(0,childage_concat.length-1),console.log(tot_rooms+" : "+valid_sel+" : "+opt.HotelId+" : "+rm_chk),0==valid_sel||1==foundnegetiverate)return!1;var displaymsg=langjs[0].L_NoSuffDataEntered+"<br><br>",errorcnt=0;for(var p in roomtypecnt)roomtypecnt[p]>roomtypemax[p]&&(displaymsg+=" [ "+rateplanname[p]+" ] "+langjs[0].L_WrongInvSelec1.replace("{number}",roomtypemax[p])+"<br><br>",errorcnt++);if(0<errorcnt)return swal({title:"",text:displaymsg,type:"warning",showCancelButton:!1,animation:!1}),hideLoadingBar(),!1;if(0==room_selected_cnt){var displaymsg2=langjs[0].L_SelectRooms+"<br><br>";return swal({title:"",text:displaymsg2,type:"warning",showCancelButton:!1,animation:!1}),hideLoadingBar(),!1}if(0<age_empty){hideLoadingBar();var displaymsg2=langjs[0].L_SelectAge,displaymsg3=langjs[0].L_SelectAge2;return showagecnt=0,jQuery(".childageerr").each(function(){if(1==jQuery(this).prev().is(":visible")){var e=jQuery(this).prev().attr("id");jQuery("#"+e).find(".vres-chk-box").each(function(){""==jQuery(this).find("select.agecls").val()&&(jQuery(this).find(".agecls").addClass("error"),jQuery("#"+e).next().html(displaymsg2),jQuery("#err_child_age").show(),jQuery("#err_child_age").text(displaymsg3),jQuery("#err_child_age").addClass("error_tag"),showagecnt++)})}}),!1}if(jQuery("<input type='hidden' name='roomrateunkid' id='roomrateunkid' value='"+store_roomrateunkid.join(",")+"' />").appendTo("#hidData"),jQuery("<input type='hidden' name='roomtypeunkid' id='roomtypeunkid' value='"+store_roomtypeunkid.join(",")+"' />").appendTo("#hidData"),jQuery("<input type='hidden' name='ratetypeunkid' id='ratetypeunkid' value='"+store_ratetypeunkid.join(",")+"' />").appendTo("#hidData"),jQuery("<input type='hidden' name='rowid' id='rowid' value='"+rowrecordid.join(",")+"' />").appendTo("#hidData"),jQuery("<input type='hidden' name='noofrooms' id='noofrooms' value='"+no_rooms+"' />").appendTo("#hidData"),jQuery("<input type='hidden' name='chk_in' value='"+store_chkDt2+"' />").appendTo("#hidData"),jQuery("<input type='hidden' name='chk_out' value='"+resgrid[0][0].CheckoutDate+"' />").appendTo("#hidData"),jQuery("<input type='hidden' name='selectenddate' value='"+store_chkDt+"' />").appendTo("#hidData"),jQuery("<input type='hidden' name='CalDtFormat' value='"+jQuery("#CalDtFormat").val()+"' />").appendTo("#hidData"),jQuery("<input type='hidden' name='Arrdt' value='"+jQuery("#ArrvalDt").val()+"' />").appendTo("#hidData"),jQuery("<input type='hidden' name='range' value='1,"+col_select+"' />").appendTo("#hidData"),jQuery("<input type='hidden' name='rooms' id='rooms' value='"+tot_rooms+"' />").appendTo("#hidData"),jQuery("<input type='hidden' name='MultiplyFactor' value='"+resgrid[0][0].MultiplyFactor+"' />").appendTo("#hidData"),jQuery("<input type='hidden' name='MultiplyCurrSymbl' value='"+resgrid[0][0].MultiplyCurrSymbl+"' />").appendTo("#hidData"),jQuery("<input type='hidden' name='MultiplyCurrCode' value='"+resgrid[0][0].MultiplyCurrCode+"' />").appendTo("#hidData"),jQuery("<input type='hidden' name='adults' value='"+adult_concat+"' />").appendTo("#hidData"),jQuery("<input type='hidden' name='child' value='"+child_concat+"' />").appendTo("#hidData"),jQuery("<input type='hidden' name='childage' value='"+childage_concat+"' />").appendTo("#hidData"),jQuery("<input type='hidden' name='selectedviewoptions' value='0' />").appendTo("#hidData"),jQuery("<input type='hidden' name='CHCurrency2' value='"+jQuery("#selected_curr").val()+"' />").appendTo("#hidData"),jQuery("<input type='hidden' name='_TrackId' value='"+jQuery("#_TrackId").val()+"' />").appendTo("#hidData"),void 0!==$form.attr("target")&&hideLoadingBar(),0<valid_sel)if(void 0!==resgrid[0][0].CheckLiveRoomsAvailability&&"2"==resgrid[0][0].CheckLiveRoomsAvailability){var no_nights=1;no_nights=0==opt.ShowNights&&1==opt.ShowDepart?$("input[id$='eZ_Nights']").val():$("input#eZ_Nights2").val();var param="action=getliveroomavailability&check_in_date="+$("#eZ_chkin").val()+"&nights="+no_nights+"&roomtypeunkid="+rt+"&HotelId="+opt.HotelId+"&noofrooms="+no_rooms+"&rateplanname="+encodeURIComponent(rplanname)+"&calendarDateFormat="+jQuery("#CalDtFormat").val();jQuery.ajax({type:"POST",url:serverurl+"service.php",data:param,success:function(e){var a=JSON.parse(e.trim());if(""!=a&&"Notallow"==a.allowornot){var r=langjs[0].L_SameRoomNABook;hideLoadingBar(),swal({title:"",text:r,type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Yes ! I want to book.",cancelButtonText:"No",closeOnCancel:!1,animation:!1},function(e){if(e)showLoadingBar(),$form.submit();else{var t="";t+=langjs[0].L_SameRoomNAselected+":\n",jQuery.each(a.data,function(e,a){t!=r+" "&&(t+="\n"),"0"==a.totalavailable||0==a.totalavailable?t+=a.bindedrateplan+" => "+langjs[0].L_NOTAVAILABLE:t+=a.bindedrateplan+" => "+a.totalavailable+" "+langjs[0].L_roomsAvailable+".",t+="\n"}),swal({title:"",text:t,type:"warning",showCancelButton:!1,animation:!1})}})}else showLoadingBar(),$form.submit()}})}else $form.submit()});for(var _isfacebookshare=!1,keyname="share_facebook_"+opt.HotelId,name=keyname+"=",ca=document.cookie.split(";"),cookie_value="",i=0;i<ca.length;i++){for(var c=ca[i];" "==c.charAt(0);)c=c.substring(1);0==c.indexOf(name)&&(cookie_value=c.substring(name.length,c.length))}"true"==cookie_value.trim()&&(_isfacebookshare=!0);var issecuresite=!1;-1!=serverurl.indexOf("https")&&(issecuresite=!0),jQuery("#facebooksharefrm").attr("action","https://live.ipms247.com/booking/facebooksharereward.php?issecuresite="+issecuresite),_isfacebookshare?jQuery("#special_offers").hide():jQuery("#special_offers").show(),jQuery(".likebtn").click(function(){methods.checkPromoCodeValidity(opt)}),jQuery(".slider_popup .cls_btn").click(function(e){e.stopPropagation(),jQuery(".slider_popup").removeClass("slider-right")}),jQuery("#noroomresetallfilters").on("click",function(){jQuery("#reset_filter").click()}),$("#rescontactusform").click(function(){if(realpersonloaded)jQuery("#contactus_form .realperson-regen").click();else{var e=opt.serverurl+"templates/resui/js/";$.getScript(e+"jquery.plugin.js"),$.getScript(e+"jquery.realperson.js").done(function(e,a){$("#defaultReal").realperson(),realpersonloaded=!0}).fail(function(e,a,t){$("#rescontactusform").click()})}$(".error:input").removeClass("error"),$("#phoneno-error").remove(),$("#fromemail-error").remove(),$("#contactuserror").hide(),$("#invalidcaptchamsg").hide()}),$(".disppromodesc").each(function(){var e=$(this).html(),a=jQuery(this).next("a");a.tipso({TextAlign:"left",tooltipHover:!0,AddClass:"spl_offer"}),a.tipso("update","content",e)}),jQuery("#re_pricecheckiframe").on("load",function(){if(""==opt.WebDefaultCurrency){var e=document.getElementById("re_pricecheckiframe").contentWindow.$("div.price-widget-wrap");e.show(),document.getElementById("re_pricecheckiframe").contentWindow.$("#OTARates >ul >li").length<1&&e.hide(),jQuery("#re_pricecheckiframe").hide()}});var eventMethod=window.addEventListener?"addEventListener":"attachEvent",eventer=window[eventMethod],messageEvent="attachEvent"==eventMethod?"onmessage":"message";eventer(messageEvent,function(e){var a=e.data;"triptease.onboard.eval"!=a.type&&"triptease.onboard.response"!=a.type&&"tt_local_storage_remove_item"!=a.type&&"tt_local_storage_set_item"!=a.type&&(console.log("received message - "+a),2==(a=a.split("^")).length&&(jQuery("#re_pricecheckiframe").animate({height:a[0],width:a[1]},200),jQuery("#re_pricecheckiframe").show(500)))},!1)}else hideLoadingBar();$(".availability_calender").click(function(){var e="";if(jQuery(this).next().next().hasClass("index_avcal")){var a=parseInt(jQuery(this).next().next().val());null!=resgrid[0][a].promotion&&1==resgrid[0][a].promotion&&null!=resgrid[0][a].promotioncode&&(e=resgrid[0][a].promotioncode)}jQuery("#avail_cal_prmcode").val(e),$("input[id$='Jumpdt']").datepicker({dateFormat:opt.CalDtFormat,defaultDate:opt.CalDefaultDt,minDate:opt.CalMinDate,maxDate:opt.CalMaxDate}),$("#Jumpdt").keydown(function(e){var a=$.datepicker._getInst(e.target).dpDiv.is(".ui-datepicker-rtl");switch(e.keyCode){case 37:$.datepicker._adjustDate(e.target,a?1:-1,"D");break;case 38:$.datepicker._adjustDate(e.target,-7,"D");break;case 39:$.datepicker._adjustDate(e.target,a?-1:1,"D");break;case 40:e.preventDefault(),$.datepicker._adjustDate(e.target,7,"D")}$(".ui-datepicker-days-cell-over").find("a").css("background-color","#eeeeee")});var t=$("#eZ_chkin").val(),r=$(this).next(".avail_cal_d").val(),l=$(this).next(".avail_cal_d").next(".avail_cal_d_roomtype").val();""!=l&&void 0!==l&&$("#avairoomtype").val(l);var i=$(this).next(".avail_cal_d").hasClass("special");""!=r&&void 0!==r?(methods._availabilitycal(opt,t,r,i,""),$("#avail_cal_d_dt").val(r),i&&$("#avail_cal_d_dt").addClass("special")):methods._availabilitycal(opt,t,"","",""),$("input[id$='Jumpdt']").val(t)}),$("input[id$='Jumpdt']").change(function(){var e=$("#avairoomtype").val();methods._availabilitycal(opt,jQuery(this).val(),jQuery("#avail_cal_d_dt").val(),jQuery("#avail_cal_d_dt").hasClass("special"),"",e)}),$("#avairoomtype").change(function(){var e=$("input[id$='Jumpdt']").val();methods._availabilitycal(opt,e,jQuery("#avail_cal_d_dt").val(),jQuery("#avail_cal_d_dt").hasClass("special"),"",this.val)}),jQuery.fn.next_dt=function(){$("#next_dt_clk").click(function(){$("input[id$='Jumpdt']").val($("#next_dt").val()),$("input[id$='Jumpdt']").change()})},dg=jQuery,dg.fn.prev_dt=function(){$("#prev_dt_clk").click(function(){var e=new Date;e.setDate(e.getDate()+opt.CalMinDate);var a=!1;!($.datepicker.parseDate(opt.CalDtFormat,dg("#Jumpdt").val())<=e)&&$.datepicker.parseDate(opt.CalDtFormat,dg("#prev_dt").val())<e&&(a=!0);var t=$.datepicker.parseDate(opt.CalDtFormat,dg("#prev_dt").val());t.setDate(t.getDate()-12);var r=$.datepicker.parseDate(opt.CalDtFormat,dg("#prev_dt").val());r.setDate(r.getDate()+12);var l=$.datepicker.formatDate(opt.CalDtFormat,t),i=$.datepicker.formatDate(opt.CalDtFormat,r);$("input[id$='Jumpdt']").val(dg("#prev_dt").val()),methods._availabilitycal(opt,$("input[id$='Jumpdt']").val(),dg("#avail_cal_d_dt").val(),dg("#avail_cal_d_dt").hasClass("special"),"prev"),$("#prev_dt").val(l),$("#next_dt").val(i),a&&dg("#Jumpdt").val($.datepicker.formatDate(opt.CalDtFormat,e))})},$("#enquirenotavail").click(function(){getUrl=opt.serverurl+"enquire-"+opt.HotelId,$.ajax({url:getUrl,type:"POST",dataType:"html",data:{HotelId:opt.HotelId,roomtypeid:"",ratetypeid:"",specialunkid:""},error:function(){},beforeSend:function(){showLoadingBar(),$("#mainenq").html("")},success:function(e){hideLoadingBar(),$("#mainenq").html(e)},complete:function(){var e=opt.serverurl+"/templates/resui/js/";$.getScript(e+"jquery.plugin.js"),$.getScript(e+"jquery.realperson.js",function(e,a,t){$("#defaultReal_enq").realperson()}),jQuery("input[id$='eqm_checkin_date']").attr("readOnly","true"),jQuery("input[id$='eqm_checkin_date']").datepicker({minDate:opt.CalMinDate,dateFormat:opt.CalDtFormat,onSelect:function(e){jQuery("input[id$='eqm_checkout_date']").datepicker("option","minDate",e);var a=new Date(jQuery.datepicker.parseDate(opt.CalDtFormat,jQuery("#eqm_checkin_date").val()));a.setDate(a.getDate()+parseInt(opt.WebAvailabilityCutOffDay)),a=jQuery.datepicker.formatDate(opt.CalDtFormat,a),jQuery("#eqm_checkout_date").val(a);var t=jQuery("input[id$='ArrvalDt_2']").val(),r=(t=new Date(jQuery.datepicker.parseDate(opt.CalDtFormat,t)),new Date(jQuery.datepicker.parseDate(opt.CalDtFormat,jQuery("#eqm_checkin_date").val())));if(r.setDate(r.getDate()),r&&t){var l=0;l=Math.round((r.getTime()-t.getTime())/864e5)}jQuery("#eqm_checkout_date").datepicker("option","minDate",l+1)}}),jQuery("input[id$='eqm_checkout_date']").attr("readOnly","true"),jQuery("input[id$='eqm_checkout_date']").datepicker({minDate:opt.CalMinDate+1,dateFormat:opt.CalDtFormat})}})})}catch(e){hideLoadingBar(),hideCheckavalabilityLoadingBar(),console.log("Error - _loadDefaultJsInit - "+e.message)}var dg},_check_availability_clicked:function(e){try{if(methods._checksession(e,""),0==jQuery("#trackbook_btnclicked").val()&&1==jQuery("#trackbtnclicked").val()){if(startDate=$.datepicker.parseDate(e.CalDtFormat,$("#eZ_chkin").val()),endDate=$.datepicker.parseDate(e.CalDtFormat,$("#eZ_chkout").val()),selectednights=jQuery("Select[id$='eZ_Nights']").val(),0==e.ShowNights&&1==e.ShowDepart)var a=(endDate-startDate)/864e5;else a=selectednights;var t=js_stripslashes(langjs[0].lblHangon),r=js_stripslashes(langjs[0].lblForgotcheckavailability),l=js_stripslashes(langjs[0].L_Pleaseclickchkava);return curr_control_id="room",methods._setIframeSweetAlertPosition(e,curr_control_id),swal({title:t,text:r,type:"warning",confirmButtonText:l,showCancelButton:!1,confirmButtonColor:"#DD6B55",animation:!1,closeOnConfirm:!(90<a)},function(){90<a?jQuery("#book").trigger("click"):methods._loadGrid(e)}),hideLoadingBar(),!1}}catch(e){hideLoadingBar(),hideCheckavalabilityLoadingBar(),console.log("Error - _check_availability_clicked - "+e.message)}},_showdefaultCurrency:function(e){try{if(void 0!==resgrid[0]&&null!=resgrid[0]&&void 0!==resgrid[0][0]){var a="";""==resgrid[0][0].MultiplyCurrCode1?($(".currname").text(resgrid[0][0].MultiplyCurrCode),a=resgrid[0][0].MultiplyCurrCode,$(".currsym").text(resgrid[0][0].MultiplyCurrSymbl),$("#selected_curr").val(resgrid[0][0].MultiplyCurrCode),resgrid[0][0].MultiplyCurrCode!=resgrid[0][0].MultiplyCurrSymbl?$(".currsymbol").text(resgrid[0][0].MultiplyCurrSymbl):$(".currsymbol").text(""),$("#spancurrsign").text(resgrid[0][0].MultiplyCurrSymbl)):($(".currname").text(resgrid[0][0].MultiplyCurrCode1),a=resgrid[0][0].MultiplyCurrCode1,$(".currsym").text(resgrid[0][0].MultiplyCurrSymbl1),$("#selected_curr").val(resgrid[0][0].MultiplyCurrCode1),resgrid[0][0].MultiplyCurrCode1!=resgrid[0][0].MultiplyCurrSymbl1?$(".currsymbol").text(resgrid[0][0].MultiplyCurrSymbl1):$(".currsymbol").text(""),$("#spancurrsign").text(resgrid[0][0].MultiplyCurrSymbl1)),""!=resgrid[0][0].MultiplyCurrCode1?methods._getCurrencyValue(e,resgrid[0][0].MultiplyCurrCode,resgrid[0][0].MultiplyCurrCode1,resgrid[0][0].decimal):methods._setSelectedCurrency(e,a)}}catch(e){console.log("_showdefaultCurrency Error "+e)}},_setIframeSweetAlertPosition:function(e,a){try{if(set_control_id=jQuery(".sweet-alert"),void 0!==top.frames.editframe){var t=parseInt(jQuery("#"+a).offset().top),r=parseInt(set_control_id.height());if(parseInt(jQuery("#re_main_div").height())-t<r)var l=t-r;else l=t+50;jQuery(".sweet-alert").css("top",l),set_control_id.css("top",l),set_control_id.scrollTop()}}catch(e){console.log("Error - _setIframeSweetAlertPosition- "+e.message)}},_setIframePopupPosition:function(e,a,t){try{if(void 0!==top.frames.editframe){var r=parseInt(jQuery("#"+a).offset().top),l=parseInt(t.height());if(parseInt(jQuery("#re_main_div").height())-r<l)var i=r-l;else i=r+50;jQuery(".modal.fade.in").css("top",i),t.css("top",i),t.scrollTop()}}catch(e){console.log("Error - _setIframePopupPosition- "+e.message)}},_setIframeBookNowSummary:function(){try{if(void 0!==top.frames.editframe){var a=jQuery(".vres-bookdiv").position().top;parent.postMessage({action:"TOP",top:a},"*")}}catch(e){console.log("Error - _setIframeBookNowSummary- "+e.message);a=jQuery(".vres-bookdiv").position().top;parent.postMessage({action:"TOP",top:a},"*")}},_setIframeEditRecord:function(a){try{void 0!==top.frames.editframe&&parent.postMessage({action:"EDIT",top:a},"*")}catch(e){console.log("Error - _setIframeEditRecord- "+e.message),parent.postMessage({action:"EDIT",top:a},"*")}},_setFilterHeight:function(e){try{if(void 0!==top.frames.editframe){var a=parseInt(jQuery(".filter-div").height())/2,t=jQuery("#re_main_div").height(),r=parseInt(a)+parseInt(t)-100;parent.postMessage(r,"*")}}catch(e){console.log("Error - _setFilterHeight- "+e.message)}},_setExternalIframeHeight:function(e){try{var a=e.serverurl+"templates/resui/css/";if(void 0!==top.frames.editframe){var t=jQuery("#re_main_div").height();parent.postMessage(t,"*");var r=top.frames.editframe.document,l=(top.frames.editframe,r.getElementsByTagName("body")[0]);if(!document.getElementById("uiCss")){var i=r.createElement("link");i.setAttribute("rel","stylesheet"),i.setAttribute("type","text/css"),i.setAttribute("href",a+"resframecss.css"),i.setAttribute("ID","uiCss"),l.appendChild(i)}}}catch(e){console.log("_setExternalIframeHeight"+e)}},_getCountryName:function(e){try{getURL=e.serverurl+"service.php?HotelId="+e.HotelId,$.ajax({url:getURL,type:"POST",data:{action:"Getcountryname",HotelId:e.HotelId},success:function(e){jQuery("#suggested_curr").val(jQuery.trim(e));jQuery.trim(e)},complete:function(e){}})}catch(e){console.log("Error in _getCountryName"+e)}},_getCurrencyValue:function(r,l,i,o){var e=r.serverurl+"extratabsdetails-"+r.HotelId+"-"+l+"-"+i;try{$.ajax({url:e,type:"POST",data:{},dataType:"html",error:function(){},beforeSend:function(){showCheckavalabilityLoadingBar(),$("[id^=delete_row_]").each(function(){jQuery(this).parent().remove();var e=jQuery(this).attr("id").split("delete_row_");jQuery("[id^=room_row_"+e[1]+"_]").each(function(){jQuery("#rooms_"+e[1]).parent().find(".remove_field_button").click()})}),$(".strike").each(function(){jQuery(this).hide()}),$(".avg_strike").each(function(){jQuery(this).hide()}),$(".rmamt_cls").each(function(){jQuery(this).next().show(),jQuery(this).hide()}),$(".avg_cls").each(function(){jQuery(this).next().show(),jQuery(this).hide()}),$(".tot_currency_display_pre_cls,.up_strike_currency_display_pre_cls").each(function(){jQuery(this).text("")}),$(".tot_currency_display_post_cls,.up_strike_currency_display_post_cls").each(function(){jQuery(this).text("")}),$(".strike_currency_display_pre_cls,.upavg_strike_currency_display_pre_cls").each(function(){jQuery(this).text("")}),$(".strike_currency_display_post_cls,.upavg_strike_currency_display_post_cls").each(function(){jQuery(this).text("")});var e=js_stripslashes(langjs[0].L_Loading);$(".currency_adrm").each(function(){jQuery(this).text(e),0==jQuery(this).hasClass("adrm-wrap2")&&jQuery(this).addClass("adrm-wrap-close")}),$(".hiderate_info").each(function(){jQuery(this).hide()})},complete:function(e){if(hideCheckavalabilityLoadingBar(),void 0!==resgrid[0]){var a=jQuery.trim(e.responseText).split("|");resgrid[0][0].MultiplyFactor=a[0],0!=a[0]&&null!=a[0]||swal({title:"",text:"Sorry , Couldn't find conversion rate for selected currency. Please try again later.",type:"error",animation:!0,closeOnConfirm:!0},function(){jQuery("#CHCurrency > li[value="+l+"]").click(),jQuery("#CHSuggested > li[value="+l+"]").click()}),""!=a[1]?resgrid[0][0].MultiplyCurrSymbl=a[1]:resgrid[0][0].MultiplyCurrSymbl=resgrid[0][0].MultiplyCurrCode;methods.setCurrencyValue(r,resgrid[0][0].MultiplyFactor,o,i);resgrid[0][0].MultiplyCurrSymbl!=resgrid[0][0].currency&&(r.ResUIshowfilterPrice=!1,jQuery("#filter_price").hide()),$(".rmamt_cls").each(function(){jQuery(this).next().hide(),jQuery(this).show()}),$(".strike").each(function(){jQuery(this).hasClass("hidethis_row")||jQuery(this).show()}),$(".avg_cls").each(function(){jQuery(this).next().hide(),jQuery(this).show()}),$(".avg_strike").each(function(){jQuery(this).show()}),$(".hiderate_info").each(function(){jQuery(this).show()});var t=js_stripslashes(langjs[0].L_Add_Room);$(".currency_adrm").each(function(){jQuery(this).text(t),jQuery(this).removeClass("adrm-wrap-close")})}$("#CHCurrency li").each(function(){var e=jQuery("#selected_curr").val();if(1==jQuery(this).hasClass(e)){var a=jQuery(this).html().split("<a>");jQuery("#CHSelection").html('<li class="selected_country_currency"><label>'+a[1]+"</label></li>");var t=$("#searchcurrency").val();console.log("Currency Search"+t),$(".curr_select_suggest").show(),null!=t&&$("#CHCurrency li").each(function(){var e=$(this);0<=e.find("a").text().trim().toUpperCase().indexOf(t.toUpperCase())?(e.show(),$("#labelcur").show()):e.hide()})}}),methods._pricewidgetreload(r,i)},success:function(e){console.log("AJAX Grid - success()")}})}catch(e){console.log("Error in getCurrencyValue"+e),hideLoadingBar()}},setCurrencyValue:function(opt,multiplyfactor,_decimalplaces,_toCurrCode){console.log("setCurrencyValue=================== "+_toCurrCode);var id="",day=1;jQuery("[id^=col_]").each(function(){id!=jQuery(this).attr("id")&&(day=1),id=jQuery(this).attr("id");var grate=id.split("_"),nm=eval("resgrid[0]["+parseInt(grate[1])+"].o_day_base_"+day),extra_ad_rt=eval("resgrid[0]["+parseInt(grate[1])+"].tmp_o_day_extra_adult_"+day),extra_ch_rt=eval("resgrid[0]["+parseInt(grate[1])+"].tmp_o_day_extra_child_"+day),istax=0;"1"==eval("resgrid[0]["+parseInt(grate[1])+"].ShowTaxInclusiveExclusiveSettings")&&"[0]"!=eval("resgrid[0]["+parseInt(grate[1])+"].Tax_"+grate[2])&&(istax=1,extra_ad_rt=eval("resgrid[0]["+parseInt(grate[1])+"].dis_day_extra_adult_"+day),extra_ch_rt=eval("resgrid[0]["+parseInt(grate[1])+"].dis_day_extra_child_"+day));var mrates=parseFloat(nm)*parseFloat(multiplyfactor),ex_adrates=parseFloat(extra_ad_rt)*parseFloat(multiplyfactor),ex_chrates=parseFloat(extra_ch_rt)*parseFloat(multiplyfactor);1==istax?(jQuery(this).find("span.rate2").text(addCommas(methods._applyRoundOff(mrates).toFixed(_decimalplaces))),jQuery(this).find("span.extraacurrval").text(addCommas(methods._applyRoundOff(ex_adrates).toFixed(_decimalplaces))),jQuery(this).find("span.extraccurrval").text(addCommas(methods._applyRoundOff(ex_chrates).toFixed(_decimalplaces)))):(jQuery(this).find("span.rate2").text(addCommas(mrates.toFixed(_decimalplaces))),jQuery(this).find("span.extraacurrval").text(addCommas(ex_adrates.toFixed(_decimalplaces))),jQuery(this).find("span.extraccurrval").text(addCommas(ex_chrates.toFixed(_decimalplaces)))),$("#spancurrsign").text(resgrid[0][0].MultiplyCurrSymbl),$("#spancurr").text(_toCurrCode),$(".currname").text(_toCurrCode),$("#rate_spancurr").text(_toCurrCode),$("#rate_spancurrsign").text(resgrid[0][0].MultiplyCurrSymbl),resgrid[0][0].MultiplyCurrSymbl!=_toCurrCode?$(".currsymbol").text(resgrid[0][0].MultiplyCurrSymbl):$(".currsymbol").text(""),$("#selected_curr").val(_toCurrCode);var nm1=eval("resgrid[0]["+parseInt(grate[1])+"].before_discount_tax_day_base_"+day);if(0<nm1){var mrates1=parseFloat(nm1)*parseFloat(multiplyfactor);1==istax?jQuery(this).find("span.strikethrough").text(addCommas(methods._applyRoundOff(mrates1).toFixed(_decimalplaces))):jQuery(this).find("span.strikethrough").text(addCommas(mrates1.toFixed(_decimalplaces)))}var nm_avg_per_night_strike=eval("resgrid[0]["+parseInt(grate[1])+']["MinAvgPerNightDiscount"]'),mrates_avg_night_strike=parseFloat(nm_avg_per_night_strike)*parseFloat(multiplyfactor);1==istax?jQuery("#average_per_night_blk_"+parseInt(grate[1])).find("span#rmamt_strike_avg_night").text(addCommas(methods._applyRoundOff(mrates_avg_night_strike).toFixed(_decimalplaces))):jQuery("#average_per_night_blk_"+parseInt(grate[1])).find("span#rmamt_strike_avg_night").text(addCommas(mrates_avg_night_strike.toFixed(_decimalplaces)));var nm_avg_per_night=eval("resgrid[0]["+parseInt(grate[1])+']["MinAvgPerNight"]'),mrates_avg_night=parseFloat(nm_avg_per_night)*parseFloat(multiplyfactor);1==istax?jQuery("#average_per_night_blk_"+parseInt(grate[1])).find("span#rmamt_avg_night").text(addCommas(methods._applyRoundOff(mrates_avg_night).toFixed(_decimalplaces))):jQuery("#average_per_night_blk_"+parseInt(grate[1])).find("span#rmamt_avg_night").text(addCommas(mrates_avg_night.toFixed(_decimalplaces))),day++}),methods._setSelectedCurrency(opt,_toCurrCode),methods.setSelectedCurrency_configured(opt,_toCurrCode),void 0!==resgrid[0]&&null!=resgrid[0]&&methods._calculateLongtayPrice(opt,"","","")},_setSelectedCurrency:function(e,a){try{$("ul#CHSelection li").each(function(){jQuery(this).removeClass("selected_country_currency")}),$("ul#CHSelection li").find(".countrycode_li").each(function(){a==jQuery.trim(jQuery(this).text())&&jQuery(this).parent().parent().addClass("selected_country_currency")})}catch(e){console.log("Error in _setSelectedCurrency"+e),hideLoadingBar()}},setSelectedCurrency_configured:function(e,a){try{$("ul#CHCurrency_configured li").each(function(){jQuery(this).removeClass("selected_country_currency")}),$("ul#CHCurrency_configured li").find(".countrycode_li").each(function(){a==jQuery.trim(jQuery(this).text())&&jQuery(this).parent().parent().addClass("selected_country_currency")})}catch(e){console.log("Error in _setSelectedCurrency1"+e),hideLoadingBar()}},_setThemes:function(e){try{console.log("_setThemes"),$("body").css("font-family",e.BodyFontFamily);var a=e.BodyFontFamily.split(",");if(""!=e.BodyFontFamily){var t=a[0].replace(/\'/g,"").replace(" ","");$("body").addClass(t)}$(".vres_header").css("background",e.HeaderBgColor1),$(".vres-logo a h2 , .vres-navright ul.vres-navbar > li a").css("color",e.HeaderFontColor),$(".vres-navright ul.vres-navbar > li.vres-hdrop-box .drop-submenu ul li a").css("color","#000000");var r=e.HeaderBorderColor.split("#"),l=methods._hextorgb(r[1]);$(".vres-navright ul.vres-navbar > li").css("border-left","1px solid rgba("+l.r+","+l.g+","+l.b+",0.2)"),$(".vres-specialoffer").css("background",e.NeedHelpBackgroundColor),$(".vres-specialoffer p b").css("color",e.NeedHelpTextColor);var i=e.NeedHelpTextColor.split("#"),o=methods._hextorgb(i[1]);$(".vres-specialoffer p").css("color","rgba("+o.r+","+o.g+","+o.b+",0.7)"),methods._setCalenderCss(e),$(".vres-cnt-card .card-list h3").css("color",e.ResUIRoomNameTextColor),$(".vrmprice strong").css("color",e.ResUIRateTextColor),$(".filter-btn1").css("color",e.ResUIRateTextColor),$(".vres_room_info").css({color:e.ResUIAddRoomBackgroundColor}),$(".gallerybtn").css("background",e.ResUIAddRoomBackgroundColor),$(".vres-photogroup-btn").css({color:e.ResUIAddRoomTextColor}),$("#filter_gr a.gr-cnt.selected").css({background:e.ResUIAddRoomBackgroundColor,color:e.ResUIAddRoomTextColor,"border-color":e.ResUIAddRoomBackgroundHoverColor}),$(".promo-popUp").css({"border-top":"4px solid "+e.ResUIAddRoomBackgroundColor}),$(".vres-roombooked ul li span a").css("color",e.ResUIRoomNameTextColor),$(".vres-helpup .vres-helpbtn").css("background",e.ResUIHelpBoxBackColor),$(".vres-helpup .vres-helpbtn").css("border","6px solid "+e.ResUIHelpBoxBorderColor),$(".vres-helpup .vres-helpbtn").css({color:e.ResUIHelpBoxTextColor}),$(".vres-helpdetail").css({"border-color":e.ResUIHelpBoxBackColor}),$(".vres-modal-header a.cls").css({color:e.HeaderFontColor});var s="<style>";s+=".vres-helpdetail::after{border-color:rgba(0, 0, 0, 0) rgba(0, 0, 0, 0) "+e.ResUIHelpBoxBackColor+" !important}",s+=".show-price-wrap .shPwrap a.active::before{background: "+e.ResUIRateTextColor+" !important}",s+=".show-price-wrap .shPwrap a.active:after{border-left:6px solid rgba(0, 0, 0, 0);border-bottom:6px solid rgba(0, 0, 0, 0);border-top: 6px solid "+e.ResUIRateTextColor+";border-right:6px solid rgba(0, 0, 0, 0);}",s+=".promo-popUp::after{border-color:rgba(0, 0, 0, 0) rgba(0, 0, 0, 0) "+e.ResUIAddRoomBackgroundColor+" !important;}",s+=".availcal-head{background:"+e.HeaderBgColor1+" !important; color:"+e.HeaderFontColor+" !important;}",s+=".vres-navright ul.vres-navbar > li.open > a,.vres-navright ul.vres-navbar > li .vres-cur-label.open > a{color:"+e.HeaderBgColor1+" !important;}",s+=".vres-modal-header{background:"+e.HeaderBgColor1+" !important;}",s+=".vres-modal-header h3,.vres-modal-header p,.vres-modal-header p.vrmprice strong,.vres-modal-header p.vrmprice .strike,.vres-modal-header p.vrmprice small{color:"+e.HeaderFontColor+" !important}",s+=".tab-active a,.log-form > form > a.forgo-pass{color: "+e.ResUIRoomNameTextColor+" !important;}",s+=".tab-active{box-shadow: 0 -3px 0 "+e.ResUIRoomNameTextColor+" inset !important;}",s+=".subhead-btn-bg,.subhead-btn{background :"+e.ResUIAvailabilityBackgroundColor+" !important;color:"+e.ResUIAvailabilityTextColor+" !important;}",s+=".ui-datepicker-month,.ui-datepicker-year{color: "+e.CalHeaderFontColor+" !important;}",s+=".bt-primary,.filter-div a{background:"+e.ResUIAddRoomBackgroundColor+" !important;color:"+e.ResUIAddRoomTextColor+" !important;}",s+=".bt-primary:hover,.filter-div a:hover{background:"+e.ResUIAddRoomBackgroundHoverColor+" !important;}",s+=".vrt-links a,.vres_availcal_mobile a i::before{color:"+e.ResUIRoomInfoEnquireTextColor+" !important}",s+=".offr_bg{background-color: "+e.NeedHelpBackgroundColor+" !important;}",$(s+="</style>").appendTo("head");var d=e.HeaderBgColor1.split("#");l=methods._hextorgb(d[1]);$(".chkimg_notfound .vres_bhk_pos .full-bar-wrapper").css("background",e.HeaderBgColor2),jQuery("#img_banner_div").is(":hidden")&&($(".vres_bhk_pos .full-bar-wrapper .input-daterange label p").css("color",e.HeaderFontColor2),$(".vres_promo-btn").css("color",e.HeaderFontColor2))}catch(e){hideLoadingBar(),hideCheckavalabilityLoadingBar(),console.log("Error - _setThemes - "+e.message)}},_hextorgb:function(e){var a=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return a?{r:parseInt(a[1],16),g:parseInt(a[2],16),b:parseInt(a[3],16)}:null},_initDatePicker:function(d){try{if(1==d.Calinit){$("input[id$='eZ_chkin']").focus(function(){$(this).addClass("highlight_cal")}),$("input[id$='eZ_chkin']").focusout(function(){$(this).removeClass("highlight_cal")}),$("input[id$='eZ_chkout']").focus(function(){$(this).addClass("highlight_cal")}),$("input[id$='eZ_chkout']").focusout(function(){$(this).removeClass("highlight_cal")});var e=2;if("223"==d.ADABECountry)e=1;0==d.ShowNights&&1==d.ShowDepart&&$("input[id$='eZ_chkout']").datepicker({defaultDate:d.CalDefaultDt,firstDay:7,numberOfMonths:e,minDate:d.CalMinDate+1,maxDate:d.CalMaxDate,dateFormat:d.CalDtFormat,onSelect:function(e){jQuery("#trackbtnclicked").val(1),jQuery("#trackbook_btnclicked").val(0);var a=$(this).datepicker("getDate"),t=$.datepicker.formatDate("DD, MM d, yy",a);$(this).attr("aria-label",t);var r=jQuery("input[id$='ArrvalDt_2']").val(),l=(r=new Date(jQuery.datepicker.parseDate(d.CalDtFormat,r)),new Date(jQuery.datepicker.parseDate(d.CalDtFormat,jQuery("#eZ_chkin").val())));if(l.setDate(l.getDate()),l&&r){var i=0;i=Math.round((l.getTime()-r.getTime())/864e5)}jQuery("#eZ_chkout").datepicker("option","minDate",i+1),methods._setChkNight()},onClose:function(){var e=$("#ui-datepicker-div");$(e).off("keydown"),$(".chk-avail").focus()}},$.datepicker.regional.nl);$("input[id$='eZ_chkin']").datepicker({defaultDate:d.CalDefaultDt,firstDay:7,numberOfMonths:e,minDate:d.CalMinDate,maxDate:d.CalMaxDate,dateFormat:d.CalDtFormat,onSelect:function(e){jQuery("#trackbtnclicked").val(1),jQuery("#trackbook_btnclicked").val(0);var a=$(this).datepicker("getDate");dayName=$.datepicker.formatDate("DD",a),$("#arrivalday").text("("+dayName+")");var t=$.datepicker.formatDate("DD, MM d, yy",a);if($(this).attr("aria-label",t),0==d.ShowNights&&1==d.ShowDepart){var r=new Date(jQuery.datepicker.parseDate(d.CalDtFormat,jQuery("#eZ_chkin").val()));r.setDate(r.getDate()+parseInt(d.WebAvailabilityCutOffDay));var l=$.datepicker.formatDate("DD, MM d, yy",r);r=jQuery.datepicker.formatDate(d.CalDtFormat,r),jQuery("input[id$='eZ_chkout']").val(r),jQuery("input[id$='eZ_chkout']").attr("aria-label",l);var i=jQuery("input[id$='ArrvalDt_2']").val(),o=(i=new Date(jQuery.datepicker.parseDate(d.CalDtFormat,i)),new Date(jQuery.datepicker.parseDate(d.CalDtFormat,jQuery("#eZ_chkin").val())));if(o.setDate(o.getDate()),o&&i){var s=0;s=Math.round((o.getTime()-i.getTime())/864e5)}jQuery("#eZ_chkout").datepicker("option","minDate",s),methods._setChkNight()}methods._setCalenderCss(d),0==d.ShowNights&&d.ShowDepart,navigator.userAgent.match(/(iPhone)/)||$("input[id$='eZ_chkout']").focus(0)},onClose:function(){var e=$("#ui-datepicker-div");$(e).off("keydown")},onChangeMonthYear:function(){}},$.datepicker.regional.nl),$("#eZ_chkin,#eZ_chkout").keydown(function(e){var a=$.datepicker._getInst(e.target).dpDiv.is(".ui-datepicker-rtl");switch(e.keyCode){case 37:$.datepicker._adjustDate(e.target,a?1:-1,"D");break;case 38:$.datepicker._adjustDate(e.target,-7,"D");break;case 39:$.datepicker._adjustDate(e.target,a?-1:1,"D");break;case 40:e.preventDefault(),$.datepicker._adjustDate(e.target,7,"D")}$(".ui-datepicker-days-cell-over").find("a").css("background-color","#eeeeee")});var a=$("input[id$='eZ_chkin']").datepicker("getDate");dayName=$.datepicker.formatDate("DD",a),$("#arrivalday").text("("+dayName+")"),$("#CalDtFormat").val(d.CalDtFormat),methods._setCalenderCss(d),$("input[id$='eZ_chkin'],.ui-datepicker-trigger,.ui-datepicker-next,.ui-datepicker-prev,.ui-datepicker-month,.ui-datepicker-year").on("click",function(){methods._setCalenderCss(d)}),$(".ui-datepicker-month,.ui-datepicker-year").on("change",function(){methods._setCalenderCss(d)}),$(".ui-datepicker-trigger").button().click(function(){methods._setCalenderCss(d)});var t=new Date,r=$("input[id$='currentdate_hotel']").val(),l=(r=new Date(jQuery.datepicker.parseDate("yy-mm-dd",r)),$("#eZ_chkin").datepicker("option","minDate")),i=0;0<(i=Math.round((r.getTime()-t.getTime())/864e5))&&($("#eZ_chkin").datepicker("option","minDate",parseInt(i)+parseInt(l)),0==d.ShowNights&&1==d.ShowDepart&&$("#eZ_chkout").datepicker("option","minDate",parseInt(i)+parseInt(l)+1)),$(window).width()<767&&($("#eZ_chkin").datepicker("option","numberOfMonths",1),$("#eZ_chkout").datepicker("option","numberOfMonths",1));var o=$(window).width();$(window).on("resize",function(){$(window).width()!==o&&($(window).width()<767?($("#eZ_chkin").datepicker("option","numberOfMonths",1),$("#eZ_chkout").datepicker("option","numberOfMonths",1)):($("#eZ_chkin").datepicker("option","numberOfMonths",e),$("#eZ_chkout").datepicker("option","numberOfMonths",e)))})}var s=$("#eZ_chkin").datepicker("getDate"),n=$("#eZ_chkout").datepicker("getDate"),c=$.datepicker.formatDate("DD, MM d, yy",s);$("#eZ_chkin").attr("aria-label",c);var _=$.datepicker.formatDate("DD, MM d, yy",n);$("#eZ_chkout").attr("aria-label",_),1==e&&methods.dayTripper()}catch(e){hideLoadingBar(),hideCheckavalabilityLoadingBar(),console.log("Error - _initDatePicker - "+e.message)}},_setChkNight:function(e){jQuery("input[id$='eZ_Nights']").val(parseInt(methods._setCheckoutNight(e)))},_setCheckoutNight:function(e){var a=jQuery("input[id$='eZ_chkin']").datepicker("getDate"),t=jQuery("input[id$='eZ_chkout']").datepicker("getDate");if(t&&a){var r=0;r=Math.round((t.getTime()-a.getTime())/864e5)}return r},_setCalenderCss:function(e){$(".ui-datepicker-month").css({color:e.CalHeaderFontColor}),$(".ui-datepicker-year").css({color:e.CalHeaderFontColor})},_setImages:function(a,e){try{jQuery("#img_banner_div").show(),jQuery("<img name='imglogo' alt='banner bg' id='imglogo' src='"+e+"' />").appendTo("div#img_banner_div"),jQuery("#chk_wrapper").removeClass("chkimg_notfound"),jQuery("#img_banner_div").removeClass("vres_bnr"),$("#imglogo").error(function(){jQuery("#img_banner_div").html(""),jQuery("#img_banner_div").hide(),jQuery("#chk_wrapper").removeClass("chkimg_notfound").addClass("chkimg_notfound"),jQuery("#img_banner_div").removeClass("vres_bnr").addClass("vres_bnr"),jQuery(".vres_bhk_pos .full-bar-wrapper").css({width:"100%"});var e="res_Logo_"+a.HotelId;document.cookie=e+"="}),void 0!==e&&""!=e&&methods._setOtherThemes(a)}catch(e){hideLoadingBar(),hideCheckavalabilityLoadingBar(),console.log("Error - _setImages - "+e.message)}},_setDeviceWiseImages:function(t,r,l,e){try{r=null==r?"":r,l=null==l?"":l,e=null==e?"":e,jQuery("#img_banner_div").show(),jQuery("#img_banner_div").addClass("vres-responsive-bnr"),""==!r?jQuery("<img id='imglogotab' alt='banner bg' class='hide sm-show' src='"+r+"' />").appendTo("div#img_banner_div"):jQuery("<img id='imglogotab' alt='banner bg' class='hide sm-show' src='"+e+"' />").appendTo("div#img_banner_div"),""==!l?jQuery("<img id='imglogomobile' alt='banner bg' class='hide xs-show' src='"+l+"' />").appendTo("div#img_banner_div"):jQuery("<img id='imglogomobile' alt='banner bg' class='hide xs-show' src='"+e+"' />").appendTo("div#img_banner_div"),jQuery("#chk_wrapper").removeClass("chkimg_notfound"),jQuery("#img_banner_div").removeClass("vres_bnr"),jQuery("#imglogo").addClass("md-show"),jQuery("#imglogo").addClass("hide"),$("#imglogotab,#imglogomobile").error(function(){if(jQuery("#img_banner_div").removeClass("vres-responsive-bnr"),$("#imglogotab,#imglogomobile").remove(),""==!r){var e="res_Logo_Tab_"+t.HotelId;document.cookie=e+"="}if(""==!l){var a="res_Logo_Mobile_"+t.HotelId;document.cookie=a+"="}})}catch(e){hideLoadingBar(),hideCheckavalabilityLoadingBar(),console.log("Error - _setImages - "+e.message)}},_getImages:function(r){try{for(var l="res_Logo_"+r.HotelId,i="res_Logo_Tab_"+r.HotelId,o="res_Logo_Mobile_"+r.HotelId,e=l+"=",a=i+"=",t=o+"=",s=document.cookie.split(";"),d=cookie_img_tab=cookie_m="",n=0;n<s.length;n++){for(var c=s[n];" "==c.charAt(0);)c=c.substring(1);0==c.indexOf(e)&&(d=c.substring(e.length,c.length)),0==c.indexOf(a)&&(cookie_img_tab=c.substring(a.length,c.length)),0==c.indexOf(t)&&(cookie_m=c.substring(t.length,c.length))}if(""!=d){var _=d;""==_||"no-bnr"==_?(jQuery("#img_banner_div").hide(),jQuery("#img_banner_div").html(""),jQuery("#img_banner_div").removeClass("vres_bnr"),jQuery("#chk_wrapper").removeClass("chkimg_notfound").addClass("chkimg_notfound"),jQuery(".vres_bhk_pos .full-bar-wrapper").css({width:"100%"})):(document.cookie=l+"="+_,methods._setImages(r,_),methods._setDeviceWiseImages(r,cookie_img_tab,cookie_m,_))}else getUrl=r.serverurl+"service.php",$.ajax({url:getUrl,type:"POST",data:{action:"LogoBannerImage",HotelId:r.HotelId},dataType:"html",success:function(e){var a=jQuery.trim(e),t=JSON.parse(a);""==t.DESKTOP||void 0===t.DESKTOP?(jQuery("#img_banner_div").hide(),jQuery("#img_banner_div").html(""),jQuery("#img_banner_div").removeClass("vres_bnr"),jQuery("#chk_wrapper").removeClass("chkimg_notfound").addClass("chkimg_notfound"),jQuery(".vres_bhk_pos .full-bar-wrapper").css({width:"100%"})):(methods._setImages(r,t.DESKTOP),null!=t.MOBILE&&""!=t.MOBILE&&(document.cookie=o+"="+t.MOBILE),null!=t.TAB&&""!=t.TAB&&(document.cookie=i+"="+t.TAB),methods._setDeviceWiseImages(r,t.TAB,t.MOBILE,t.DESKTOP),document.cookie=l+"="+t.DESKTOP)}})}catch(e){console.log(" _getImages "+e)}},_ShowQuickNotes:function(opt){try{for(var _isQuickNotes="true",keyname_quick="res_quick_"+opt.HotelId,name=keyname_quick+"=",ca=document.cookie.split(";"),cookie_filter="",i=0;i<ca.length;i++){for(var c=ca[i];" "==c.charAt(0);)c=c.substring(1);0==c.indexOf(name)&&(cookie_filter=c.substring(name.length,c.length))}if(""!=cookie_filter)var _isQuickNotes=cookie_filter;else document.cookie=keyname_quick+"=false";var _isQuickNotesFlag="true";$.get(opt.serverurl+"service.php?HotelId="+opt.HotelId+"&_quicknotes="+_isQuickNotesFlag,function(data){var JSONobject=eval("["+data+"]");jQuery.each(JSONobject,function(e,a){if(1==a[0].QuickNotesFlag&&1==a[0].qflag&&1==a[0].qtitleflag){$("#quickinfo").html(a[0].quicktitle),$("#qconte").html(a[0].quickcontent),$("#ofr-btn").show(),$(".vres-specialoffer").show();var t=$(".vres-specialoffer").height();$(".vres-specialoffer").css({"margin-top":-t}),"true"==_isQuickNotes&&($(".vres-specialoffer").addClass("vres-offerposition").css({transition:"all ease .3s"}),setTimeout(function(){$(".vres-specialoffer").removeClass("vres-offerposition").css({transition:"all ease .3s"})},5e3),setTimeout(function(){$("#ofr-btn").removeClass("offr_bg"),$(".offer-btn").children("img").removeClass("animate_ofr-img")},5e3),$("#ofr-btn").addClass("offr_bg"))}})})}catch(e){console.log("Error in _ShowQuickNotes"+e)}},_InsertCheckAvail:function(e){var a=0;1==e.loadvisitor&&(methods._storeAuthDetails(e),a=1,0==e.ShowCurrencyCountryWise&&(console.log("get country nam1e"),methods._getCountryName(e)),e.loadvisitor=!1);var t=$("#eZ_chkin").val(),r=1;r=0==e.ShowNights&&1==e.ShowDepart?$("input[id$='eZ_Nights']").val():$("input#eZ_Nights2").val();var l=$("input[id$='CalDtFormat']").val(),i="";null!=e.SelectedPromo&&""!=e.SelectedPromo&&(i=e.SelectedPromo),""==i&&(i=$("input[id$='promotioncode']").val()),null==i&&(i="");var o="1";1==e.acr&&(o=$("select#eZ_adult").val());var s="0";1==e.showchild_bb&&(s=$("select#eZ_child").val()),$.ajax({url:e.serverurl+"service.php",type:"POST",data:{action:"CheckAvailData",HotelId:e.HotelId,arrival_date:t,adult:o,child:s,nights:r,offer_rates:"",rooms:"",promotional_code:i,book_multiple:"",date_format:l,_TrackId:"",device:e.device_detect,trackvisit:a},dataType:"html",success:function(e){$("#_TrackId").val(jQuery.trim(e))}})},_availabilitycal:function(i,e,a,t,o,r){try{if(r=r||"","-zh-CN-Chinese"!=i.selectedLang&&"-zh-TW-ChineseTraditional"!=i.selectedLang)var l=i.selectedLang.split("-");else{var s=i.selectedLang.split("-");(l=Array())[2]=s[3],l[1]=s[1]+"-"+s[2]}""==r&&(r=$("#avairoomtype").val()),""!=a&&$(".roomtype-input").hide(),console.log("Selected RoomType"+r);var d=$("input[id$='CalDtFormat']").val();$.ajax({url:i.serverurl+"availability_calender.php",type:"POST",dataType:"html",data:{HotelId:i.HotelId,arrival_date:e,date_format:d,filter:a,type:t,frame:0,lang_code:l[1],langtext:l[2],TA_id:jQuery("#request_TA").val(),promotioncode:jQuery("#avail_cal_prmcode").val(),through:"BE",roomTypeunkId:r},error:function(){},beforeSend:function(){$("#checkavaildata").html(jQuery(".loadingbar").html())},complete:function(){$("#checkavail-modal").modal()},success:function(e){$("#checkavaildata").html(e)},complete:function(){if($("#prev_dt").prev_dt(),$("#next_dt").next_dt(),"prev"!=o){var e=$.datepicker.parseDate(d,jQuery("#Jumpdt").val());e.setDate(e.getDate()-12);var a=$.datepicker.formatDate(d,e);$("#prev_dt").val(a);var t=$.datepicker.parseDate(d,jQuery("#Jumpdt").val());t.setDate(t.getDate()+12);var r=$.datepicker.formatDate(d,t);$("#next_dt").val(r)}var l=new Date;l.setDate(l.getDate()+i.CalMinDate),$.datepicker.parseDate(d,jQuery("#Jumpdt").val())<=l?jQuery("#prev_dt_clk").hide():$("#prev_dt_clk").show()}})}catch(e){hideLoadingBar(),console.log("Error - _availabilitycal - "+e.message)}},checkPromoCodeValidity:function(e){try{showLoadingBar();var a=$("#eZ_chkin").val(),t=$("input[id$='CalDtFormat']").val(),r=1;r=0==e.ShowNights&&1==e.ShowDepart?$("input[id$='eZ_Nights']").val():$("input#eZ_Nights2").val();var l=new Date(jQuery.datepicker.parseDate(t,a));l=jQuery.datepicker.formatDate("yy-mm-dd",l);var i="action=PromoCodeValidity&HotelId="+e.HotelId+"&check_in_date="+l+"&num_nights="+r+"&pmcd="+jQuery("#FacebookShareRewardPromo").val();jQuery.ajax({type:"POST",url:serverurl+"service.php",data:i,success:function(e){if("true"==jQuery.trim(e))jQuery(".slider_popup").addClass("slider-right");else{var a=js_stripslashes(langjs[0].L_FBShareOfferExpire);swal({title:"",text:a,type:"warning",showCancelButton:!1,animation:!1})}hideLoadingBar()}})}catch(e){console.log("checkPromoCodeValidity - "+e)}},_loadheaderevents:function(t){try{if($(".offer-btn").on("click",function(){$(".vres-specialoffer").toggleClass("vres-offerposition").css({transition:"all ease .3s"}),$("#ofr-btn").toggleClass("offr_bg"),$(this).children("img").toggleClass("animate_ofr-img")}),$(".cur-btn").on("click",function(e){jQuery("#re_pricecheckiframe").hide(),methods._checksession(t,"currency"),$(this).parent().hasClass("open")?$(this).parent().removeClass("open"):($(".vres-cur-label").removeClass("open"),$(this).parent().addClass("open"),jQuery("#re_pricecheckiframe").show()),$("#CHCurrency li").each(function(){var e=jQuery("#suggested_curr").val();if(1==jQuery(this).hasClass(e)){var a=jQuery.trim(jQuery(this).html());jQuery("#CHSuggested").html("<li value="+e+">"+a+"</li>")}})}),$(document).mouseup(function(e){var a=$(".vres-cur-label");a.is(e.target)||0!==a.has(e.target).length||$(".vres-cur-label").removeClass("open")}),$("#CHCurrency li").click(function(e){$("#searchcurrency").val(""),""!=$(this).attr("value")&&void 0!==resgrid[0][0]&&($(".vres-cur-label").removeClass("open"),methods._getCurrencyValue(t,resgrid[0][0].MultiplyCurrCode,$(this).attr("value"),resgrid[0][0].decimal))}),$("#CHSuggested").click(function(e){var a=$("#CHSuggested").find("li").attr("value");""!=a&&void 0!==resgrid[0][0]&&($(".vres-cur-label").removeClass("open"),methods._getCurrencyValue(t,resgrid[0][0].MultiplyCurrCode,a,resgrid[0][0].decimal))}),$(".vres-back-top").length){var e=function(){100<$(window).scrollTop()?$(".vres-back-top").addClass("vshow"):$(".vres-back-top").removeClass("vshow")};e(),$(window).on("scroll",function(){e()}),$(".vres-back-top").on("click",function(e){e.preventDefault(),$("html,body").animate({scrollTop:0},500)})}}catch(e){console.log("_loadheaderevents - "+e)}},_CountryCurrency:function(e){try{if(0==e.ShowMultipleCurrencyOption&&0==e.ShowCurrencyCountryWise&&""!=e.WebShowSelectedCurrencyList&&null!=e.WebShowSelectedCurrencyList){var a=$("#suggested_curr").val();0<=$.trim(e.WebShowSelectedCurrencyList).indexOf(a)&&""!=a?void 0!==resgrid[0][0]&&($(".vres-cur-label").removeClass("open"),methods._getCurrencyValue(e,resgrid[0][0].MultiplyCurrCode,a,resgrid[0][0].decimal)):""!=e.WebDefaultCurrency&&null!=e.WebDefaultCurrency&&methods._getCurrencyValue(e,resgrid[0][0].MultiplyCurrCode,e.WebDefaultCurrency,resgrid[0][0].decimal)}}catch(e){console.log("_CountryCurrency - "+e)}},_loadbbevents:function(){try{var a=$(".help_btn").parents('[data-type="help_section"]').find(".vres-helpdetail"),e=!1;$(".help_btn").mouseover(function(){e=!0}).mouseleave(function(){e=!1}),$(".help_btn").bind("focusin",function(){$(".tipso-tooltip-help").tipso("show")}),$(".help_btn").bind("focusout",function(){e||$(".tipso-tooltip-help").tipso("hide")}),$(".help_btn").on("click",function(e){e.stopPropagation(),"block"==a.css("display")?a.hide():a.show(),$(".tipso-tooltip-help").tipso("hide")})}catch(e){console.log("_loadbbevents - "+e)}},_pricewidgetreload:function(e,a){try{if(0<jQuery("#re_pricecheckiframe").length&&0<jQuery("#pricewidgetlink").length&&null!=jQuery("#pricewidgetlink").val()&&""!=jQuery("#pricewidgetlink").val()){a=a||"";var t="",r=0,l=Array();Array();jQuery(".pricewid-webprice").each(function(){parseFloat(jQuery(this).val());var e=jQuery(this).parent().is(":visible");if(e||!e&&jQuery(this).parent().hasClass("read-more-content")){var a=jQuery(this).parent().attr("id").split("_");void 0!==resgrid[0][a[1]].hiderateplan&&"1"==resgrid[0][a[1]].hiderateplan||(l.push(jQuery(this).val()),r++)}});t=Math.min.apply(Math,l);if(t=parseFloat(t),0<r){var i=resgrid[0][0].MultiplyCurrCode,o=resgrid[0][0].MultiplyFactor;t*=parseFloat(o);var s=1;s=0==e.ShowNights&&1==e.ShowDepart?$("input[id$='eZ_Nights']").val():$("input#eZ_Nights2").val();var d=$("#eZ_chkin").datepicker("getDate"),n=$("#eZ_chkin").datepicker("getDate");e.ShowNights,n.setDate(d.getDate()+parseInt(s)),d=$.datepicker.formatDate("yy-mm-dd ",d),n=$.datepicker.formatDate("yy-mm-dd ",n);var c=jQuery("#pricewidgetlink").val();if(c=(c=(c=c.replace(/\{check_in_date}/g,d)).replace(/\{check_out_date}/g,n)).replace(/\{directprice}/g,methods._applyRoundOff(t).toFixed(_display_decimalplaces)),c=""==a?c.replace(/\{hotelcurrency}/g,i):c.replace(/\{hotelcurrency}/g,a),"-zh-CN-Chinese"!=e.selectedLang&&"-zh-TW-ChineseTraditional"!=e.selectedLang)var _=e.selectedLang.split("-");else{var u=e.selectedLang.split("-");(_=Array())[2]=u[3],_[1]=u[1]+"-"+u[2]}""!=_[1]&&null!=_[1]&&(c=c+"&language="+_[1]),"MOBILE"==e.device_detect&&(c+="&widget-open=close"),""!=jQuery("body").attr("class")&&(c+="&classadd="+jQuery("body").attr("class")),null!=resgrid[0][0].ShowTaxInclusiveExclusiveSettings&&(c+="&istaxinclusive="+resgrid[0][0].ShowTaxInclusiveExclusiveSettings),jQuery("#re_pricecheckiframe").attr("src",c)}}}catch(e){console.log("_pricewidgetreload - "+e)}},dayTripper:function(){$(".hasDatepicker").on("click focusin",function(){setTimeout(function(){var e=$(".ui-datepicker-today a")[0];e||(e=$(".ui-state-active")[0]||$(".ui-state-default")[0]),$("main").attr("id","dp-container"),$("#dp-container").attr("aria-hidden","true"),$("#skipnav").attr("aria-hidden","true"),$(".ui-datepicker-current").hide(),e.focus(),methods.datePickHandler(),$(document).on("click","#ui-datepicker-div .ui-datepicker-close",function(){methods.closeCalendar()})},0)})},datePickHandler:function(){var s;if(c=document.getElementById("ui-datepicker-div")){c.setAttribute("role","application"),c.setAttribute("aria-label","Calendar view date-picker");var d=$(".ui-datepicker-prev",c)[0],n=$(".ui-datepicker-next",c)[0];n.href="javascript:void(0)",d.href="javascript:void(0)",n.setAttribute("role","button"),n.removeAttribute("title"),d.setAttribute("role","button"),d.removeAttribute("title"),methods.appendOffscreenMonthText(n),methods.appendOffscreenMonthText(d),$(n).on("click",methods.handleNextClicks),$(d).on("click",methods.handlePrevClicks);var c=$("#ui-datepicker-div");$(c).off("keydown"),methods.monthDayYearText(),$(c).on("keydown",function(e){var a=e.which,t=e.target,r=methods.getCurrentDate(c);if(r||(r=$("a.ui-state-default")[0],methods.setHighlightState(r,c)),27===a)return e.stopPropagation(),methods.closeCalendar();if(9===a&&e.shiftKey)e.preventDefault(),$(t).hasClass("ui-datepicker-close")?$(".ui-datepicker-prev")[0].focus():$(t).hasClass("ui-state-default")?$(".ui-datepicker-close")[0].focus():$(t).hasClass("ui-datepicker-prev")?$(".ui-datepicker-next")[0].focus():$(t).hasClass("ui-datepicker-next")&&(s=$(".ui-state-highlight")||$(".ui-state-active")[0])&&s.focus();else if(9===a)e.preventDefault(),$(t).hasClass("ui-datepicker-close")?(s=$(".ui-state-highlight")||$(".ui-state-active")[0])&&s.focus():$(t).hasClass("ui-state-default")?$(".ui-datepicker-next")[0].focus():$(t).hasClass("ui-datepicker-next")?$(".ui-datepicker-prev")[0].focus():$(t).hasClass("ui-datepicker-prev")&&(s=$(".ui-state-highlight")||$(".ui-state-active")[0])&&s.focus();else if(37===a)!$(t).hasClass("ui-datepicker-close")&&$(t).hasClass("ui-state-default")&&(e.preventDefault(),methods.previousDay(t));else if(39===a)!$(t).hasClass("ui-datepicker-close")&&$(t).hasClass("ui-state-default")&&(e.preventDefault(),methods.nextDay(t));else if(38===a)!$(t).hasClass("ui-datepicker-close")&&$(t).hasClass("ui-state-default")&&(e.preventDefault(),methods.upHandler(t,c,d));else if(40===a)!$(t).hasClass("ui-datepicker-close")&&$(t).hasClass("ui-state-default")&&(e.preventDefault(),methods.downHandler(t,c,n));else if(13===a)$(t).hasClass("ui-state-default")?setTimeout(function(){},100):$(t).hasClass("ui-datepicker-prev")?methods.handlePrevClicks():$(t).hasClass("ui-datepicker-next")&&methods.handleNextClicks();else if(32===a)($(t).hasClass("ui-datepicker-prev")||$(t).hasClass("ui-datepicker-next"))&&t.click();else if(33===a)methods.moveOneMonth(t,"prev");else if(34===a)methods.moveOneMonth(t,"next");else if(36===a){var l=$(t).closest("tbody").find(".ui-state-default")[0];l&&(l.focus(),methods.setHighlightState(l,$("#ui-datepicker-div")[0]))}else if(35===a){var i=$(t).closest("tbody").find(".ui-state-default"),o=i[i.length-1];o&&(o.focus(),methods.setHighlightState(o,$("#ui-datepicker-div")[0]))}$(".ui-datepicker-current").hide()})}},closeCalendar:function(){var e=$("#ui-datepicker-div");$(e).off("keydown");var a=$(".hasDatepicker")[0];$(a).datepicker("hide")},removeAria:function(){$("#dp-container").removeAttr("aria-hidden"),$("#skipnav").removeAttr("aria-hidden")},isOdd:function(e){return e%2},moveOneMonth:function(e,a){var t="next"===a?$(".ui-datepicker-next")[0]:$(".ui-datepicker-prev")[0];if(t){var r="#ui-datepicker-div tbody td:not(.ui-state-disabled)",l=$(r),i=$.inArray(e.parentNode,l);t.click(),setTimeout(function(){methods.updateHeaderElements();for(var e=$(r),a=e[i],t=a&&$(a).find("a")[0];!t;)t=(a=e[--i])&&$(a).find("a")[0];methods.setHighlightState(t,$("#ui-datepicker-div")[0]),t.focus()},0)}},handleNextClicks:function(){setTimeout(function(){methods.updateHeaderElements(),methods.prepHighlightState(),$(".ui-datepicker-next").focus(),$(".ui-datepicker-current").hide()},0)},handlePrevClicks:function(){setTimeout(function(){methods.updateHeaderElements(),methods.prepHighlightState(),$(".ui-datepicker-prev").focus(),$(".ui-datepicker-current").hide()},0)},previousDay:function(e){var a=document.getElementById("ui-datepicker-div");if(e){var t=$(e).closest("td");if(t){var r=$(t).prev(),l=$("a.ui-state-default",r)[0];r&&l?(methods.setHighlightState(l,a),l.focus()):methods.handlePrevious(e)}}},handlePrevious:function(e){var a=document.getElementById("ui-datepicker-div");if(e){var t=$(e).closest("tr");if(t){var r=$(t).prev();if(r&&0!==r.length){var l=$("td a.ui-state-default",r),i=l[l.length-1];i&&setTimeout(function(){methods.setHighlightState(i,a),i.focus()},0)}else methods.previousMonth()}}},previousMonth:function(){var e=$(".ui-datepicker-prev")[0],r=document.getElementById("ui-datepicker-div");e.click(),setTimeout(function(){var e=$("tr",r),a=$("td a.ui-state-default",e[e.length-1]),t=a[a.length-1];methods.updateHeaderElements(),methods.setHighlightState(t,r),t.focus()},0)},nextDay:function(e){var a=document.getElementById("ui-datepicker-div");if(e){var t=$(e).closest("td");if(t){var r=$(t).next(),l=$("a.ui-state-default",r)[0];r&&l?(methods.setHighlightState(l,a),l.focus()):methods.handleNext(e)}}},handleNext:function(e){var a=document.getElementById("ui-datepicker-div");if(e){var t=$(e).closest("tr"),r=$(t).next();if(r&&0!==r.length){var l=$("a.ui-state-default",r)[0];l&&(methods.setHighlightState(l,a),l.focus())}else methods.nextMonth()}},nextMonth:function(){nextMon=$(".ui-datepicker-next")[0];var a=document.getElementById("ui-datepicker-div");nextMon.click(),setTimeout(function(){methods.updateHeaderElements();var e=$("a.ui-state-default",a)[0];methods.setHighlightState(e,a),e.focus()},0)},upHandler:function(n,c,e){e=$(".ui-datepicker-prev")[0];var a=$(n).closest("tr");if(a){var _=$("td",a),t=$("a.ui-state-default",a),r=$.inArray(n,t),l=$(a).prev(),i=$("td",l)[r],o=$("a.ui-state-default",i)[0];l&&i&&o?(methods.setHighlightState(o,c),o.focus()):(e.click(),setTimeout(function(){methods.updateHeaderElements();var e=$("tr",c),a=e[e.length-1],t=$("td",a),r=$.inArray(n.parentNode,_),l=t[r],i=$("a.ui-state-default",l)[0];if(a&&l&&i)methods.setHighlightState(i,c),i.focus();else{var o=e[e.length-2],s=$("td",o)[r],d=$("a.ui-state-default",s)[0];d&&d.focus()}},0))}},downHandler:function(e,o,a){a=$(".ui-datepicker-next")[0];var t=$(e).closest("tr");if(t){var r=$("td",t),s=$.inArray(e.parentNode,r),l=$(t).next(),i=$("td",l)[s],d=$("a.ui-state-default",i)[0];l&&i&&d?(methods.setHighlightState(d,o),d.focus()):(a.click(),setTimeout(function(){methods.updateHeaderElements();var e=$("tbody tr",o),a=$("td",e[0])[s],t=$("a.ui-state-default",a)[0];if(a&&t)methods.setHighlightState(t,o),t.focus();else{var r=e[1],l=$("td",r)[s],i=$("a.ui-state-default",l)[0];r&&i&&(methods.setHighlightState(i,o),i.focus())}},0))}},onCalendarHide:function(){methods.closeCalendar()},monthDayYearText:function(){var e=$(".amaze-date");$(e).each(function(e){e.parentNode.removeChild(e)});var _=document.getElementById("ui-datepicker-div");if(_){var a=$("a.ui-state-default",_);$(a).attr("role","button").on("keydown",function(e){32===e.which&&(e.preventDefault(),e.target.click(),setTimeout(function(){methods.closeCalendar()},100))}),$(a).each(function(e,a){var t=$(a).closest("tr"),r=$("td",t),l=$.inArray(a.parentNode,r),i=$("thead tr th",_)[l],o=$("span",i)[0],s=$(".ui-datepicker-month",_)[0].innerHTML,d=$(".ui-datepicker-year",_)[0].innerHTML,n=a.innerHTML;if(o&&s&&n&&d){var c=a.innerHTML+" "+s+" "+d+" "+o.title;a.setAttribute("aria-label",c)}})}},updateHeaderElements:function(){var e=document.getElementById("ui-datepicker-div");e&&(prev=$(".ui-datepicker-prev",e)[0],next=$(".ui-datepicker-next",e)[0],next.href="javascript:void(0)",prev.href="javascript:void(0)",next.setAttribute("role","button"),prev.setAttribute("role","button"),methods.appendOffscreenMonthText(next),methods.appendOffscreenMonthText(prev),$(next).on("click",methods.handleNextClicks),$(prev).on("click",methods.handlePrevClicks),methods.monthDayYearText())},prepHighlightState:function(){var e,a=document.getElementById("ui-datepicker-div");(e=$(".ui-state-highlight",a)[0]||$(".ui-state-default",a)[0])&&a&&methods.setHighlightState(e,a)},setHighlightState:function(e,a){var t=methods.getCurrentDate(a);$(t).removeClass("ui-state-highlight"),$(e).addClass("ui-state-highlight")},getCurrentDate:function(e){return $(".ui-state-highlight",e)[0]},appendOffscreenMonthText:function(e){var a,t=$(e).hasClass("ui-datepicker-next"),r=["january","february","march","april","may","june","july","august","september","october","november","december"],l=$(".ui-datepicker-title .ui-datepicker-month").text().toLowerCase(),i=$.inArray(l.toLowerCase(),r),o=$(".ui-datepicker-title .ui-datepicker-year").text().toLowerCase(),s=t?i+1:i-1;t&&"december"===l?(o=parseInt(o,10)+1,s=0):t||"january"!==l||(o=parseInt(o,10)-1,s=r.length-1),a=t?"Next Month, "+methods.firstToCap(r[s])+" "+o:"Previous Month, "+methods.firstToCap(r[s])+" "+o,$(e).find(".ui-icon").html(a)},firstToCap:function(e){return e.charAt(0).toUpperCase()+e.slice(1)}},defaultOptions={btnContainer:"eZee_BookingContainer",HotelId:1,LayoutTheme:"0",LayoutView:"0",HeaderBgColor1:"#eeeeee",HeaderFontColor:"#000",HeaderBgColor2:"#eeeeee",HeaderFontColor2:"#000",HeaderBorderColor:"#a6a6a6",BodyBgColor:"#EDEDED",BodyBgTheme:"0",BodyBgPosition1:"repeat",BodyBgPosition2:"left",BodyBgPosition3:"top",BodyBgPosition4:"",BodyFontFamily:"'SourceSansProRegular', sans-serif",Calinit:!0,CalShowOn:"both",CalDefaultDt:"+0w",CalChangeMonth:!0,CalMaxDate:"",siteroot:!0,selectedLang:null,CalMinDate:0,CalDtFormat:"dd-mm-yy",CalHeaderColor:"#cccccc",CalCellActiveColor:"#eeeeee",CalCellInActiveColor:"#F4f4f4",CalHeaderFontColor:"#000000",CalLanguage:"en",ShowPromotion:!0,ResUIAvailabilityTextColor:"#ffffff",ResUIAvailabilityBackgroundColor:"#46d46d",ResUIAddRoomTextColor:"#fcfcfc",ResUIAddRoomBackgroundColor:"#5c1111",ResUIAddRoomBackgroundHoverColor:"#806666",NeedHelpBackgroundColor:"#e00d0d",NeedHelpTextColor:"#d3cbd4",ResUIHelpBoxBackColor:"#d610e0",ResUIHelpBoxTextColor:"#ffffff",ResUIHelpBoxBorderColor:"#ffffff",ResUIRoomNameTextColor:"#5c1111",ResUIRateTextColor:"#10b063",ResUIRoomInfoEnquireTextColor:"#fc3f3f",init:!0,loadvisitor:!0,loadgrid:!1,serverurl:"https://live.ipms247.com/booking/",serverhost:"live.ipms247.com",decimalplaces:2,modifysearch:!1,arrivaldate:null,chkindate:null,chkoutdate:null,chkoutdate_modify:null,nights_billing:null,isLogin:"lf",ShowNights:!1,Nonights:50,ShowSelectedNights:!1,DefaultSelectedNights:0,SelectedNights:0,showchild:!0,acr:!0,showchild_bb:"-1",defaultadult:5,defaultchild:5,SelectedAdults:1,SelectedChild:0,defaultselectedadult:0,defaultselectedchild:"",WebAvailabilityCutOffDay:1,SelectedPromo:null,NeedHelpBackgroundColor:"#000000",NeedHelpTextColor:"#FFFFFF",ShowOnlyAvailableRatePlanOrPackage:0,ShowMinNightsMatchedRatePlan:!1,ShowDepart:!1,roomtypeunkid:"",isShowRecentBooking:"1",isShowBEViewers:"1",isShowTotalGuestCountryWise:"1",ResUIshowfilter:!0,ResUIMinimumPrice:0,ResUIMaximumPrice:500,ResUIshowfilterPlan:!0,ResUIshowfilterPrice:!0,ResUIshowfilterPreference:!0,selectedviewoptions:0,AllowMultipleRoomBooking:!0,WebDefaultRatesAvgNightORWholeStay:1,WebShowRatesAvgNightORWholeStay:2,RunOnMaximumOccupanySettings:0,device_detect:"DESKTOP",ResUIshowGuestRating:0,ResUILimitRatePlanPackage:1,ResUINoOfRatePlanPackage:2,ResUIFilterNonRefundable:0,ResUIFilterNonRefundableValue:0,ResUIFilterExcludeNotAvailable:0,ResUIFilterSearchMore:!1,ResUIFilterRoomType:!1,ShowClosestAvailability:0,specialunkid:"",opt_roomrateunkid:"",sflroomrateunkid:"",sflspecialunkid:"",LocalFolderSessionChk:"",HideResetFilter:!1,WebShowSelectedCurrencyList:"",WebDefaultCurrency:"",ShowMultipleCurrencyOption:1,ShowCurrencyCountryWise:1,TripteasehotelKey:"",TripteasehotelAPIkey:"",ResUIPaxOnMaximumOccupancy:0,BookingFrom:"",ADABECountry:""}}(jQuery);
//# sourceMappingURL=maps/resplugin.js.map
